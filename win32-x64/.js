import{H as p}from"./i.js";import{i}from"./2.js";import{c as n}from"./t.js";var c,d;d=async(e,a)=>{var t,r;return t=new Headers,t.append("user_token",localStorage.uid),e.startsWith("upload")&&(r=await a.auto_update.ua_now(),t.append("ua",r)),t};c=class{constructor(a){this.json=this.json.bind(this),this.ipc=a}async fetch(a,t={}){var r;if(t.headers=await d(a,this.ipc),a.indexOf(".do")<0&&(a+=".do"),r=await fetch(p+a,t),r.status===401){delete localStorage.uid,this.ipc.auto_update.relaunch();return}return r}async json(a,t={}){var r;return r=await this.fetch(a,t),r.json()}};var u=e=>new c(e);var o,v=u(i);o=1*60;var w=async function(){var e,a;try{({space:{max:a}}=await u(i).json("user/get"))}catch(t){e=t,console.error(e),a=500*1024*1024}a>=1e3*1024*1024*1024?(n.duration_txt="单次最长录制5小时",n.max_duration=5*60*60+o):a>=10*1024*1024*1024?(n.duration_txt='单次最长录制3小时, "扩容"可获更长时间',n.max_duration=3*60*60+o):(n.duration_txt='单次最长录制30分钟, "扩容"可获更长时间',n.max_duration=30*60+o)},g=async function(){var e,a,t;try{t=await u(i).json("notify/unread"),e=t[0]}catch(r){a=r,console.error(a),e=0}return e},h="https://matomo.dalukuankuan.com/",s;s=window._paq=window._paq||[];s.push(["setCustomDimension",1,await i.auto_update.ver_now()]);s.push(["trackPageView"]);s.push(["enableLinkTracking"]);localStorage.uid?s.push(["setUserId",localStorage.uid]):s.push(["resetUserId"]);(function(){var e,a,t,r;r=h,s.push(["setTrackerUrl",r+"matomo.php"]),s.push(["setSiteId","1"]),e=document,a=e.createElement("script"),t=e.getElementsByTagName("script")[0],a.async=!0,a.src=r+"matomo.js",t.parentNode.insertBefore(a,t)})();var x=function(e,a){_paq.push(["trackEvent",e,a,"",""])},y=function(e,a,t){_paq.push(["trackEvent",e,a,"","",t])};export{w as a,g as f,v as u,y as 录,x as 数};
