import u from"./d.js";import{c as e}from"./e.js";import{b as w,g,m as k}from"./..js";import{v as S}from"./w.js";import{i as _}from"./4.js";import{k as v,H as b}from"./i.js";import"./0.js";import"./1.js";import"./q.js";import"./g.js";import"./-.js";import"./r.js";import"./$.js";function y(){return new Worker("/$!.js",{type:"module"})}var p,i,o,m,t,f,n,l,s,d,a;({camera:m}=_);n=await S();a=n.getVideoTracks()[0];({area:p}=e);p&&(d=new MediaStreamTrackProcessor({track:a,maxBufferSize:15}),a=new MediaStreamTrackGenerator({kind:"video"}),t=[d.readable,a.writable],f=()=>{new y().postMessage([localStorage.ppi-0,...t,...JSON.parse(localStorage.area)],t)});a.contentHint="detail";i=await w();o=i?i.getTracks():[];i&&e.sys_audio&&(s=await g(),s&&(o=k(o,s)));l=new MediaStream([a,...o]);v(()=>{var r,c;r=!!e.audio;for(c of o)c.enabled=r});b(()=>e.video,async()=>{var r;({video:r}=e),r?await m.circle(localStorage.人像尺寸-0):await m.x()});u(l,f);
