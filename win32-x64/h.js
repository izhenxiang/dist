"use strict";var cr=Object.create;var It=Object.defineProperty;var dr=Object.getOwnPropertyDescriptor;var lr=Object.getOwnPropertyNames;var fr=Object.getPrototypeOf,pr=Object.prototype.hasOwnProperty;var hr=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of lr(e))!pr.call(t,i)&&i!==n&&It(t,i,{get:()=>e[i],enumerable:!(r=dr(e,i))||r.enumerable});return t};var Pt=(t,e,n)=>(n=t!=null?cr(fr(t)):{},hr(e||!t||!t.__esModule?It(n,"default",{value:t,enumerable:!0}):n,t));Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});var O=require("fs"),Ne=require("url"),vr=require("http"),_r=require("https"),gr=require("domain"),L=require("util"),yr=require("./e.js"),T=require("path"),G=require("os"),v=require("electron"),mr=require("child_process"),Sr=require("stream"),br=require("zlib");function $(t){if(t&&t.__esModule)return t;var e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});return t&&Object.keys(t).forEach(function(n){if(n!=="default"){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}}),e.default=t,Object.freeze(e)}var Er=$(O),ke=$(Ne),Ct=$(vr),At=$(_r),un=$(gr),wr=$(L),xr=$(mr);const Oe="sentry-ipc";var V;(function(t){t.PING="sentry-electron.ping",t.EVENT="sentry-electron.event",t.SCOPE="sentry-electron.scope"})(V||(V={}));function Re(t,e){const n=e.replace(/\\/g,"/").replace(/[|\\{}()[\]^$+*?.]/g,"\\$&");let r=t;try{r=decodeURI(t)}catch{}return r.replace(/\\/g,"/").replace(/webpack:\/?/g,"").replace(new RegExp(`(file://)?/*${n}/*`,"ig"),"app:///")}function cn(t,e){const n=Or(t);n&&n.frames&&n.frames.forEach(s=>{s.filename&&(s.filename=Re(s.filename,e))}),t.transaction&&(t.transaction=Re(t.transaction,e));const{request:r={}}=t;r.url&&(r.url=Re(r.url,e)),r.headers&&delete r.headers["User-Agent"];const{tags:i={}}=t;return delete i.server_name,t}function Or(t){const{stacktrace:e,exception:n}=t;if(e)return e;if(n){if(n[0])return n[0].stacktrace;const r=n;if(r.values&&r.values[0])return r.values[0].stacktrace}}var Tr=function(e){return kr(e)&&!Rr(e)};function kr(t){return!!t&&typeof t=="object"}function Rr(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||Pr(t)}var Nr=typeof Symbol=="function"&&Symbol.for,Ir=Nr?Symbol.for("react.element"):60103;function Pr(t){return t.$$typeof===Ir}function Cr(t){return Array.isArray(t)?[]:{}}function de(t,e){return e.clone!==!1&&e.isMergeableObject(t)?J(Cr(t),t,e):t}function Ar(t,e,n){return t.concat(e).map(function(r){return de(r,n)})}function Mr(t,e){if(!e.customMerge)return J;var n=e.customMerge(t);return typeof n=="function"?n:J}function Dr(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return t.propertyIsEnumerable(e)}):[]}function Mt(t){return Object.keys(t).concat(Dr(t))}function dn(t,e){try{return e in t}catch{return!1}}function jr(t,e){return dn(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function Lr(t,e,n){var r={};return n.isMergeableObject(t)&&Mt(t).forEach(function(i){r[i]=de(t[i],n)}),Mt(e).forEach(function(i){jr(t,i)||(dn(t,i)&&n.isMergeableObject(e[i])?r[i]=Mr(i,n)(t[i],e[i],n):r[i]=de(e[i],n))}),r}function J(t,e,n){n=n||{},n.arrayMerge=n.arrayMerge||Ar,n.isMergeableObject=n.isMergeableObject||Tr,n.cloneUnlessOtherwiseSpecified=de;var r=Array.isArray(e),i=Array.isArray(t),s=r===i;return s?r?n.arrayMerge(t,e,n):Lr(t,e,n):de(e,n)}J.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,i){return J(r,i,n)},{})};var Fr=J,Ur=Fr;function Br(t){for(const e of t.spans||[])delete e.spanRecorder,delete e.transaction}function K(t,e){Br(e);const n=Ur(t,e);return(e.spans||t.spans)&&(n.spans=e.spans||t.spans),Object.assign(Object.assign({},n),{sdk:Object.assign(Object.assign({},t.sdk),e.sdk)})}exports.IPCMode=void 0;(function(t){t[t.Classic=1]="Classic",t[t.Protocol=2]="Protocol",t[t.Both=3]="Both"})(exports.IPCMode||(exports.IPCMode={}));function ln(t){const e=typeof window!="undefined"?"renderer":"main";if(e!==t)throw new Error(`This code is intended to run in the Electron ${t} process but is currently running in the ${e} process.
This can occur if a bundler picks the wrong entry point.

You can work around this by using a relative import:
import * as Sentry from '@sentry/electron/${e}';`)}var Xe=function(t,e){return Xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Xe(t,e)};function he(t,e){Xe(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var f=function(){return f=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},f.apply(this,arguments)};function X(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function u(c){try{a(r.next(c))}catch(l){o(l)}}function d(c){try{a(r.throw(c))}catch(l){o(l)}}function a(c){c.done?s(c.value):i(c.value).then(u,d)}a((r=r.apply(t,e||[])).next())})}function Z(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(a){return function(c){return d([a,c])}}function d(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=a[0]&2?i.return:a[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,a[1])).done)return s;switch(i=0,s&&(a=[a[0]&2,s.value]),a[0]){case 0:case 1:s=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!s||a[1]>s[0]&&a[1]<s[3])){n.label=a[1];break}if(a[0]===6&&n.label<s[1]){n.label=s[1],s=a;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(a);break}s[2]&&n.ops.pop(),n.trys.pop();continue}a=e.call(t,n)}catch(c){a=[6,c],i=0}finally{r=s=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function P(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function D(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function E(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(D(arguments[e]));return t}exports.Severity=void 0;(function(t){t.Fatal="fatal",t.Error="error",t.Warning="warning",t.Log="log",t.Info="info",t.Debug="debug",t.Critical="critical"})(exports.Severity||(exports.Severity={}));function B(t){t.then(null,function(e){console.error(e)})}var Hr=!0;function y(){return Hr}function $r(){return typeof __SENTRY_BROWSER_BUNDLE__!="undefined"&&!!__SENTRY_BROWSER_BUNDLE__}function ut(){return!$r()&&Object.prototype.toString.call(typeof process!="undefined"?process:0)==="[object process]"}function qr(t,e){return t.require(e)}var zr={};function M(){return ut()?global:typeof window!="undefined"?window:typeof self!="undefined"?self:zr}var fn=Object.prototype.toString;function ct(t){switch(fn.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Q(t,Error)}}function dt(t,e){return fn.call(t)==="[object "+e+"]"}function pn(t){return dt(t,"String")}function De(t){return t===null||typeof t!="object"&&typeof t!="function"}function j(t){return dt(t,"Object")}function Yr(t){return typeof Event!="undefined"&&Q(t,Event)}function Dt(t){return typeof Element!="undefined"&&Q(t,Element)}function Wr(t){return dt(t,"RegExp")}function ve(t){return Boolean(t&&t.then&&typeof t.then=="function")}function Gr(t){return j(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function Q(t,e){try{return t instanceof e}catch{return!1}}function jt(t,e){try{for(var n=t,r=5,i=80,s=[],o=0,u=0,d=" > ",a=d.length,c=void 0;n&&o++<r&&(c=Vr(n,e),!(c==="html"||o>1&&u+s.length*a+c.length>=i));)s.push(c),u+=c.length,n=n.parentNode;return s.reverse().join(d)}catch{return"<unknown>"}}function Vr(t,e){var n=t,r=[],i,s,o,u,d;if(!n||!n.tagName)return"";r.push(n.tagName.toLowerCase());var a=e&&e.length?e.filter(function(l){return n.getAttribute(l)}).map(function(l){return[l,n.getAttribute(l)]}):null;if(a&&a.length)a.forEach(function(l){r.push("["+l[0]+'="'+l[1]+'"]')});else if(n.id&&r.push("#"+n.id),i=n.className,i&&pn(i))for(s=i.split(/\s+/),d=0;d<s.length;d++)r.push("."+s[d]);var c=["type","name","title","alt"];for(d=0;d<c.length;d++)o=c[d],u=n.getAttribute(o),u&&r.push("["+o+'="'+u+'"]');return r.join("")}var Jr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?Kr:Xr);function Kr(t,e){return t.__proto__=e,t}function Xr(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n]);return t}var S=function(t){he(e,t);function e(n){var r=this.constructor,i=t.call(this,n)||this;return i.message=n,i.name=r.prototype.constructor.name,Jr(i,r.prototype),i}return e}(Error),Zr=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Qr(t){return t==="http"||t==="https"}function lt(t,e){e===void 0&&(e=!1);var n=t.host,r=t.path,i=t.pass,s=t.port,o=t.projectId,u=t.protocol,d=t.publicKey;return u+"://"+d+(e&&i?":"+i:"")+("@"+n+(s?":"+s:"")+"/"+(r&&r+"/")+o)}function ei(t){var e=Zr.exec(t);if(!e)throw new S("Invalid Sentry Dsn: "+t);var n=D(e.slice(1),6),r=n[0],i=n[1],s=n[2],o=s===void 0?"":s,u=n[3],d=n[4],a=d===void 0?"":d,c=n[5],l="",h=c,_=h.split("/");if(_.length>1&&(l=_.slice(0,-1).join("/"),h=_.pop()),h){var b=h.match(/^\d+/);b&&(h=b[0])}return hn({host:u,pass:o,path:l,projectId:h,port:a,protocol:r,publicKey:i})}function hn(t){return"user"in t&&!("publicKey"in t)&&(t.publicKey=t.user),{user:t.publicKey||"",protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function ti(t){if(!!y()){var e=t.port,n=t.projectId,r=t.protocol,i=["protocol","publicKey","host","projectId"];if(i.forEach(function(s){if(!t[s])throw new S("Invalid Sentry Dsn: "+s+" missing")}),!n.match(/^\d+$/))throw new S("Invalid Sentry Dsn: Invalid projectId "+n);if(!Qr(r))throw new S("Invalid Sentry Dsn: Invalid protocol "+r);if(e&&isNaN(parseInt(e,10)))throw new S("Invalid Sentry Dsn: Invalid port "+e);return!0}}function _e(t){var e=typeof t=="string"?ei(t):hn(t);return ti(e),e}var ni=["fatal","error","warning","log","info","debug","critical"],ae=M(),He="Sentry Logger ",ri=["debug","info","warn","error","log","assert"];function W(t){var e=M();if(!("console"in e))return t();var n=e.console,r={};ri.forEach(function(s){s in e.console&&n[s].__sentry_original__&&(r[s]=n[s],n[s]=n[s].__sentry_original__)});var i=t();return Object.keys(r).forEach(function(s){n[s]=r[s]}),i}var ii=function(){function t(){this._enabled=!1}return t.prototype.disable=function(){this._enabled=!1},t.prototype.enable=function(){this._enabled=!0},t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!this._enabled||W(function(){var r;(r=ae.console).log.apply(r,E([He+"[Log]:"],e))})},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!this._enabled||W(function(){var r;(r=ae.console).warn.apply(r,E([He+"[Warn]:"],e))})},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!this._enabled||W(function(){var r;(r=ae.console).error.apply(r,E([He+"[Error]:"],e))})},t}(),Ze=ae.__SENTRY__||{},p=Ze.logger||new ii;y()&&(Ze.logger=p,ae.__SENTRY__=Ze);function ue(t,e){return e===void 0&&(e=0),typeof t!="string"||e===0||t.length<=e?t:t.substr(0,e)+"..."}function $e(t,e){var n=t,r=n.length;if(r<=150)return n;e>r&&(e=r);var i=Math.max(e-60,0);i<5&&(i=0);var s=Math.min(i+140,r);return s>r-5&&(s=r),s===r&&(i=Math.max(s-140,0)),n=n.slice(i,s),i>0&&(n="'{snip} "+n),s<r&&(n+=" {snip}"),n}function ft(t,e){return pn(t)?Wr(e)?e.test(t):typeof e=="string"?t.indexOf(e)!==-1:!1:!1}function z(t,e,n){if(e in t){var r=t[e],i=n(r);if(typeof i=="function")try{si(i,r)}catch{}t[e]=i}}function pt(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}function si(t,e){var n=e.prototype||{};t.prototype=e.prototype=n,pt(t,"__sentry_original__",e)}function oi(t){return t.__sentry_original__}function ai(t){return Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}function vn(t){if(ct(t)){var e=t,n={message:e.message,name:e.name,stack:e.stack};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}if(Yr(t)){var i=t,s={};s.type=i.type;try{s.target=Dt(i.target)?jt(i.target):Object.prototype.toString.call(i.target)}catch{s.target="<unknown>"}try{s.currentTarget=Dt(i.currentTarget)?jt(i.currentTarget):Object.prototype.toString.call(i.currentTarget)}catch{s.currentTarget="<unknown>"}typeof CustomEvent!="undefined"&&Q(t,CustomEvent)&&(s.detail=i.detail);for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(s[o]=i[o]);return s}return t}function ui(t,e){e===void 0&&(e=40);var n=Object.keys(vn(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return ue(n[0],e);for(var r=n.length;r>0;r--){var i=n.slice(0,r).join(", ");if(!(i.length>e))return r===n.length?i:ue(i,e)}return""}function Ie(t){var e,n;if(j(t)){var r=t,i={};try{for(var s=P(Object.keys(r)),o=s.next();!o.done;o=s.next()){var u=o.value;typeof r[u]!="undefined"&&(i[u]=Ie(r[u]))}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return i}return Array.isArray(t)?t.map(Ie):t}var ci=50;function di(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.sort(function(r,i){return r[0]-i[0]}).map(function(r){return r[1]});return function(r,i){var s,o,u,d;i===void 0&&(i=0);var a=[];try{for(var c=P(r.split(`
`).slice(i)),l=c.next();!l.done;l=c.next()){var h=l.value;try{for(var _=(u=void 0,P(n)),b=_.next();!b.done;b=_.next()){var w=b.value,x=w(h);if(x){a.push(x);break}}}catch(C){u={error:C}}finally{try{b&&!b.done&&(d=_.return)&&d.call(_)}finally{if(u)throw u.error}}}}catch(C){s={error:C}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(s)throw s.error}}return li(a)}}function li(t){if(!t.length)return[];var e=t,n=e[0].function||"",r=e[e.length-1].function||"";return(n.indexOf("captureMessage")!==-1||n.indexOf("captureException")!==-1)&&(e=e.slice(1)),r.indexOf("sentryWrapped")!==-1&&(e=e.slice(0,-1)),e.slice(0,ci).map(function(i){return f(f({},i),{filename:i.filename||e[0].filename,function:i.function||"?"})}).reverse()}var qe="<anonymous>";function fi(t){try{return!t||typeof t!="function"?qe:t.name||qe}catch{return qe}}function pi(){var t=typeof WeakSet=="function",e=t?new WeakSet:[];function n(i){if(t)return e.has(i)?!0:(e.add(i),!1);for(var s=0;s<e.length;s++){var o=e[s];if(o===i)return!0}return e.push(i),!1}function r(i){if(t)e.delete(i);else for(var s=0;s<e.length;s++)if(e[s]===i){e.splice(s,1);break}}return[n,r]}function U(){var t=M(),e=t.crypto||t.msCrypto;if(e!==void 0&&e.getRandomValues){var n=new Uint16Array(8);e.getRandomValues(n),n[3]=n[3]&4095|16384,n[4]=n[4]&16383|32768;var r=function(i){for(var s=i.toString(16);s.length<4;)s="0"+s;return s};return r(n[0])+r(n[1])+r(n[2])+r(n[3])+r(n[4])+r(n[5])+r(n[6])+r(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(i){var s=Math.random()*16|0,o=i==="x"?s:s&3|8;return o.toString(16)})}function _n(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function Y(t){var e=t.message,n=t.event_id;if(e)return e;var r=_n(t);return r?r.type&&r.value?r.type+": "+r.value:r.type||r.value||n||"<unknown>":n||"<unknown>"}function hi(t,e,n){var r=t.exception=t.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=e||""),s.type||(s.type=n||"Error")}function vi(t,e){var n=_n(t);if(!!n){var r={type:"generic",handled:!0},i=n.mechanism;if(n.mechanism=f(f(f({},r),i),e),e&&"data"in e){var s=f(f({},i&&i.data),e.data);n.mechanism.data=s}}}var _i=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;function ht(t){var e=t.match(_i)||[],n=parseInt(e[1],10),r=parseInt(e[2],10),i=parseInt(e[3],10);return{buildmetadata:e[5],major:isNaN(n)?void 0:n,minor:isNaN(r)?void 0:r,patch:isNaN(i)?void 0:i,prerelease:e[4]}}function gi(t,e,n){n===void 0&&(n=5);var r=e.lineno||0,i=t.length,s=Math.max(Math.min(i,r-1),0);e.pre_context=t.slice(Math.max(0,s-n),s).map(function(o){return $e(o,0)}),e.context_line=$e(t[Math.min(i-1,s)],e.colno||0),e.post_context=t.slice(Math.min(s+1,i),s+1+n).map(function(o){return $e(o,0)})}function Lt(t){if(t&&t.__sentry_captured__)return!0;try{pt(t,"__sentry_captured__",!0)}catch{}return!1}function F(t,e,n){e===void 0&&(e=1/0),n===void 0&&(n=1/0);try{return yn("",t,e,n)}catch{return"**non-serializable**"}}function gn(t,e,n){e===void 0&&(e=3),n===void 0&&(n=100*1024);var r=F(t,e);return Si(r)>n?gn(t,e-1,n):r}function yn(t,e,n,r,i){n===void 0&&(n=1/0),r===void 0&&(r=1/0),i===void 0&&(i=pi());var s=D(i,2),o=s[0],u=s[1];if(n===0)return yi(e);if(e!=null&&typeof e.toJSON=="function")return e.toJSON();var d=mn(e,t);if(De(d))return d;var a=vn(e),c=Array.isArray(e)?[]:{};if(o(e))return"[Circular ~]";var l=0;for(var h in a)if(!!Object.prototype.hasOwnProperty.call(a,h)){if(l>=r){c[h]="[MaxProperties ~]";break}l+=1;var _=a[h];c[h]=yn(h,_,n-1,r,i)}return u(e),c}function yi(t){if(typeof t=="string")return t;var e=Object.prototype.toString.call(t);if(e==="[object Object]")return"[Object]";if(e==="[object Array]")return"[Array]";var n=mn(t);return De(n)?n:e}function mn(t,e){return e==="domain"&&t&&typeof t=="object"&&t._events?"[Domain]":e==="domainEmitter"?"[DomainEmitter]":typeof global!="undefined"&&t===global?"[Global]":typeof window!="undefined"&&t===window?"[Window]":typeof document!="undefined"&&t===document?"[Document]":Gr(t)?"[SyntheticEvent]":typeof t=="number"&&t!==t?"[NaN]":t===void 0?"[undefined]":typeof t=="function"?"[Function: "+fi(t)+"]":typeof t=="symbol"?"["+String(t)+"]":typeof t=="bigint"?"[BigInt: "+String(t)+"]":t}function mi(t){return~-encodeURI(t).split(/%..|./).length}function Si(t){return mi(JSON.stringify(t))}var bi=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^/]+?|)(\.[^./]*|))(?:[/]*)$/;function Sn(t){var e=bi.exec(t);return e?e.slice(1):[]}function Ft(t){var e=Sn(t),n=e[0],r=e[1];return!n&&!r?".":(r&&(r=r.substr(0,r.length-1)),n+r)}function Ei(t,e){var n=Sn(t)[2];return e&&n.substr(e.length*-1)===e&&(n=n.substr(0,n.length-e.length)),n}function H(t){return new ne(function(e){e(t)})}function Qe(t){return new ne(function(e,n){n(t)})}var ne=function(){function t(e){var n=this;this._state=0,this._handlers=[],this._resolve=function(r){n._setResult(1,r)},this._reject=function(r){n._setResult(2,r)},this._setResult=function(r,i){if(n._state===0){if(ve(i)){i.then(n._resolve,n._reject);return}n._state=r,n._value=i,n._executeHandlers()}},this._executeHandlers=function(){if(n._state!==0){var r=n._handlers.slice();n._handlers=[],r.forEach(function(i){i[0]||(n._state===1&&i[1](n._value),n._state===2&&i[2](n._value),i[0]=!0)})}};try{e(this._resolve,this._reject)}catch(r){this._reject(r)}}return t.prototype.then=function(e,n){var r=this;return new t(function(i,s){r._handlers.push([!1,function(o){if(!e)i(o);else try{i(e(o))}catch(u){s(u)}},function(o){if(!n)s(o);else try{i(n(o))}catch(u){s(u)}}]),r._executeHandlers()})},t.prototype.catch=function(e){return this.then(function(n){return n},e)},t.prototype.finally=function(e){var n=this;return new t(function(r,i){var s,o;return n.then(function(u){o=!1,s=u,e&&e()},function(u){o=!0,s=u,e&&e()}).then(function(){if(o){i(s);return}r(s)})})},t}();function bn(t){var e=[];function n(){return t===void 0||e.length<t}function r(o){return e.splice(e.indexOf(o),1)[0]}function i(o){if(!n())return Qe(new S("Not adding Promise due to buffer limit reached."));var u=o();return e.indexOf(u)===-1&&e.push(u),u.then(function(){return r(u)}).then(null,function(){return r(u).then(null,function(){})}),u}function s(o){return new ne(function(u,d){var a=e.length;if(!a)return u(!0);var c=setTimeout(function(){o&&o>0&&u(!1)},o);e.forEach(function(l){H(l).then(function(){--a||(clearTimeout(c),u(!0))},d)})})}return{$:e,add:i,drain:s}}function wi(t){return ni.indexOf(t)!==-1}function xi(t){return t==="warn"?exports.Severity.Warning:wi(t)?t:exports.Severity.Log}function En(t){return t>=200&&t<300?"success":t===429?"rate_limit":t>=400&&t<500?"invalid":t>=500?"failed":"unknown"}var et={nowSeconds:function(){return Date.now()/1e3}};function Oi(){var t=M().performance;if(!(!t||!t.now)){var e=Date.now()-t.now();return{now:function(){return t.now()},timeOrigin:e}}}function Ti(){try{var t=qr(module,"perf_hooks");return t.performance}catch{return}}var ze=ut()?Ti():Oi(),Ut=ze===void 0?et:{nowSeconds:function(){return(ze.timeOrigin+ze.now())/1e3}},vt=et.nowSeconds.bind(et),tt=Ut.nowSeconds.bind(Ut),ki=tt;(function(){var t=M().performance;if(!(!t||!t.now)){var e=3600*1e3,n=t.now(),r=Date.now(),i=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,s=i<e,o=t.timing&&t.timing.navigationStart,u=typeof o=="number",d=u?Math.abs(o+n-r):e,a=d<e;return s||a?i<=d?t.timeOrigin:o:r}})();function _t(t,e){return e===void 0&&(e=[]),[t,e]}function wn(t){var e=D(t,2),n=e[0],r=e[1],i=JSON.stringify(n);return r.reduce(function(s,o){var u=D(o,2),d=u[0],a=u[1],c=De(a)?String(a):JSON.stringify(a);return s+`
`+JSON.stringify(d)+`
`+c},i)}var Ri=60*1e3;function Ni(t,e){e===void 0&&(e=Date.now());var n=parseInt(""+t,10);if(!isNaN(n))return n*1e3;var r=Date.parse(""+t);return isNaN(r)?Ri:r-e}var Bt=100,N=function(){function t(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}return t.clone=function(e){var n=new t;return e&&(n._breadcrumbs=E(e._breadcrumbs),n._tags=f({},e._tags),n._extra=f({},e._extra),n._contexts=f({},e._contexts),n._user=e._user,n._level=e._level,n._span=e._span,n._session=e._session,n._transactionName=e._transactionName,n._fingerprint=e._fingerprint,n._eventProcessors=E(e._eventProcessors),n._requestSession=e._requestSession),n},t.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},t.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},t.prototype.setUser=function(e){return this._user=e||{},this._session&&this._session.update({user:e}),this._notifyScopeListeners(),this},t.prototype.getUser=function(){return this._user},t.prototype.getRequestSession=function(){return this._requestSession},t.prototype.setRequestSession=function(e){return this._requestSession=e,this},t.prototype.setTags=function(e){return this._tags=f(f({},this._tags),e),this._notifyScopeListeners(),this},t.prototype.setTag=function(e,n){var r;return this._tags=f(f({},this._tags),(r={},r[e]=n,r)),this._notifyScopeListeners(),this},t.prototype.setExtras=function(e){return this._extra=f(f({},this._extra),e),this._notifyScopeListeners(),this},t.prototype.setExtra=function(e,n){var r;return this._extra=f(f({},this._extra),(r={},r[e]=n,r)),this._notifyScopeListeners(),this},t.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},t.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},t.prototype.setTransactionName=function(e){return this._transactionName=e,this._notifyScopeListeners(),this},t.prototype.setTransaction=function(e){return this.setTransactionName(e)},t.prototype.setContext=function(e,n){var r;return n===null?delete this._contexts[e]:this._contexts=f(f({},this._contexts),(r={},r[e]=n,r)),this._notifyScopeListeners(),this},t.prototype.setSpan=function(e){return this._span=e,this._notifyScopeListeners(),this},t.prototype.getSpan=function(){return this._span},t.prototype.getTransaction=function(){var e=this.getSpan();return e&&e.transaction},t.prototype.setSession=function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this},t.prototype.getSession=function(){return this._session},t.prototype.update=function(e){if(!e)return this;if(typeof e=="function"){var n=e(this);return n instanceof t?n:this}return e instanceof t?(this._tags=f(f({},this._tags),e._tags),this._extra=f(f({},this._extra),e._extra),this._contexts=f(f({},this._contexts),e._contexts),e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):j(e)&&(e=e,this._tags=f(f({},this._tags),e.tags),this._extra=f(f({},this._extra),e.extra),this._contexts=f(f({},this._contexts),e.contexts),e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this},t.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},t.prototype.addBreadcrumb=function(e,n){var r=typeof n=="number"?Math.min(n,Bt):Bt;if(r<=0)return this;var i=f({timestamp:vt()},e);return this._breadcrumbs=E(this._breadcrumbs,[i]).slice(-r),this._notifyScopeListeners(),this},t.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},t.prototype.applyToEvent=function(e,n){if(this._extra&&Object.keys(this._extra).length&&(e.extra=f(f({},this._extra),e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=f(f({},this._tags),e.tags)),this._user&&Object.keys(this._user).length&&(e.user=f(f({},this._user),e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=f(f({},this._contexts),e.contexts)),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts=f({trace:this._span.getTraceContext()},e.contexts);var r=this._span.transaction&&this._span.transaction.name;r&&(e.tags=f({transaction:r},e.tags))}return this._applyFingerprint(e),e.breadcrumbs=E(e.breadcrumbs||[],this._breadcrumbs),e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata=this._sdkProcessingMetadata,this._notifyEventProcessors(E(xn(),this._eventProcessors),e,n)},t.prototype.setSDKProcessingMetadata=function(e){return this._sdkProcessingMetadata=f(f({},this._sdkProcessingMetadata),e),this},t.prototype._notifyEventProcessors=function(e,n,r,i){var s=this;return i===void 0&&(i=0),new ne(function(o,u){var d=e[i];if(n===null||typeof d!="function")o(n);else{var a=d(f({},n),r);ve(a)?a.then(function(c){return s._notifyEventProcessors(e,c,r,i+1).then(o)}).then(null,u):s._notifyEventProcessors(e,a,r,i+1).then(o).then(null,u)}})},t.prototype._notifyScopeListeners=function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(function(n){n(e)}),this._notifyingListeners=!1)},t.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},t}();function xn(){var t=M();return t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.globalEventProcessors=t.__SENTRY__.globalEventProcessors||[],t.__SENTRY__.globalEventProcessors}function gt(t){xn().push(t)}var Ii=function(){function t(e){this.errors=0,this.sid=U(),this.duration=0,this.status="ok",this.init=!0,this.ignoreDuration=!1;var n=tt();this.timestamp=n,this.started=n,e&&this.update(e)}return t.prototype.update=function(e){if(e===void 0&&(e={}),e.user&&(!this.ipAddress&&e.user.ip_address&&(this.ipAddress=e.user.ip_address),!this.did&&!e.did&&(this.did=e.user.id||e.user.email||e.user.username)),this.timestamp=e.timestamp||tt(),e.ignoreDuration&&(this.ignoreDuration=e.ignoreDuration),e.sid&&(this.sid=e.sid.length===32?e.sid:U()),e.init!==void 0&&(this.init=e.init),!this.did&&e.did&&(this.did=""+e.did),typeof e.started=="number"&&(this.started=e.started),this.ignoreDuration)this.duration=void 0;else if(typeof e.duration=="number")this.duration=e.duration;else{var n=this.timestamp-this.started;this.duration=n>=0?n:0}e.release&&(this.release=e.release),e.environment&&(this.environment=e.environment),!this.ipAddress&&e.ipAddress&&(this.ipAddress=e.ipAddress),!this.userAgent&&e.userAgent&&(this.userAgent=e.userAgent),typeof e.errors=="number"&&(this.errors=e.errors),e.status&&(this.status=e.status)},t.prototype.close=function(e){e?this.update({status:e}):this.status==="ok"?this.update({status:"exited"}):this.update()},t.prototype.toJSON=function(){return Ie({sid:""+this.sid,init:this.init,started:new Date(this.started*1e3).toISOString(),timestamp:new Date(this.timestamp*1e3).toISOString(),status:this.status,errors:this.errors,did:typeof this.did=="number"||typeof this.did=="string"?""+this.did:void 0,duration:this.duration,attrs:{release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent}})},t}(),yt=4,Pi=100,je=function(){function t(e,n,r){n===void 0&&(n=new N),r===void 0&&(r=yt),this._version=r,this._stack=[{}],this.getStackTop().scope=n,e&&this.bindClient(e)}return t.prototype.isOlderThan=function(e){return this._version<e},t.prototype.bindClient=function(e){var n=this.getStackTop();n.client=e,e&&e.setupIntegrations&&e.setupIntegrations()},t.prototype.pushScope=function(){var e=N.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e},t.prototype.popScope=function(){return this.getStack().length<=1?!1:!!this.getStack().pop()},t.prototype.withScope=function(e){var n=this.pushScope();try{e(n)}finally{this.popScope()}},t.prototype.getClient=function(){return this.getStackTop().client},t.prototype.getScope=function(){return this.getStackTop().scope},t.prototype.getStack=function(){return this._stack},t.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},t.prototype.captureException=function(e,n){var r=this._lastEventId=n&&n.event_id?n.event_id:U(),i=n;if(!n){var s=void 0;try{throw new Error("Sentry syntheticException")}catch(o){s=o}i={originalException:e,syntheticException:s}}return this._invokeClient("captureException",e,f(f({},i),{event_id:r})),r},t.prototype.captureMessage=function(e,n,r){var i=this._lastEventId=r&&r.event_id?r.event_id:U(),s=r;if(!r){var o=void 0;try{throw new Error(e)}catch(u){o=u}s={originalException:e,syntheticException:o}}return this._invokeClient("captureMessage",e,n,f(f({},s),{event_id:i})),i},t.prototype.captureEvent=function(e,n){var r=n&&n.event_id?n.event_id:U();return e.type!=="transaction"&&(this._lastEventId=r),this._invokeClient("captureEvent",e,f(f({},n),{event_id:r})),r},t.prototype.lastEventId=function(){return this._lastEventId},t.prototype.addBreadcrumb=function(e,n){var r=this.getStackTop(),i=r.scope,s=r.client;if(!(!i||!s)){var o=s.getOptions&&s.getOptions()||{},u=o.beforeBreadcrumb,d=u===void 0?null:u,a=o.maxBreadcrumbs,c=a===void 0?Pi:a;if(!(c<=0)){var l=vt(),h=f({timestamp:l},e),_=d?W(function(){return d(h,n)}):h;_!==null&&i.addBreadcrumb(_,c)}}},t.prototype.setUser=function(e){var n=this.getScope();n&&n.setUser(e)},t.prototype.setTags=function(e){var n=this.getScope();n&&n.setTags(e)},t.prototype.setExtras=function(e){var n=this.getScope();n&&n.setExtras(e)},t.prototype.setTag=function(e,n){var r=this.getScope();r&&r.setTag(e,n)},t.prototype.setExtra=function(e,n){var r=this.getScope();r&&r.setExtra(e,n)},t.prototype.setContext=function(e,n){var r=this.getScope();r&&r.setContext(e,n)},t.prototype.configureScope=function(e){var n=this.getStackTop(),r=n.scope,i=n.client;r&&i&&e(r)},t.prototype.run=function(e){var n=Ht(this);try{e(this)}finally{Ht(n)}},t.prototype.getIntegration=function(e){var n=this.getClient();if(!n)return null;try{return n.getIntegration(e)}catch{return y()&&p.warn("Cannot retrieve integration "+e.id+" from the current Hub"),null}},t.prototype.startSpan=function(e){return this._callExtensionMethod("startSpan",e)},t.prototype.startTransaction=function(e,n){return this._callExtensionMethod("startTransaction",e,n)},t.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},t.prototype.captureSession=function(e){if(e===void 0&&(e=!1),e)return this.endSession();this._sendSessionUpdate()},t.prototype.endSession=function(){var e=this.getStackTop(),n=e&&e.scope,r=n&&n.getSession();r&&r.close(),this._sendSessionUpdate(),n&&n.setSession()},t.prototype.startSession=function(e){var n=this.getStackTop(),r=n.scope,i=n.client,s=i&&i.getOptions()||{},o=s.release,u=s.environment,d=M(),a=(d.navigator||{}).userAgent,c=new Ii(f(f(f({release:o,environment:u},r&&{user:r.getUser()}),a&&{userAgent:a}),e));if(r){var l=r.getSession&&r.getSession();l&&l.status==="ok"&&l.update({status:"exited"}),this.endSession(),r.setSession(c)}return c},t.prototype._sendSessionUpdate=function(){var e=this.getStackTop(),n=e.scope,r=e.client;if(!!n){var i=n.getSession&&n.getSession();i&&r&&r.captureSession&&r.captureSession(i)}},t.prototype._invokeClient=function(e){for(var n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=this.getStackTop(),o=s.scope,u=s.client;u&&u[e]&&(n=u)[e].apply(n,E(r,[o]))},t.prototype._callExtensionMethod=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=re(),s=i.__SENTRY__;if(s&&s.extensions&&typeof s.extensions[e]=="function")return s.extensions[e].apply(this,n);y()&&p.warn("Extension method "+e+" couldn't be found, doing nothing.")},t}();function re(){var t=M();return t.__SENTRY__=t.__SENTRY__||{extensions:{},hub:void 0},t}function Ht(t){var e=re(),n=A(e);return Le(e,t),n}function g(){var t=re();return(!On(t)||A(t).isOlderThan(yt))&&Le(t,new je),ut()?Ci(t):A(t)}function Ci(t){try{var e=re().__SENTRY__,n=e&&e.extensions&&e.extensions.domain&&e.extensions.domain.active;if(!n)return A(t);if(!On(n)||A(n).isOlderThan(yt)){var r=A(t).getStackTop();Le(n,new je(r.client,N.clone(r.scope)))}return A(n)}catch{return A(t)}}function On(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function A(t){return t&&t.__SENTRY__&&t.__SENTRY__.hub||(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=new je),t.__SENTRY__.hub}function Le(t,e){return t?(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=e,!0):!1}var Ai=function(){function t(e,n){var r=this;this.flushTimeout=60,this._pendingAggregates={},this._isEnabled=!0,this._transport=e,this._intervalId=setInterval(function(){return r.flush()},this.flushTimeout*1e3),this._sessionAttrs=n}return t.prototype.sendSessionAggregates=function(e){if(!this._transport.sendSession){y()&&p.warn("Dropping session because custom transport doesn't implement sendSession");return}this._transport.sendSession(e).then(null,function(n){y()&&p.error("Error while sending session:",n)})},t.prototype.flush=function(){var e=this.getSessionAggregates();e.aggregates.length!==0&&(this._pendingAggregates={},this.sendSessionAggregates(e))},t.prototype.getSessionAggregates=function(){var e=this,n=Object.keys(this._pendingAggregates).map(function(i){return e._pendingAggregates[parseInt(i)]}),r={attrs:this._sessionAttrs,aggregates:n};return Ie(r)},t.prototype.close=function(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()},t.prototype.incrementSessionStatusCount=function(){if(!!this._isEnabled){var e=g().getScope(),n=e&&e.getRequestSession();n&&n.status&&(this._incrementSessionStatusCount(n.status,new Date),e&&e.setRequestSession(void 0))}},t.prototype._incrementSessionStatusCount=function(e,n){var r=new Date(n).setSeconds(0,0);this._pendingAggregates[r]=this._pendingAggregates[r]||{};var i=this._pendingAggregates[r];switch(i.started||(i.started=new Date(r).toISOString()),e){case"errored":return i.errored=(i.errored||0)+1,i.errored;case"ok":return i.exited=(i.exited||0)+1,i.exited;default:return i.crashed=(i.crashed||0)+1,i.crashed}},t}();function R(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=g();if(r&&r[t])return r[t].apply(r,E(e));throw new Error("No hub defined or "+t+" was not found on the hub, please open a bug report.")}function Mi(t,e){var n=new Error("Sentry syntheticException");return R("captureException",t,{captureContext:e,originalException:t,syntheticException:n})}function nt(t,e){var n=new Error(t),r=typeof e=="string"?e:void 0,i=typeof e!="string"?{captureContext:e}:void 0;return R("captureMessage",t,r,f({originalException:t,syntheticException:n},i))}function Tn(t){return R("captureEvent",t)}function kn(t){R("configureScope",t)}function Pe(t){R("addBreadcrumb",t)}function Di(t,e){R("setContext",t,e)}function ji(t){R("setExtras",t)}function Li(t){R("setTags",t)}function Fi(t,e){R("setExtra",t,e)}function Ui(t,e){R("setTag",t,e)}function Bi(t){R("setUser",t)}function Hi(t){R("withScope",t)}function $i(t,e){return R("startTransaction",f({},t),e)}var Rn="7";function rt(t,e,n){return{initDsn:t,metadata:e||{},dsn:_e(t),tunnel:n}}function qi(t){var e=t.protocol?t.protocol+":":"",n=t.port?":"+t.port:"";return e+"//"+t.host+n+(t.path?"/"+t.path:"")+"/api/"}function Nn(t,e){return""+qi(t)+t.projectId+"/"+e+"/"}function In(t){return ai({sentry_key:t.publicKey,sentry_version:Rn})}function zi(t){return Nn(t,"store")}function Yi(t){return zi(t)+"?"+In(t)}function Wi(t){return Nn(t,"envelope")}function ee(t,e){return e||Wi(t)+"?"+In(t)}function Gi(t,e,n){var r=["Sentry sentry_version="+Rn];return r.push("sentry_client="+e+"/"+n),r.push("sentry_key="+t.publicKey),t.pass&&r.push("sentry_secret="+t.pass),{"Content-Type":"application/json","X-Sentry-Auth":r.join(", ")}}var $t=[];function qt(t){return t.reduce(function(e,n){return e.every(function(r){return n.name!==r.name})&&e.push(n),e},[])}function Vi(t){var e=t.defaultIntegrations&&E(t.defaultIntegrations)||[],n=t.integrations,r=E(qt(e));Array.isArray(n)?r=E(r.filter(function(o){return n.every(function(u){return u.name!==o.name})}),qt(n)):typeof n=="function"&&(r=n(r),r=Array.isArray(r)?r:[r]);var i=r.map(function(o){return o.name}),s="Debug";return i.indexOf(s)!==-1&&r.push.apply(r,E(r.splice(i.indexOf(s),1))),r}function Ji(t){$t.indexOf(t.name)===-1&&(t.setupOnce(gt,g),$t.push(t.name),y()&&p.log("Integration installed: "+t.name))}function Ki(t){var e={};return Vi(t).forEach(function(n){e[n.name]=n,Ji(n)}),pt(e,"initialized",!0),e}var zt="Not capturing exception because it's already been captured.",Xi=function(){function t(e,n){this._integrations={},this._numProcessing=0,this._backend=new e(n),this._options=n,n.dsn&&(this._dsn=_e(n.dsn))}return t.prototype.captureException=function(e,n,r){var i=this;if(Lt(e)){y()&&p.log(zt);return}var s=n&&n.event_id;return this._process(this._getBackend().eventFromException(e,n).then(function(o){return i._captureEvent(o,n,r)}).then(function(o){s=o})),s},t.prototype.captureMessage=function(e,n,r,i){var s=this,o=r&&r.event_id,u=De(e)?this._getBackend().eventFromMessage(String(e),n,r):this._getBackend().eventFromException(e,r);return this._process(u.then(function(d){return s._captureEvent(d,r,i)}).then(function(d){o=d})),o},t.prototype.captureEvent=function(e,n,r){if(n&&n.originalException&&Lt(n.originalException)){y()&&p.log(zt);return}var i=n&&n.event_id;return this._process(this._captureEvent(e,n,r).then(function(s){i=s})),i},t.prototype.captureSession=function(e){if(!this._isEnabled()){y()&&p.warn("SDK not enabled, will not capture session.");return}typeof e.release!="string"?y()&&p.warn("Discarded session because of missing or non-string release"):(this._sendSession(e),e.update({init:!1}))},t.prototype.getDsn=function(){return this._dsn},t.prototype.getOptions=function(){return this._options},t.prototype.getTransport=function(){return this._getBackend().getTransport()},t.prototype.flush=function(e){var n=this;return this._isClientDoneProcessing(e).then(function(r){return n.getTransport().close(e).then(function(i){return r&&i})})},t.prototype.close=function(e){var n=this;return this.flush(e).then(function(r){return n.getOptions().enabled=!1,r})},t.prototype.setupIntegrations=function(){this._isEnabled()&&!this._integrations.initialized&&(this._integrations=Ki(this._options))},t.prototype.getIntegration=function(e){try{return this._integrations[e.id]||null}catch{return y()&&p.warn("Cannot retrieve integration "+e.id+" from the current Client"),null}},t.prototype._updateSessionFromEvent=function(e,n){var r,i,s=!1,o=!1,u=n.exception&&n.exception.values;if(u){o=!0;try{for(var d=P(u),a=d.next();!a.done;a=d.next()){var c=a.value,l=c.mechanism;if(l&&l.handled===!1){s=!0;break}}}catch(b){r={error:b}}finally{try{a&&!a.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}}var h=e.status==="ok",_=h&&e.errors===0||h&&s;_&&(e.update(f(f({},s&&{status:"crashed"}),{errors:e.errors||Number(o||s)})),this.captureSession(e))},t.prototype._sendSession=function(e){this._getBackend().sendSession(e)},t.prototype._isClientDoneProcessing=function(e){var n=this;return new ne(function(r){var i=0,s=1,o=setInterval(function(){n._numProcessing==0?(clearInterval(o),r(!0)):(i+=s,e&&i>=e&&(clearInterval(o),r(!1)))},s)})},t.prototype._getBackend=function(){return this._backend},t.prototype._isEnabled=function(){return this.getOptions().enabled!==!1&&this._dsn!==void 0},t.prototype._prepareEvent=function(e,n,r){var i=this,s=this.getOptions(),o=s.normalizeDepth,u=o===void 0?3:o,d=s.normalizeMaxBreadth,a=d===void 0?1e3:d,c=f(f({},e),{event_id:e.event_id||(r&&r.event_id?r.event_id:U()),timestamp:e.timestamp||vt()});this._applyClientOptions(c),this._applyIntegrationsMetadata(c);var l=n;r&&r.captureContext&&(l=N.clone(l).update(r.captureContext));var h=H(c);return l&&(h=l.applyToEvent(c,r)),h.then(function(_){return _&&(_.sdkProcessingMetadata=f(f({},_.sdkProcessingMetadata),{normalizeDepth:F(u)})),typeof u=="number"&&u>0?i._normalizeEvent(_,u,a):_})},t.prototype._normalizeEvent=function(e,n,r){if(!e)return null;var i=f(f(f(f(f({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(function(s){return f(f({},s),s.data&&{data:F(s.data,n,r)})})}),e.user&&{user:F(e.user,n,r)}),e.contexts&&{contexts:F(e.contexts,n,r)}),e.extra&&{extra:F(e.extra,n,r)});return e.contexts&&e.contexts.trace&&(i.contexts.trace=e.contexts.trace),e.sdkProcessingMetadata=f(f({},e.sdkProcessingMetadata),{baseClientNormalized:!0}),i},t.prototype._applyClientOptions=function(e){var n=this.getOptions(),r=n.environment,i=n.release,s=n.dist,o=n.maxValueLength,u=o===void 0?250:o;"environment"in e||(e.environment="environment"in n?r:"production"),e.release===void 0&&i!==void 0&&(e.release=i),e.dist===void 0&&s!==void 0&&(e.dist=s),e.message&&(e.message=ue(e.message,u));var d=e.exception&&e.exception.values&&e.exception.values[0];d&&d.value&&(d.value=ue(d.value,u));var a=e.request;a&&a.url&&(a.url=ue(a.url,u))},t.prototype._applyIntegrationsMetadata=function(e){var n=Object.keys(this._integrations);n.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=E(e.sdk.integrations||[],n))},t.prototype._sendEvent=function(e){this._getBackend().sendEvent(e)},t.prototype._captureEvent=function(e,n,r){return this._processEvent(e,n,r).then(function(i){return i.event_id},function(i){y()&&p.error(i)})},t.prototype._processEvent=function(e,n,r){var i=this,s=this.getOptions(),o=s.beforeSend,u=s.sampleRate,d=this.getTransport();function a(l,h){d.recordLostEvent&&d.recordLostEvent(l,h)}if(!this._isEnabled())return Qe(new S("SDK not enabled, will not capture event."));var c=e.type==="transaction";return!c&&typeof u=="number"&&Math.random()>u?(a("sample_rate","event"),Qe(new S("Discarding event because it's not included in the random sample (sampling rate = "+u+")"))):this._prepareEvent(e,r,n).then(function(l){if(l===null)throw a("event_processor",e.type||"event"),new S("An event processor returned null, will not send event.");var h=n&&n.data&&n.data.__sentry__===!0;if(h||c||!o)return l;var _=o(l,n);return Zi(_)}).then(function(l){if(l===null)throw a("before_send",e.type||"event"),new S("`beforeSend` returned `null`, will not send event.");var h=r&&r.getSession&&r.getSession();return!c&&h&&i._updateSessionFromEvent(h,l),i._sendEvent(l),l}).then(null,function(l){throw l instanceof S?l:(i.captureException(l,{data:{__sentry__:!0},originalException:l}),new S(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: `+l))})},t.prototype._process=function(e){var n=this;this._numProcessing+=1,e.then(function(r){return n._numProcessing-=1,r},function(r){return n._numProcessing-=1,r})},t}();function Zi(t){var e="`beforeSend` method has to return `null` or a valid event.";if(ve(t))return t.then(function(n){if(!(j(n)||n===null))throw new S(e);return n},function(n){throw new S("beforeSend rejected with "+n)});if(!(j(t)||t===null))throw new S(e);return t}function mt(t){if(!(!t.metadata||!t.metadata.sdk)){var e=t.metadata.sdk,n=e.name,r=e.version;return{name:n,version:r}}}function Qi(t,e){return e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=E(t.sdk.integrations||[],e.integrations||[]),t.sdk.packages=E(t.sdk.packages||[],e.packages||[])),t}function Pn(t,e){var n=mt(e),r=f(f({sent_at:new Date().toISOString()},n&&{sdk:n}),!!e.tunnel&&{dsn:lt(e.dsn)}),i="aggregates"in t?"sessions":"session",s=[{type:i},t],o=_t(r,[s]);return[o,i]}function Cn(t,e){var n=D(Pn(t,e),2),r=n[0],i=n[1];return{body:wn(r),type:i,url:ee(e.dsn,e.tunnel)}}function es(t,e){var n=mt(e),r=t.type||"event",i=(t.sdkProcessingMetadata||{}).transactionSampling,s=i||{},o=s.method,u=s.rate,d=f(f({event_id:t.event_id,sent_at:new Date().toISOString()},n&&{sdk:n}),!!e.tunnel&&{dsn:lt(e.dsn)}),a=[{type:r,sample_rates:[{id:o,rate:u}]},t];return _t(d,[a])}function An(t,e){var n=mt(e),r=t.type||"event",i=r==="transaction"||!!e.tunnel,s=(t.sdkProcessingMetadata||{}).transactionSampling,o=s||{},u=o.method,d=o.rate;Qi(t,e.metadata.sdk),t.tags=t.tags||{},t.extra=t.extra||{},t.sdkProcessingMetadata&&t.sdkProcessingMetadata.baseClientNormalized||(t.tags.skippedNormalization=!0,t.extra.normalizeDepth=t.sdkProcessingMetadata?t.sdkProcessingMetadata.normalizeDepth:"unset"),delete t.sdkProcessingMetadata;var a;try{a=JSON.stringify(t)}catch(w){t.tags.JSONStringifyError=!0,t.extra.JSONStringifyError=w;try{a=JSON.stringify(F(t))}catch(x){var c=x;a=JSON.stringify({message:"JSON.stringify error after renormalization",extra:{message:c.message,stack:c.stack}})}}var l={body:a,type:r,url:i?ee(e.dsn,e.tunnel):Yi(e.dsn)};if(i){var h=f(f({event_id:t.event_id,sent_at:new Date().toISOString()},n&&{sdk:n}),!!e.tunnel&&{dsn:lt(e.dsn)}),_=[{type:r,sample_rates:[{id:u,rate:d}]},l.body],b=_t(h,[_]);l.body=wn(b)}return l}var ts=function(){function t(){}return t.prototype.sendEvent=function(e){return H({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:"skipped"})},t.prototype.close=function(e){return H(!0)},t}(),ns=function(){function t(e){this._options=e,this._options.dsn||y()&&p.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return t.prototype.eventFromException=function(e,n){throw new S("Backend has to implement `eventFromException` method")},t.prototype.eventFromMessage=function(e,n,r){throw new S("Backend has to implement `eventFromMessage` method")},t.prototype.sendEvent=function(e){if(this._newTransport&&this._options.dsn&&this._options._experiments&&this._options._experiments.newTransport){var n=rt(this._options.dsn,this._options._metadata,this._options.tunnel),r=es(e,n);this._newTransport.send(r).then(null,function(i){y()&&p.error("Error while sending event:",i)})}else this._transport.sendEvent(e).then(null,function(i){y()&&p.error("Error while sending event:",i)})},t.prototype.sendSession=function(e){if(!this._transport.sendSession){y()&&p.warn("Dropping session because custom transport doesn't implement sendSession");return}if(this._newTransport&&this._options.dsn&&this._options._experiments&&this._options._experiments.newTransport){var n=rt(this._options.dsn,this._options._metadata,this._options.tunnel),r=D(Pn(e,n),1),i=r[0];this._newTransport.send(i).then(null,function(s){y()&&p.error("Error while sending session:",s)})}else this._transport.sendSession(e).then(null,function(s){y()&&p.error("Error while sending session:",s)})},t.prototype.getTransport=function(){return this._transport},t.prototype._setupTransport=function(){return new ts},t}();function rs(t,e){e.debug===!0&&(y()?p.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));var n=g(),r=n.getScope();r&&r.update(e.initialScope);var i=new t(e);n.bindClient(i)}var it="6.19.2",Yt,Mn=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){Yt=Function.prototype.toString,Function.prototype.toString=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=oi(this)||this;return Yt.apply(r,e)}},t.id="FunctionToString",t}(),is=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],Dn=function(){function t(e){e===void 0&&(e={}),this._options=e,this.name=t.id}return t.prototype.setupOnce=function(e,n){e(function(r){var i=n();if(i){var s=i.getIntegration(t);if(s){var o=i.getClient(),u=o?o.getOptions():{},d=ss(s._options,u);return os(r,d)?null:r}}return r})},t.id="InboundFilters",t}();function ss(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),{allowUrls:E(t.whitelistUrls||[],t.allowUrls||[],e.whitelistUrls||[],e.allowUrls||[]),denyUrls:E(t.blacklistUrls||[],t.denyUrls||[],e.blacklistUrls||[],e.denyUrls||[]),ignoreErrors:E(t.ignoreErrors||[],e.ignoreErrors||[],is),ignoreInternal:t.ignoreInternal!==void 0?t.ignoreInternal:!0}}function os(t,e){return e.ignoreInternal&&ls(t)?(y()&&p.warn(`Event dropped due to being internal Sentry Error.
Event: `+Y(t)),!0):as(t,e.ignoreErrors)?(y()&&p.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+Y(t)),!0):us(t,e.denyUrls)?(y()&&p.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+Y(t)+`.
Url: `+Ce(t)),!0):cs(t,e.allowUrls)?!1:(y()&&p.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+Y(t)+`.
Url: `+Ce(t)),!0)}function as(t,e){return!e||!e.length?!1:ds(t).some(function(n){return e.some(function(r){return ft(n,r)})})}function us(t,e){if(!e||!e.length)return!1;var n=Ce(t);return n?e.some(function(r){return ft(n,r)}):!1}function cs(t,e){if(!e||!e.length)return!0;var n=Ce(t);return n?e.some(function(r){return ft(n,r)}):!0}function ds(t){if(t.message)return[t.message];if(t.exception)try{var e=t.exception.values&&t.exception.values[0]||{},n=e.type,r=n===void 0?"":n,i=e.value,s=i===void 0?"":i;return[""+s,r+": "+s]}catch{return y()&&p.error("Cannot extract message for event "+Y(t)),[]}return[]}function ls(t){try{return t.exception.values[0].type==="SentryError"}catch{}return!1}function Wt(t){t===void 0&&(t=[]);for(var e=t.length-1;e>=0;e--){var n=t[e];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function Ce(t){try{if(t.stacktrace)return Wt(t.stacktrace.frames);var e;try{e=t.exception.values[0].stacktrace.frames}catch{}return e?Wt(e):null}catch{return y()&&p.error("Cannot extract url for event "+Y(t)),null}}var fs=Object.freeze(Object.defineProperty({__proto__:null,FunctionToString:Mn,InboundFilters:Dn},Symbol.toStringTag,{value:"Module"}));function ps(t){if(!!t){var e=(require&&require.main&&require.main.filename&&Ft(require.main.filename)||global.process.cwd())+"/",n=Ei(t,".js"),r=Ft(t),i=r.lastIndexOf("/node_modules/");if(i>-1)return r.substr(i+14).replace(/\//g,".")+":"+n;if(i=(r+"/").lastIndexOf(e,0),i===0){var s=r.substr(e.length).replace(/\//g,".");return s&&(s+=":"),s+=n,s}return n}}var hs=/^\s*[-]{4,}$/,vs=/at (?:async )?(?:(.+?)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/,_s=function(t){var e;if(t.match(hs))return{filename:t};var n=t.match(vs);if(!!n){var r,i,s,o,u;if(n[1]){s=n[1];var d=s.lastIndexOf(".");if(s[d-1]==="."&&d--,d>0){r=s.substr(0,d),i=s.substr(d+1);var a=r.indexOf(".Module");a>0&&(s=s.substr(a+1),r=r.substr(0,a))}o=void 0}i&&(o=r,u=i),i==="<anonymous>"&&(u=void 0,s=void 0),s===void 0&&(u=u||"<anonymous>",s=o?o+"."+u:u);var c=!((e=n[2])===null||e===void 0)&&e.startsWith("file://")?n[2].substr(7):n[2],l=n[5]==="native",h=l||c&&!c.startsWith("/")&&!c.startsWith(".")&&c.indexOf(":\\")!==1,_=!h&&c!==void 0&&!c.includes("node_modules/");return{filename:c,module:ps(c),function:s,lineno:parseInt(n[3],10)||void 0,colno:parseInt(n[4],10)||void 0,in_app:_}}},gs=[90,_s];function jn(t){return di(gs)(t.stack||"",1)}function Ln(t){var e={type:t.name||t.constructor.name,value:t.message},n=jn(t);return n.length&&(e.stacktrace={frames:n}),e}function ys(t,e){var n=t,r=e&&e.data&&e.data.mechanism,i=r||{handled:!0,type:"generic"};if(!ct(t)){if(j(t)){var s="Non-Error exception captured with keys: "+ui(t);g().configureScope(function(u){u.setExtra("__serialized__",gn(t))}),n=e&&e.syntheticException||new Error(s),n.message=s}else n=e&&e.syntheticException||new Error(t),n.message=t;i.synthetic=!0}var o={exception:{values:[Ln(n)]}};return hi(o,void 0,void 0),vi(o,i),f(f({},o),{event_id:e&&e.event_id})}function ms(t,e,n,r){e===void 0&&(e=exports.Severity.Info);var i={event_id:n&&n.event_id,level:e,message:t};if(r&&n&&n.syntheticException){var s=jn(n.syntheticException);s.length&&(i.stacktrace={frames:s})}return i}var Ss="sentry.javascript.node",Ye={event:"error",transaction:"transaction",session:"session",attachment:"attachment"},St=function(){function t(e){this.options=e,this._buffer=bn(30),this._rateLimits={},this.urlParser=function(n){return new Ne.URL(n)},this._api=rt(e.dsn,e._metadata,e.tunnel)}return t.prototype.sendEvent=function(e){throw new S("Transport Class has to implement `sendEvent` method.")},t.prototype.close=function(e){return this._buffer.drain(e)},t.prototype._getProxy=function(e){var n,r,i=process.env,s=i.no_proxy,o=i.http_proxy,u=i.https_proxy,d=this.options,a=d.httpProxy,c=d.httpsProxy,l=e==="http"?a||o:c||a||u||o;if(!s)return l;var h=this._api.dsn,_=h.host,b=h.port;try{for(var w=P(s.split(",")),x=w.next();!x.done;x=w.next()){var C=x.value;if(_.endsWith(C)||(_+":"+b).endsWith(C))return}}catch(Be){n={error:Be}}finally{try{x&&!x.done&&(r=w.return)&&r.call(w)}finally{if(n)throw n.error}}return l},t.prototype._getRequestOptions=function(e){var n=f(f({},Gi(this._api.dsn,Ss,it)),this.options.headers),r=e.hostname,i=e.pathname,s=e.port,o=e.protocol,u=""+i;return f({agent:this.client,headers:n,hostname:r,method:"POST",path:u,port:s,protocol:o},this.options.caCerts&&{ca:Er.readFileSync(this.options.caCerts)})},t.prototype._disabledUntil=function(e){var n=Ye[e];return this._rateLimits[n]||this._rateLimits.all},t.prototype._isRateLimited=function(e){return this._disabledUntil(e)>new Date(Date.now())},t.prototype._handleRateLimit=function(e){var n,r,i,s,o=Date.now(),u=e["x-sentry-rate-limits"],d=e["retry-after"];if(u){try{for(var a=P(u.trim().split(",")),c=a.next();!c.done;c=a.next()){var l=c.value,h=l.split(":",2),_=parseInt(h[0],10),b=(isNaN(_)?60:_)*1e3;try{for(var w=(i=void 0,P(h[1]&&h[1].split(";")||["all"])),x=w.next();!x.done;x=w.next()){var C=x.value,Be=E(Object.keys(Ye).map(function(ie){return Ye[ie]}),["all"]);Be.includes(C)&&(this._rateLimits[C]=new Date(o+b))}}catch(ie){i={error:ie}}finally{try{x&&!x.done&&(s=w.return)&&s.call(w)}finally{if(i)throw i.error}}}}catch(ie){n={error:ie}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return!0}else if(d)return this._rateLimits.all=new Date(o+Ni(d,o)),!0;return!1},t.prototype._send=function(e,n){return X(this,void 0,void 0,function(){var r=this;return Z(this,function(i){if(!this.module)throw new S("No module available");return n&&this._isRateLimited(e.type)?[2,Promise.reject({payload:n,type:e.type,reason:"Transport for "+e.type+" requests locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429})]:[2,this._buffer.add(function(){return new Promise(function(s,o){if(!r.module)throw new S("No module available");var u=r._getRequestOptions(r.urlParser(e.url)),d=r.module.request(u,function(a){var c=a.statusCode||500,l=En(c);a.setEncoding("utf8");var h=a.headers?a.headers["retry-after"]:"";h=Array.isArray(h)?h[0]:h;var _=a.headers?a.headers["x-sentry-rate-limits"]:"";_=Array.isArray(_)?_[0]:_;var b={"x-sentry-rate-limits":_,"retry-after":h},w=r._handleRateLimit(b);if(w&&y()&&p.warn("Too many "+e.type+" requests, backing off until: "+r._disabledUntil(e.type)),l==="success")s({status:l});else{var x="HTTP Error ("+c+")";a.headers&&a.headers["x-sentry-error"]&&(x+=": "+a.headers["x-sentry-error"]),o(new S(x))}a.on("data",function(){}),a.on("end",function(){})});d.on("error",o),d.end(e.body)})})]})})},t}(),bs=function(t){he(e,t);function e(n){var r=t.call(this,n)||this;r.options=n;var i=r._getProxy("http");return r.module=Ct,r.client=i?new(require("https-proxy-agent"))(i):new Ct.Agent({keepAlive:!1,maxSockets:30,timeout:2e3}),r}return e.prototype.sendEvent=function(n){return this._send(An(n,this._api),n)},e.prototype.sendSession=function(n){return this._send(Cn(n,this._api),n)},e}(St),Es=function(t){he(e,t);function e(n){var r=t.call(this,n)||this;r.options=n;var i=r._getProxy("https");return r.module=At,r.client=i?new(require("https-proxy-agent"))(i):new At.Agent({keepAlive:!1,maxSockets:30,timeout:2e3}),r}return e.prototype.sendEvent=function(n){return this._send(An(n,this._api),n)},e.prototype.sendSession=function(n){return this._send(Cn(n,this._api),n)},e}(St),Fn=function(t){he(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.eventFromException=function(n,r){return H(ys(n,r))},e.prototype.eventFromMessage=function(n,r,i){return r===void 0&&(r=exports.Severity.Info),H(ms(n,r,i,this._options.attachStacktrace))},e.prototype._setupTransport=function(){if(!this._options.dsn)return t.prototype._setupTransport.call(this);var n=_e(this._options.dsn),r=f(f(f(f(f({},this._options.transportOptions),this._options.httpProxy&&{httpProxy:this._options.httpProxy}),this._options.httpsProxy&&{httpsProxy:this._options.httpsProxy}),this._options.caCerts&&{caCerts:this._options.caCerts}),{dsn:this._options.dsn,tunnel:this._options.tunnel,_metadata:this._options._metadata});return this._options.transport?new this._options.transport(r):n.protocol==="http"?new bs(r):new Es(r)},e}(ns),Un=function(t){he(e,t);function e(n){var r=this;return n._metadata=n._metadata||{},n._metadata.sdk=n._metadata.sdk||{name:"sentry.javascript.node",packages:[{name:"npm:@sentry/node",version:it}],version:it},r=t.call(this,Fn,n)||this,r}return e.prototype.captureException=function(n,r,i){if(this._options.autoSessionTracking&&this._sessionFlusher&&i){var s=i.getRequestSession();s&&s.status==="ok"&&(s.status="errored")}return t.prototype.captureException.call(this,n,r,i)},e.prototype.captureEvent=function(n,r,i){if(this._options.autoSessionTracking&&this._sessionFlusher&&i){var s=n.type||"exception",o=s==="exception"&&n.exception&&n.exception.values&&n.exception.values.length>0;if(o){var u=i.getRequestSession();u&&u.status==="ok"&&(u.status="errored")}}return t.prototype.captureEvent.call(this,n,r,i)},e.prototype.close=function(n){var r;return(r=this._sessionFlusher)===null||r===void 0||r.close(),t.prototype.close.call(this,n)},e.prototype.initSessionFlusher=function(){var n=this._options,r=n.release,i=n.environment;r?this._sessionFlusher=new Ai(this.getTransport(),{release:r,environment:i}):y()&&p.warn("Cannot initialise an instance of SessionFlusher if no release is provided!")},e.prototype._prepareEvent=function(n,r,i){return n.platform=n.platform||"node",this.getOptions().serverName&&(n.server_name=this.getOptions().serverName),t.prototype._prepareEvent.call(this,n,r,i)},e.prototype._captureRequestSession=function(){this._sessionFlusher?this._sessionFlusher.incrementSessionStatusCount():y()&&p.warn("Discarded request mode session because autoSessionTracking option was disabled")},e}(Xi),bt=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){var e,n;try{for(var r=P(["debug","info","warn","error","log"]),i=r.next();!i.done;i=r.next()){var s=i.value;z(console,s,ws(s))}}catch(o){e={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.id="Console",t}();function ws(t){return function(n){var r=xi(t);return function(){g().getIntegration(bt)&&g().addBreadcrumb({category:"console",level:r,message:wr.format.apply(void 0,arguments)},{input:E(arguments),level:t}),n.apply(this,arguments)}}}var Gt=ht(process.versions.node);function xs(t){var e,n=(e=g().getClient())===null||e===void 0?void 0:e.getDsn();return n?t.includes(n.host):!1}function Bn(t){var e=t.protocol||"",n=t.hostname||t.host||"",r=!t.port||t.port===80||t.port===443?"":":"+t.port,i=t.path?t.path:"/";return e+"//"+n+r+i}function Vt(t,e,n){var r,i,s;if(!t)return t;var o=D(t.split(" "),2),u=o[0],d=o[1];return e.host&&!e.protocol&&(e.protocol=(i=(r=n)===null||r===void 0?void 0:r.agent)===null||i===void 0?void 0:i.protocol,d=Bn(e)),!((s=d)===null||s===void 0)&&s.startsWith("///")&&(d=d.slice(2)),u+" "+d}function Jt(t){var e={protocol:t.protocol,hostname:typeof t.hostname=="string"&&t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:""+(t.pathname||"")+(t.search||""),href:t.href};return t.port!==""&&(e.port=Number(t.port)),(t.username||t.password)&&(e.auth=t.username+":"+t.password),e}function Os(t,e){var n,r,i,s,o,u,d,a,c,l;return typeof e[e.length-1]=="function"&&(c=e.pop()),typeof e[0]=="string"?l=Jt(new Ne.URL(e[0])):e[0]instanceof Ne.URL?l=Jt(e[0]):l=e[0],e.length===2&&(l=f(f({},l),e[1])),l.protocol===void 0&&(Gt.major&&Gt.major>8?l.protocol=((r=(n=t)===null||n===void 0?void 0:n.globalAgent)===null||r===void 0?void 0:r.protocol)||((i=l.agent)===null||i===void 0?void 0:i.protocol)||((s=l._defaultAgent)===null||s===void 0?void 0:s.protocol):l.protocol=((o=l.agent)===null||o===void 0?void 0:o.protocol)||((u=l._defaultAgent)===null||u===void 0?void 0:u.protocol)||((a=(d=t)===null||d===void 0?void 0:d.globalAgent)===null||a===void 0?void 0:a.protocol)),c?[l,c]:[l]}var Kt=ht(process.versions.node),Et=function(){function t(e){e===void 0&&(e={}),this.name=t.id,this._breadcrumbs=typeof e.breadcrumbs=="undefined"?!0:e.breadcrumbs,this._tracing=typeof e.tracing=="undefined"?!1:e.tracing}return t.prototype.setupOnce=function(){if(!(!this._breadcrumbs&&!this._tracing)){var e=Ts(this._breadcrumbs,this._tracing),n=require("http");if(z(n,"get",e),z(n,"request",e),Kt.major&&Kt.major>8){var r=require("https");z(r,"get",e),z(r,"request",e)}}},t.id="Http",t}();function Ts(t,e){return function(r){return function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];var u=this,d=Os(this,s),a=d[0],c=Bn(a);if(xs(c))return r.apply(u,d);var l,h,_=g().getScope();if(_&&e&&(h=_.getSpan(),h)){l=h.startChild({description:(a.method||"GET")+" "+c,op:"http.client"});var b=l.toTraceparent();y()&&p.log("[Tracing] Adding sentry-trace header "+b+" to outgoing request to "+c+": "),a.headers=f(f({},a.headers),{"sentry-trace":b})}return r.apply(u,d).once("response",function(w){var x=this;t&&Xt("response",c,x,w),e&&l&&(w.statusCode&&l.setHttpStatus(w.statusCode),l.description=Vt(l.description,a,x),l.finish())}).once("error",function(){var w=this;t&&Xt("error",c,w),e&&l&&(l.setHttpStatus(500),l.description=Vt(l.description,a,w),l.finish())})}}}function Xt(t,e,n,r){!g().getIntegration(Et)||g().addBreadcrumb({category:"http",data:{method:n.method,status_code:r&&r.statusCode,url:e},type:"http"},{event:t,request:n,response:r})}var ks=2e3;function st(t){console.error(t&&t.stack?t.stack:t);var e=g().getClient();e===void 0&&(y()&&p.warn("No NodeClient was defined, we are exiting the process now."),global.process.exit(1));var n=e.getOptions(),r=n&&n.shutdownTimeout&&n.shutdownTimeout>0&&n.shutdownTimeout||ks;B(e.close(r).then(function(i){i||y()&&p.warn("We reached the timeout for emptying the request buffer, still exiting now!"),global.process.exit(1)}))}var Hn=function(){function t(e){e===void 0&&(e={}),this._options=e,this.name=t.id,this.handler=this._makeErrorHandler()}return t.prototype.setupOnce=function(){global.process.on("uncaughtException",this.handler.bind(this))},t.prototype._makeErrorHandler=function(){var e=this,n=2e3,r=!1,i=!1,s=!1,o;return function(u){var d=st,a=g().getClient();if(e._options.onFatalError?d=e._options.onFatalError:a&&a.getOptions().onFatalError&&(d=a.getOptions().onFatalError),r)s?(y()&&p.warn("uncaught exception after calling fatal error shutdown callback - this is bad! forcing shutdown"),st(u)):i||(i=!0,setTimeout(function(){s||(s=!0,d(o,u))},n));else{var c=g();o=u,r=!0,c.getIntegration(t)?c.withScope(function(l){l.setLevel(exports.Severity.Fatal),c.captureException(u,{originalException:u,data:{mechanism:{handled:!1,type:"onuncaughtexception"}}}),s||(s=!0,d(u))}):s||(s=!0,d(u))}}},t.id="OnUncaughtException",t}(),$n=function(){function t(e){e===void 0&&(e={mode:"warn"}),this._options=e,this.name=t.id}return t.prototype.setupOnce=function(){global.process.on("unhandledRejection",this.sendUnhandledPromise.bind(this))},t.prototype.sendUnhandledPromise=function(e,n){var r=g();if(!r.getIntegration(t)){this._handleRejection(e);return}var i=n.domain&&n.domain.sentryContext||{};r.withScope(function(s){s.setExtra("unhandledPromiseRejection",!0),i.user&&s.setUser(i.user),i.tags&&s.setTags(i.tags),i.extra&&s.setExtras(i.extra),r.captureException(e,{originalException:n,data:{mechanism:{handled:!1,type:"onunhandledrejection"}}})}),this._handleRejection(e)},t.prototype._handleRejection=function(e){var n="This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason:";this._options.mode==="warn"?W(function(){console.warn(n),console.error(e&&e.stack?e.stack:e)}):this._options.mode==="strict"&&(W(function(){console.warn(n)}),st(e))},t.id="OnUnhandledRejection",t}(),qn={};(function(t){(function(e,n){n(t)})(yr.commonjsGlobal,function(e){const n=Symbol("newer"),r=Symbol("older");function i(a,c){typeof a!="number"&&(c=a,a=0),this.size=0,this.limit=a,this.oldest=this.newest=void 0,this._keymap=new Map,c&&(this.assign(c),a<1&&(this.limit=this.size))}e.LRUMap=i;function s(a,c){this.key=a,this.value=c,this[n]=void 0,this[r]=void 0}i.prototype._markEntryAsUsed=function(a){a!==this.newest&&(a[n]&&(a===this.oldest&&(this.oldest=a[n]),a[n][r]=a[r]),a[r]&&(a[r][n]=a[n]),a[n]=void 0,a[r]=this.newest,this.newest&&(this.newest[n]=a),this.newest=a)},i.prototype.assign=function(a){let c,l=this.limit||Number.MAX_VALUE;this._keymap.clear();let h=a[Symbol.iterator]();for(let _=h.next();!_.done;_=h.next()){let b=new s(_.value[0],_.value[1]);if(this._keymap.set(b.key,b),c?(c[n]=b,b[r]=c):this.oldest=b,c=b,l--==0)throw new Error("overflow")}this.newest=c,this.size=this._keymap.size},i.prototype.get=function(a){var c=this._keymap.get(a);if(!!c)return this._markEntryAsUsed(c),c.value},i.prototype.set=function(a,c){var l=this._keymap.get(a);return l?(l.value=c,this._markEntryAsUsed(l),this):(this._keymap.set(a,l=new s(a,c)),this.newest?(this.newest[n]=l,l[r]=this.newest):this.oldest=l,this.newest=l,++this.size,this.size>this.limit&&this.shift(),this)},i.prototype.shift=function(){var a=this.oldest;if(a)return this.oldest[n]?(this.oldest=this.oldest[n],this.oldest[r]=void 0):(this.oldest=void 0,this.newest=void 0),a[n]=a[r]=void 0,this._keymap.delete(a.key),--this.size,[a.key,a.value]},i.prototype.find=function(a){let c=this._keymap.get(a);return c?c.value:void 0},i.prototype.has=function(a){return this._keymap.has(a)},i.prototype.delete=function(a){var c=this._keymap.get(a);if(!!c)return this._keymap.delete(c.key),c[n]&&c[r]?(c[r][n]=c[n],c[n][r]=c[r]):c[n]?(c[n][r]=void 0,this.oldest=c[n]):c[r]?(c[r][n]=void 0,this.newest=c[r]):this.oldest=this.newest=void 0,this.size--,c.value},i.prototype.clear=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()};function o(a){this.entry=a}o.prototype[Symbol.iterator]=function(){return this},o.prototype.next=function(){let a=this.entry;return a?(this.entry=a[n],{done:!1,value:[a.key,a.value]}):{done:!0,value:void 0}};function u(a){this.entry=a}u.prototype[Symbol.iterator]=function(){return this},u.prototype.next=function(){let a=this.entry;return a?(this.entry=a[n],{done:!1,value:a.key}):{done:!0,value:void 0}};function d(a){this.entry=a}d.prototype[Symbol.iterator]=function(){return this},d.prototype.next=function(){let a=this.entry;return a?(this.entry=a[n],{done:!1,value:a.value}):{done:!0,value:void 0}},i.prototype.keys=function(){return new u(this.oldest)},i.prototype.values=function(){return new d(this.oldest)},i.prototype.entries=function(){return this},i.prototype[Symbol.iterator]=function(){return new o(this.oldest)},i.prototype.forEach=function(a,c){typeof c!="object"&&(c=this);let l=this.oldest;for(;l;)a.call(c,l.value,l.key,this),l=l[n]},i.prototype.toJSON=function(){for(var a=new Array(this.size),c=0,l=this.oldest;l;)a[c++]={key:l.key,value:l.value},l=l[n];return a},i.prototype.toString=function(){for(var a="",c=this.oldest;c;)a+=String(c.key)+":"+c.value,c=c[n],c&&(a+=" < ");return a}})})(qn);var Zt=new qn.LRUMap(100),Rs=7;function Ns(t){return new Promise(function(e,n){O.readFile(t,"utf8",function(r,i){r?n(r):e(i)})})}var wt=function(){function t(e){e===void 0&&(e={}),this._options=e,this.name=t.id}return Object.defineProperty(t.prototype,"_contextLines",{get:function(){var e,n;if(this._options.frameContextLines===void 0){var r=(e=g().getClient())===null||e===void 0?void 0:e.getOptions();this._options.frameContextLines=(n=r)===null||n===void 0?void 0:n.frameContextLines}return this._options.frameContextLines!==void 0?this._options.frameContextLines:Rs},enumerable:!0,configurable:!0}),t.prototype.setupOnce=function(e){var n=this;e(function(r){return n.addSourceContext(r)})},t.prototype.addSourceContext=function(e){var n,r;return X(this,void 0,void 0,function(){var i,s,o,u,d,a;return Z(this,function(c){switch(c.label){case 0:if(!(this._contextLines>0&&((n=e.exception)===null||n===void 0?void 0:n.values)))return[3,8];c.label=1;case 1:c.trys.push([1,6,7,8]),i=P(e.exception.values),s=i.next(),c.label=2;case 2:return s.done?[3,5]:(o=s.value,!((r=o.stacktrace)===null||r===void 0)&&r.frames?[4,this.addSourceContextToFrames(o.stacktrace.frames)]:[3,4]);case 3:c.sent(),c.label=4;case 4:return s=i.next(),[3,2];case 5:return[3,8];case 6:return u=c.sent(),d={error:u},[3,8];case 7:try{s&&!s.done&&(a=i.return)&&a.call(i)}finally{if(d)throw d.error}return[7];case 8:return[2,e]}})})},t.prototype.addSourceContextToFrames=function(e){return X(this,void 0,void 0,function(){var n,r,i,s,o,u,d,a,c;return Z(this,function(l){switch(l.label){case 0:n=this._contextLines,l.label=1;case 1:l.trys.push([1,6,7,8]),r=P(e),i=r.next(),l.label=2;case 2:return i.done?[3,5]:(s=i.value,s.filename&&s.context_line===void 0?[4,Is(s.filename)]:[3,4]);case 3:if(o=l.sent(),o)try{u=o.split(`
`),gi(u,s,n)}catch{}l.label=4;case 4:return i=r.next(),[3,2];case 5:return[3,8];case 6:return d=l.sent(),a={error:d},[3,8];case 7:try{i&&!i.done&&(c=r.return)&&c.call(r)}finally{if(a)throw a.error}return[7];case 8:return[2]}})})},t.id="ContextLines",t}();function Is(t){return X(this,void 0,void 0,function(){var e,n;return Z(this,function(r){switch(r.label){case 0:if(e=Zt.get(t),e!==void 0)return[2,e];n=null,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,Ns(t)];case 2:return n=r.sent(),[3,4];case 3:return r.sent(),[3,4];case 4:return Zt.set(t,n),[2,n]}})})}var Ps="cause",Cs=5,zn=function(){function t(e){e===void 0&&(e={}),this.name=t.id,this._key=e.key||Ps,this._limit=e.limit||Cs}return t.prototype.setupOnce=function(){gt(function(e,n){var r=g().getIntegration(t);if(r){var i=r._handler&&r._handler.bind(r);return typeof i=="function"?i(e,n):e}return e})},t.prototype._handler=function(e,n){var r=this;return!e.exception||!e.exception.values||!n||!Q(n.originalException,Error)?H(e):new ne(function(i){r._walkErrorTree(n.originalException,r._key).then(function(s){e&&e.exception&&e.exception.values&&(e.exception.values=E(s,e.exception.values)),i(e)}).then(null,function(){i(e)})})},t.prototype._walkErrorTree=function(e,n,r){r===void 0&&(r=[]);var i;return X(this,void 0,void 0,function(){var s,o,u=this;return Z(this,function(d){switch(d.label){case 0:return!Q(e[n],Error)||r.length+1>=this._limit?[2,Promise.resolve(r)]:(s=Ln(e[n]),o=g().getIntegration(wt),o&&((i=s.stacktrace)===null||i===void 0?void 0:i.frames)?[4,o.addSourceContextToFrames(s.stacktrace.frames)]:[3,2]);case 1:d.sent(),d.label=2;case 2:return[2,new Promise(function(a,c){u._walkErrorTree(e[n],n,E([s],r)).then(a).then(null,function(){c()})})]}})})},t.id="LinkedErrors",t}(),We;function As(){try{return require.cache?Object.keys(require.cache):[]}catch{return[]}}function Ms(){var t=require.main&&require.main.paths||[],e=As(),n={},r={};return e.forEach(function(i){var s=i,o=function(){var u=s;if(s=T.dirname(u),!(!s||u===s||r[u])){if(t.indexOf(s)<0)return o();var d=T.join(u,"package.json");if(r[u]=!0,!O.existsSync(d))return o();try{var a=JSON.parse(O.readFileSync(d,"utf8"));n[a.name]=a.version}catch{}}};o()}),n}var Ds=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(e,n){var r=this;e(function(i){return n().getIntegration(t)?f(f({},i),{modules:r._getModules()}):i})},t.prototype._getModules=function(){return We||(We=Ms()),We},t.id="Modules",t}(),js=Object.freeze(Object.defineProperty({__proto__:null,Console:bt,Http:Et,OnUncaughtException:Hn,OnUnhandledRejection:$n,LinkedErrors:zn,Modules:Ds,ContextLines:wt},Symbol.toStringTag,{value:"Module"})),Yn=[new Dn,new Mn,new wt,new bt,new Et,new Hn,new $n,new zn];function Ls(t){t===void 0&&(t={});var e,n=re(),r=((e=n.__SENTRY__)===null||e===void 0?void 0:e.integrations)||[];if(t.defaultIntegrations=t.defaultIntegrations===!1?[]:E(Array.isArray(t.defaultIntegrations)?t.defaultIntegrations:Yn,r),t.dsn===void 0&&{}.SENTRY_DSN&&(t.dsn={}.SENTRY_DSN),t.tracesSampleRate===void 0&&{}.SENTRY_TRACES_SAMPLE_RATE){var i=parseFloat({}.SENTRY_TRACES_SAMPLE_RATE);isFinite(i)&&(t.tracesSampleRate=i)}if(t.release===void 0){var s=Bs();s!==void 0?t.release=s:t.autoSessionTracking=!1}t.environment===void 0&&{}.SENTRY_ENVIRONMENT&&(t.environment={}.SENTRY_ENVIRONMENT),t.autoSessionTracking===void 0&&t.dsn!==void 0&&(t.autoSessionTracking=!0),un.active&&Le(n,g()),rs(Un,t),t.autoSessionTracking&&Hs()}function Fs(){return g().lastEventId()}function Us(t){return X(this,void 0,void 0,function(){var e;return Z(this,function(n){return e=g().getClient(),e?[2,e.flush(t)]:(y()&&p.warn("Cannot flush events. No client defined."),[2,Promise.resolve(!1)])})})}function Bs(t){if({}.SENTRY_RELEASE)return{}.SENTRY_RELEASE;var e=M();return e.SENTRY_RELEASE&&e.SENTRY_RELEASE.id?e.SENTRY_RELEASE.id:{}.GITHUB_SHA||{}.COMMIT_REF||{}.VERCEL_GIT_COMMIT_SHA||{}.VERCEL_GITHUB_COMMIT_SHA||{}.VERCEL_GITLAB_COMMIT_SHA||{}.VERCEL_BITBUCKET_COMMIT_SHA||{}.ZEIT_GITHUB_COMMIT_SHA||{}.ZEIT_GITLAB_COMMIT_SHA||{}.ZEIT_BITBUCKET_COMMIT_SHA||t}function Hs(){var t=g();t.startSession(),process.on("beforeExit",function(){var e,n=(e=t.getScope())===null||e===void 0?void 0:e.getSession(),r=["exited","crashed"];n&&!r.includes(n.status)&&t.endSession()})}var $s=f(f({},fs),js),se=re();se.__SENTRY__&&(se.__SENTRY__.extensions=se.__SENTRY__.extensions||{},se.__SENTRY__.extensions.domain=se.__SENTRY__.extensions.domain||un);const Ge=ht(process.versions.electron),k={major:Ge.major||0,minor:Ge.minor||0,patch:Ge.patch||0},qs=(()=>{const t=T.basename(process.execPath).toLowerCase();return process.platform==="win32"?t!=="electron.exe":t!=="electron"})(),Fe=(()=>v.app.isReady()?Promise.resolve():new Promise(t=>{v.app.once("ready",()=>{t()})}))();function Qt(){return k.major>=5}const zs=["clean-exit","abnormal-exit","killed","crashed","oom","launch-failed","integrity-failure"],ot=["crashed","oom"];function xt(t,e){k.major>=10||k.major===9&&k.minor>=1||k.major===8&&k.minor>=4?v.app.on("render-process-gone",(r,i,s)=>{t.includes(s.reason)&&e(i,s)}):Ot(r=>{r.on("crashed",(i,s)=>{const o=Ae()&&s?"killed":"crashed";t.includes(o)&&e(r,{reason:o})})})}function Wn(t,e){k.major>=11?v.app.on("child-process-gone",(n,r)=>{t.includes(r.reason)&&e(r)}):v.app.on("gpu-process-crashed",(n,r)=>{const i=r?"killed":"crashed";t.includes(i)&&e({type:"GPU",reason:i})})}function Ys(t){v.app.on("browser-window-created",(e,n)=>{k.major>=3?t(n):setImmediate(()=>{n.isDestroyed()||t(n)})})}function Ot(t){v.app.on("web-contents-created",(e,n)=>{k.major>=3?t(n):setImmediate(()=>{n.isDestroyed()||t(n)})})}function Gn(){return process.platform==="darwin"?!1:k.major<9}function Ws(){return k.major>=16?!0:k.major<15?!1:v.app.commandLine.hasSwitch("enable-crashpad")}function Ae(){return process.platform==="darwin"||process.platform==="win32"&&k.major>=6||process.platform==="linux"&&Ws()}function Vn(){return k.major>=9?v.app.getPath("crashDumps"):v.crashReporter.getCrashesDirectory()}let ce;function Jn(){if(ce)return;const t=ce=new Map;function e(r,i){const s=t.get(r)||{id:r};s.url=Re(i,v.app.getAppPath()),t.set(r,s)}function n(r,i){const s=t.get(r)||{id:r};s.title=i,t.set(r,s)}Ot(r=>{const i=r.id;r.on("did-navigate",(s,o)=>e(i,o)),r.on("did-navigate-in-page",(s,o)=>e(i,o)),r.on("page-title-updated",(s,o)=>n(i,o)),r.on("destroyed",()=>{setTimeout(()=>{t.delete(i)},5e3)})})}function Kn(t){return ce==null?void 0:ce.get(t)}const Gs={app:t=>!t.startsWith("remote-"),autoUpdater:()=>!0,webContents:t=>["dom-ready","context-menu","load-url","destroyed"].includes(t),browserWindow:t=>["closed","close","unresponsive","responsive","show","blur","focus","hide","maximize","minimize","restore","enter-full-screen","leave-full-screen"].includes(t),screen:()=>!0,powerMonitor:()=>!0,captureWindowTitles:!1};function Vs(t){return Object.keys(t).reduce((e,n)=>{if(n==="captureWindowTitles")e[n]=!!t[n];else{const r=t[n];Array.isArray(r)?e[n]=i=>r.includes(i):(typeof r=="function"||r===!1)&&(e[n]=r)}return e},{})}class ge{constructor(e={}){this.name=ge.id,this._options=Object.assign(Object.assign({},Gs),Vs(e))}setupOnce(){var e;const n=(e=g().getClient())===null||e===void 0?void 0:e.getOptions();Jn(),Fe.then(()=>{this._options.screen&&this._patchEventEmitter(v.screen,"screen",this._options.screen),this._options.powerMonitor&&this._patchEventEmitter(v.powerMonitor,"powerMonitor",this._options.powerMonitor)}),this._options.app&&this._patchEventEmitter(v.app,"app",this._options.app),this._options.autoUpdater&&this._patchEventEmitter(v.autoUpdater,"autoUpdater",this._options.autoUpdater),this._options.browserWindow&&Ys(r=>{var i;const s=r.webContents.id,o=((i=n==null?void 0:n.getRendererName)===null||i===void 0?void 0:i.call(n,r.webContents))||"window";this._patchEventEmitter(r,o,this._options.browserWindow,s)}),this._options.webContents&&Ot(r=>{var i;const s=r.id,o=((i=n==null?void 0:n.getRendererName)===null||i===void 0?void 0:i.call(n,r))||"renderer";this._patchEventEmitter(r,o,this._options.webContents,s)})}_patchEventEmitter(e,n,r,i){const s=e.emit.bind(e);e.emit=(o,...u)=>{if(r&&r(o)){const d={category:"electron",message:`${n}.${o}`,timestamp:new Date().getTime()/1e3,type:"ui"};if(i){const a=Kn(i);!this._options.captureWindowTitles&&(a==null?void 0:a.title)&&delete a.title,a&&(d.data=a)}Pe(d)}return s(o,...u)}}}ge.id="ElectronBreadcrumbs";function m(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function u(c){try{a(r.next(c))}catch(l){o(l)}}function d(c){try{a(r.throw(c))}catch(l){o(l)}}function a(c){c.done?s(c.value):i(c.value).then(u,d)}a((r=r.apply(t,e||[])).next())})}class te{constructor(){this.name=te.id}setupOnce(){var e;const n=(e=g().getClient())===null||e===void 0?void 0:e.getOptions();global.process.on("uncaughtException",r=>{g().getIntegration(te)&&g().withScope(s=>m(this,void 0,void 0,function*(){s.addEventProcessor(d=>m(this,void 0,void 0,function*(){return Object.assign(Object.assign({},d),{level:exports.Severity.Fatal})}));let o=r;!ct(r)&&r.stack&&(o=new Error,o.message=r.message,o.stack=r.stack,o.name=r.name);const u=g().getClient();if(u.captureException(o,{originalException:r},g().getScope()),yield u.flush(u.getOptions().shutdownTimeout||2e3),n!=null&&n.onFatalError)n.onFatalError(r);else if(global.process.listenerCount("uncaughtException")<=2){console.error("Uncaught Exception:"),console.error(r);const d=r.stack,c=`Uncaught Exception:
${d!==void 0?d:`${r.name}: ${r.message}`}`;v.dialog.showErrorBox("A JavaScript error occurred in the main process",c)}}))})}}te.id="OnUncaughtException";const Tt=T.join(v.app.getPath("userData"),"sentry"),Js=L.promisify(O.writeFile),kt=L.promisify(O.readFile);L.promisify(O.mkdir);const Ks=L.promisify(O.stat),le=L.promisify(O.unlink),Rt=L.promisify(O.readdir);L.promisify(O.rename);function Xn(t){const e=T.resolve(t);try{O.mkdirSync(e,511)}catch(n){const r=n;if(r&&r.code==="ENOENT")Xn(T.dirname(e)),O.mkdirSync(e,511);else try{if(!O.statSync(e).isDirectory())throw n}catch{throw n}}}const en="3.0.7",Xs="sentry.javascript.electron",Zs={aix:"IBM AIX",freebsd:"FreeBSD",openbsd:"OpenBSD",sunos:"SunOS",win32:"Windows"},Qs=[{name:"fedora-release",distros:["Fedora"]},{name:"redhat-release",distros:["Red Hat Linux","Centos"]},{name:"redhat_version",distros:["Red Hat Linux"]},{name:"SuSE-release",distros:["SUSE Linux"]},{name:"lsb-release",distros:["Ubuntu Linux","Arch Linux"]},{name:"debian_version",distros:["Debian"]},{name:"debian_release",distros:["Debian"]},{name:"arch-release",distros:["Arch Linux"]},{name:"gentoo-release",distros:["Gentoo Linux"]},{name:"novell-release",distros:["SUSE Linux"]},{name:"alpine-release",distros:["Alpine Linux"]}],eo={alpine:t=>t,arch:t=>I(/distrib_release=(.*)/,t),centos:t=>I(/release ([^ ]+)/,t),debian:t=>t,fedora:t=>I(/release (..)/,t),mint:t=>I(/distrib_release=(.*)/,t),red:t=>I(/release ([^ ]+)/,t),suse:t=>I(/VERSION = (.*)\n/,t),ubuntu:t=>I(/distrib_release=(.*)/,t)};function I(t,e){const n=t.exec(e);return n?n[1]:void 0}function to(){return m(this,void 0,void 0,function*(){const t={kernel_version:G.release(),name:"Mac OS X",version:`10.${Number(G.release().split(".")[0])-4}`};try{const e=yield new Promise((n,r)=>{xr.execFile("/usr/bin/sw_vers",(i,s)=>{if(i){r(i);return}n(s)})});t.name=I(/^ProductName:\s+(.*)$/m,e),t.version=I(/^ProductVersion:\s+(.*)$/m,e),t.build=I(/^BuildVersion:\s+(.*)$/m,e)}catch{}return t})}function tn(t){return t.split(" ")[0].toLowerCase()}function no(){return m(this,void 0,void 0,function*(){const t={kernel_version:G.release(),name:"Linux"};try{const e=yield Rt("/etc"),n=Qs.find(u=>e.includes(u.name));if(!n)return t;const r=T.join("/etc",n.name),i=(yield kt(r,{encoding:"utf-8"})).toLowerCase(),{distros:s}=n;t.name=s.find(u=>i.indexOf(tn(u))>=0)||s[0];const o=tn(t.name);t.version=eo[o](i)}catch{}return t})}function ro(){return m(this,void 0,void 0,function*(){const t=G.platform();switch(t){case"darwin":return to();case"linux":return no();default:return{name:Zs[t]||t,version:G.release()}}})}function Zn(){return{name:Xs,packages:[{name:"npm:@sentry/electron",version:en}],version:en}}function io(){const t={app_name:v.app.name||v.app.getName(),app_version:v.app.getVersion(),app_start_time:new Date(Date.now()-process.uptime()*1e3).toISOString()};return process.mas&&(t.build_type="app-store"),process.windowsStore&&(t.build_type="windows-store"),t}function so(){return m(this,void 0,void 0,function*(){return{app:io(),os:yield ro(),browser:{name:"Chrome"},chrome:{name:"Chrome",type:"runtime",version:process.versions.chrome},device:{arch:process.arch,family:"Desktop"},node:{name:"Node",type:"runtime",version:process.versions.node},runtime:{name:"Electron",version:process.versions.electron}}})}function Qn(){return`${(v.app.name||v.app.getName()).replace(/\W/g,"-")}@${v.app.getVersion()}`}function er(){return qs?"production":"development"}function oo(t){return m(this,void 0,void 0,function*(){return{sdk:Zn(),contexts:yield so(),environment:er(),release:t||Qn(),user:{ip_address:"{{auto}}"},tags:{"event.origin":"electron","event.environment":"javascript","event.process":"browser",event_type:"javascript"}}})}let Ve;function Me(t){return m(this,void 0,void 0,function*(){return Ve||(Ve=oo(t)),yield Ve})}class ye{constructor(){this.name=ye.id}setupOnce(e){var n;const r=(n=g().getClient())===null||n===void 0?void 0:n.getOptions();e(i=>m(this,void 0,void 0,function*(){const s=cn(i,v.app.getAppPath()),o=yield Me(r==null?void 0:r.release);return K(o,s)}))}}ye.id="MainContext";const ao=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.*\d{0,10}Z$/;function uo(t,e){return typeof e=="string"&&ao.test(e)?new Date(e):e}class Nt{constructor(e,n,r){this._path=T.join(e,`${n}.json`),this._initial=r,this._flushing=!1}set(e,n=!1){this._data=e,this._flushing||(this._flushing=!0,n?this._flush():setImmediate(()=>{this._flush()}))}update(e){this.set(e(this.get()))}get(){if(this._data===void 0)try{this._data=O.existsSync(this._path)?JSON.parse(O.readFileSync(this._path,"utf8"),uo):this._initial}catch{this._data=this._initial}return this._data}clear(){this.set(this._initial)}getModifiedDate(){var e;try{return(e=O.statSync(this._path))===null||e===void 0?void 0:e.mtime}catch{return}}_flush(){try{this._data===void 0?O.unlinkSync(this._path):(Xn(T.dirname(this._path)),O.writeFileSync(this._path,JSON.stringify(this._data)))}catch(e){p.warn("Failed to flush store",e)}finally{this._flushing=!1}}}const tr=6e4,fe=new Nt(Tt,"session",void 0);let q=fe.get();const nn=fe.getModifiedDate();let pe;function co(){const t=g();fe.set(t.startSession()),pe=setInterval(()=>{var e;const n=(e=t.getScope())===null||e===void 0?void 0:e.getSession();n&&n.status==="ok"&&fe.set(n)},tr)}function lo(){var t;return m(this,void 0,void 0,function*(){pe&&clearInterval(pe);const e=g(),n=(t=e.getScope())===null||t===void 0?void 0:t.getSession();n?n.status==="ok"?(p.log("Ending session"),e.endSession()):p.log("Session was already ended"):p.log("No session"),fe.set(void 0,!0),yield Us()})}function fo(t){if(!t||!nn)return!1;const e=nn.getTime(),n=t.getTime(),r=e+tr,i=e-2e3;return n>i&&n<r}function nr(t){return m(this,void 0,void 0,function*(){if(q){if(q.status!=="ok"){q=void 0;return}const e=t?"crashed":"abnormal";p.log(`Found previous ${e} session`),yield g().getClient()._getBackend().getTransport().sendSession(Object.assign(Object.assign({},q),{status:e,errors:(q.errors||0)+1})),q=void 0}})}function at(){var t;pe&&clearInterval(pe),p.log("Session Crashed");const e=g(),n=(t=e.getScope())===null||t===void 0?void 0:t.getSession();if(!n){p.log("No session to update");return}n.status==="ok"?(p.log("Setting session as crashed"),n.update({status:"crashed",errors:n.errors+=1})):p.log("Session already ended"),e.captureSession()}const po=30;class rr{constructor(e,n){if(this._options=e,this._transport=n,this._knownPaths=[],!e.dsn)throw new S("Attempted to enable Electron native crash reporter but no DSN was supplied");this._dsn=_e(e.dsn)}uploadMinidump(e){return m(this,void 0,void 0,function*(){if(typeof this._transport.sendRequest!="function"){p.warn("Your transport doesn't implement sendRequest"),p.warn("Skipping sending minidump");return}if(this._options.beforeSend&&e.event){const r=this._options.beforeSend(e.event);(yield ve(r)?r.then(s=>s):Promise.resolve(r))===null&&(p.warn("`beforeSend` returned `null`, will not send minidump."),e.event=null)}const n=this._transport;try{if(e.event&&!n.isRateLimited("event")){p.log("Sending minidump",e.path);const r=yield this._toMinidumpRequest(n,e.event,e.path);yield n.sendRequest(r)}try{yield le(e.path),p.log("Deleted minidump",e.path)}catch(r){p.warn("Could not delete",e.path,r)}this._knownPaths.splice(this._knownPaths.indexOf(e.path),1)}catch(r){p.warn("Failed to upload minidump",r)}})}getNewMinidumps(){return m(this,void 0,void 0,function*(){const e=yield this._getMinidumpPaths();p.log(`Found ${e.length} minidumps`);const n=new Date().getTime()-po*24*3600*1e3;return this._filterAsync(e,r=>m(this,void 0,void 0,function*(){if(this._knownPaths.indexOf(r)>=0)return!1;if(this._knownPaths.push(r),(yield Ks(r)).birthtimeMs<n){try{yield le(r)}catch{p.warn("Could not delete",r)}return this._knownPaths.splice(this._knownPaths.indexOf(r),1),!1}return!0}))})}_filterAsync(e,n,r){return m(this,void 0,void 0,function*(){const i=yield Promise.all(e.map(n,r));return e.filter((s,o)=>i[o])})}_toMinidumpRequest(e,n,r){var i;return m(this,void 0,void 0,function*(){const s=JSON.stringify({event_id:n.event_id,sent_at:new Date(ki()*1e3).toISOString()});e.isRateLimited("attachment")&&(n.message="Ratelimited - Minidump Event");const o=JSON.stringify({content_type:"application/json",type:"event"}),u=JSON.stringify(n);let d=Buffer.from(`${s}
${o}
${u}
`);if(e.isRateLimited("attachment"))p.warn("Will not add minidump to request since they are rate limited.");else{let a=yield kt(r);a=(yield(i=this._preProcessFile)===null||i===void 0?void 0:i.call(this,a))||a;const c=JSON.stringify({attachment_type:"event.minidump",length:a.length,type:"attachment",filename:T.basename(r)});d=Buffer.concat([d,Buffer.from(`${c}
`),a,Buffer.from(`
`)])}return{url:ee(this._dsn),body:d,type:"event"}})}}class ho extends rr{constructor(e,n){super(e,n),this._crashesDirectory=Vn()}_getMinidumpPaths(){return m(this,void 0,void 0,function*(){const e=yield Rt(this._crashesDirectory);return Promise.all(e.filter(n=>n.endsWith(".txt")&&!n.endsWith("log.txt")).map(n=>m(this,void 0,void 0,function*(){const r=T.join(this._crashesDirectory,n);try{yield le(r)}catch{p.warn("Could not delete",r)}}))),e.filter(n=>n.endsWith(".dmp")).map(n=>T.join(this._crashesDirectory,n))})}_preProcessFile(e){const n=e.lastIndexOf("Content-Type: application/octet-stream");if(n>0){const r=e.indexOf("MDMP",n),i=e.lastIndexOf("----------------------------");if(r>0&&i>0&&i>r)return e.slice(r,i)}}}class vo extends rr{constructor(e,n){super(e,n),this._crashesDirectory=Vn(),this._crashpadSubDirectory=process.platform==="win32"?"reports":"completed"}_getMinidumpPaths(){return m(this,void 0,void 0,function*(){B(this._deleteCrashpadMetadataFile());const e=T.join(this._crashesDirectory,this._crashpadSubDirectory);return(yield Rt(e)).filter(r=>r.endsWith(".dmp")).map(r=>T.join(e,r))})}_preProcessFile(e){return e}_deleteCrashpadMetadataFile(e=100){return m(this,void 0,void 0,function*(){if(e>2e3)return;const n=T.join(this._crashesDirectory,"metadata");try{yield le(n),p.log("Deleted Crashpad metadata file",n)}catch(r){r.code&&r.code=="EBUSY"&&setTimeout(()=>m(this,void 0,void 0,function*(){yield this._deleteCrashpadMetadataFile(e*2)}),e)}})}}class me{constructor(){this.name=me.id}setupOnce(){if(process.mas)return;this._startCrashReporter(),this._scopeStore=new Nt(Tt,"scope_v2",new N),this._scopeLastRun=this._scopeStore.get(),this._setupScopeListener();const e=g().getClient(),n=e==null?void 0:e.getOptions();if(!(n!=null&&n.dsn))throw new S("Attempted to enable Electron native crash reporter but no DSN was supplied");Jn();const r=e._getBackend().getTransport();this._uploader=Ae()?new vo(n,r):new ho(n,r),xt(ot,(i,s)=>this._sendRendererCrash(n,i,s)),Wn(ot,i=>this._sendChildProcessCrash(n,i)),B(this._sendNativeCrashes(n,{level:exports.Severity.Fatal,platform:"native",tags:{"event.environment":"native","event.process":"browser",event_type:"native"}}).then(i=>nr(i)))}_startCrashReporter(){p.log("Starting Electron crashReporter"),v.crashReporter.start({companyName:"",ignoreSystemCrashHandler:!0,productName:v.app.name||v.app.getName(),submitURL:"https://f.a.k/e",uploadToServer:!1,compress:!0})}_sendRendererCrash(e,n,r){var i;return m(this,void 0,void 0,function*(){const{getRendererName:s,release:o}=e,u=(s==null?void 0:s(n))||"renderer";p.log(`'${u}' process '${r.reason}'`);const d=K(yield Me(o),{contexts:{electron:{crashed_url:((i=Kn(n.id))===null||i===void 0?void 0:i.url)||"unknown",details:r}},level:exports.Severity.Fatal,platform:"native",tags:{"event.environment":"native","event.process":u,event_type:"native"}});(yield this._sendNativeCrashes(e,d))&&at()})}_sendChildProcessCrash(e,n){return m(this,void 0,void 0,function*(){p.log(`${n.type} process has ${n.reason}`);const r=K(yield Me(e.release),{contexts:{electron:{details:n}},level:exports.Severity.Fatal,platform:"native",tags:{"event.environment":"native","event.process":n.type,event_type:"native"}});(yield this._sendNativeCrashes(e,r))&&at()})}_setupScopeListener(){const e=g().getScope();e&&e.addScopeListener(n=>{var r;const i=N.clone(n);i._eventProcessors=[],i._scopeListeners=[],(r=this._scopeStore)===null||r===void 0||r.set(i)})}_sendNativeCrashes(e,n){return m(this,void 0,void 0,function*(){const r=this._uploader;if(r===void 0)throw new S("Invariant violation: Native crashes not enabled");try{const i=yield r.getNewMinidumps();if(i.length>0){const s=N.clone(g().getScope());let u=yield N.clone(this._scopeLastRun).applyToEvent(n);if(u){u=yield s.applyToEvent(u);const{beforeSend:d,sampleRate:a}=e;if(typeof a=="number"&&Math.random()>a)return p.warn(`Discarding event because it's not included in the random sample (sampling rate = ${a})`),!0;if(u&&d){const c=yield this._ensureBeforeSendRv(d(n));if(c===null)return p.warn("`beforeSend` returned `null`, will not send event."),!0;u=c}i.forEach(c=>{B(r.uploadMinidump({path:c,event:u||{}}))})}return this._scopeLastRun=void 0,!0}}catch{p.error("Error while sending native crash.")}return!1})}_ensureBeforeSendRv(e){const n="`beforeSend` method has to return `null` or a valid event.";if(ve(e))return e.then(r=>{if(!(j(r)||r===null))throw new S(n);return r},r=>{throw new S(`beforeSend rejected with ${r}`)});if(!(j(e)||e===null))throw new S(n);return e}}me.id="SentryMinidump";function Je(t){return t!=null&&Object.keys(t).length>0}function _o(t){const e=g().getScope();return e?Object.assign(Object.assign(Object.assign({release:t.release,environment:t.environment},Je(e._user)&&{user:e._user}),Je(e._tags)&&{tags:e._tags}),Je(e._extra)&&{extra:e._extra}):{}}function go(t){const{host:e,path:n,projectId:r,port:i,protocol:s,user:o}=_e(t);return`${s}://${e}${i!==""?`:${i}`:""}${n!==""?`/${n}`:""}/api/${r}/minidump/?sentry_key=${o}`}class Ue{constructor(){this.name=Ue.id,this._updateEpoch=0}setupOnce(){var e,n;if(process.mas)return;if(Gn())throw new S(`The '${this.name}' integration is only supported with Electron >= v9`);const r=(e=g().getClient())===null||e===void 0?void 0:e.getOptions();if(!(r!=null&&r.dsn))throw new S("Attempted to enable Electron native crash reporter but no DSN was supplied");this._customRelease=r.release,this._startCrashReporter(r),xt(ot,(s,o)=>{at()}),Ae()&&this._setupScopeListener();const i=fo((n=v.crashReporter.getLastCrashReport())===null||n===void 0?void 0:n.date);B(nr(i))}_startCrashReporter(e){const n=Ae()?{sentry___initialScope:JSON.stringify(_o(e))}:void 0;p.log("Starting Electron crashReporter"),v.crashReporter.start({companyName:"",ignoreSystemCrashHandler:!0,productName:v.app.name||v.app.getName(),submitURL:go(e.dsn||""),uploadToServer:!0,compress:!0,globalExtra:n})}_setupScopeListener(){const e=g().getScope();e&&e.addScopeListener(n=>{const r=N.clone(n);r._eventProcessors=[],r._scopeListeners=[],this._updateExtraParams(r)})}_updateExtraParams(e){this._updateEpoch+=1;const n=this._updateEpoch;B(this._getNativeUploaderEvent(e).then(r=>{if(n!==this._updateEpoch)return;const i=this._getNativeUploaderExtraParams(r);for(const s of Object.keys(i))v.crashReporter.addExtraParameter(s,i[s])}))}_getNativeUploaderEvent(e){return m(this,void 0,void 0,function*(){const n=K(yield Me(this._customRelease),{level:exports.Severity.Fatal,platform:"native",tags:{"event.environment":"native",event_type:"native"}});return yield e.applyToEvent(n),cn(n,v.app.getAppPath())})}_getNativeUploaderExtraParams(e){let r=Buffer.from(JSON.stringify(e));const i=[];for(;r.length;){let s=r.lastIndexOf(34,20301);s<0&&(s=r.lastIndexOf(32,20300+1)),s<0&&(s=r.indexOf(34,20300)),s<0&&(s=r.indexOf(32,20300)),s<0&&(s=20300),i.push(r.slice(0,s+1).toString()),r=r.slice(s+1)}return i.reduce((s,o,u)=>(s[`sentry__${u+1}`]=o,s),{})}}Ue.id="ElectronMinidump";class Se{constructor(){this.name=Se.id}setupOnce(){var e;const n=(e=g().getClient())===null||e===void 0?void 0:e.getOptions();(n.ipcMode&exports.IPCMode.Classic)!=0&&v.app.once("ready",()=>{this._addPreloadToSessions(n)})}_addPreloadToSessions(e){let n;try{n=Gn()?require.resolve("../../preload/legacy.js"):require.resolve("../../preload/j.js")}catch{}if(n&&typeof n=="string"&&O.existsSync(n))for(const r of e.getSessions()){const i=r.getPreloads();r.setPreloads([n,...i])}else p.log("The preload script could not be injected automatically. This is most likely caused by bundling of the main process")}}Se.id="PreloadInjection";class be{constructor(){this.name=be.id,this._exitHandler=e=>m(this,void 0,void 0,function*(){if(!e.defaultPrevented){p.log("[MainProcessSession] Exit Handler"),e.preventDefault();try{yield lo()}catch(n){p.warn("[MainProcessSession] Error ending session:",n)}v.app.exit()}})}setupOnce(){co(),this._ensureExitHandlerLast(),v.app.on("before-quit",()=>{this._ensureExitHandlerLast()})}_ensureExitHandlerLast(){v.app.removeListener("will-quit",this._exitHandler),v.app.on("will-quit",this._exitHandler)}}be.id="MainProcessSession";const yo={cpu:!0,screen:!0,memory:!0,language:!0};class Ee{constructor(e={}){this.name=Ee.id,this._lazyDeviceContext={},this._options=Object.assign(Object.assign({},yo),e)}setupOnce(e){e(n=>m(this,void 0,void 0,function*(){return this._addAdditionalContext(n)})),Fe.then(()=>{const{language:n,screen:r}=this._options;n&&(this._lazyDeviceContext.language=v.app.getLocale()),r&&(this._setPrimaryDisplayInfo(),v.screen.on("display-metrics-changed",()=>{this._setPrimaryDisplayInfo()}))})}_addAdditionalContext(e){const n=this._lazyDeviceContext,{memory:r,cpu:i}=this._options;if(r){const{total:s,free:o}=process.getSystemMemoryInfo();n.memory_size=s*1024,n.free_memory=o*1024}if(i){const s=G.cpus();if(s&&s.length){const o=s[0];n.processor_count=s.length,n.cpu_description=o.model,n.processor_frequency=o.speed,v.app.runningUnderARM64Translation&&(n.machine_arch="arm64")}}return K(e,{contexts:{device:n}})}_setPrimaryDisplayInfo(){const e=v.screen.getPrimaryDisplay(),n=Math.floor(e.size.width*e.scaleFactor),r=Math.floor(e.size.height*e.scaleFactor);this._lazyDeviceContext.screen_density=e.scaleFactor,this._lazyDeviceContext.screen_resolution=`${n}x${r}`}}Ee.id="AdditionalContext";const mo={breadcrumbs:!0,tracing:(t,e)=>!0,tracingOrigins:(t,e)=>!0};function So(t){return Object.keys(t).reduce((e,n)=>((typeof t[n]=="function"||t[n]===!1)&&(e[n]=t[n]),e),{})}class we{constructor(e={}){this.name=we.id,this._options=Object.assign(Object.assign({},mo),So(e))}setupOnce(){(this._options.breadcrumbs||this._options.tracing)&&z(v.net,"request",Eo(this._options))}}we.id="Net";function bo(t){const{method:e,options:n}=typeof t=="string"?{method:"GET",options:ke.parse(t)}:{method:(t.method||"GET").toUpperCase(),options:t};let r="url"in n?n.url:void 0;if(!r){const i={};i.protocol=n.protocol||"http:",n.host?i.host=n.host:(n.hostname?i.hostname=n.hostname:i.hostname="localhost",n.port&&(i.port=n.port));const s=ke.parse(n.path||"/");i.pathname=s.pathname,i.search=s.search,i.hash=s.hash,r=ke.format(i)}return{method:e,url:r}}function Eo(t){return function(n){return function(i){const s=this,{url:o,method:u}=bo(i),d=n.apply(s,[i]);if(o.match(/sentry_key/)||d.getHeader("x-sentry-auth"))return d;let a;const c=g().getScope();if(c&&t.tracing&&t.tracing(u,o)){const l=c.getSpan();l&&(a=l.startChild({description:`${u} ${o}`,op:"http.client"}),t.tracingOrigins&&t.tracingOrigins(u,o)&&d.setHeader("sentry-trace",a.toTraceparent()))}return d.once("response",function(l){const h=this;t.breadcrumbs&&rn("response",u,o,h,l),a&&(l.statusCode&&a.setHttpStatus(l.statusCode),a.finish())}).once("error",function(l){const h=this;t.breadcrumbs&&rn("error",u,o,h,void 0),a&&(a.setHttpStatus(500),a.finish())})}}}function rn(t,e,n,r,i){g().addBreadcrumb({type:"http",category:"electron.net",data:{url:n,method:e,status_code:i&&i.statusCode}},{event:t,request:r,response:i})}const sn={breadcrumbs:zs,events:["abnormal-exit","launch-failed","integrity-failure"]};function Te(t,e){const n=`'${e}' process exited with '${t}'`;switch(t){case"abnormal-exit":case"killed":return{message:n,level:exports.Severity.Warning};case"crashed":case"oom":case"launch-failed":case"integrity-failure":return{message:n,level:exports.Severity.Critical};default:return{message:n,level:exports.Severity.Debug}}}class xe{constructor(e={}){this.name=xe.id;const{breadcrumbs:n,events:r}=e;this._options={breadcrumbs:Array.isArray(n)?n:n==!1?[]:sn.breadcrumbs,events:Array.isArray(r)?r:r==!1?[]:sn.events}}setupOnce(){var e;const{breadcrumbs:n,events:r}=this._options,i=Array.from(new Set([...n,...r]));if(i.length>0){const s=(e=g().getClient())===null||e===void 0?void 0:e.getOptions();Wn(i,o=>{const{reason:u}=o;if(r.includes(u)){const{message:d,level:a}=Te(o.reason,o.type);nt(d,{level:a,tags:{"event.process":o.type}})}n.includes(u)&&Pe(Object.assign(Object.assign({type:"process",category:"child-process"},Te(o.reason,o.type)),{data:o}))}),xt(i,(o,u)=>{var d;const{reason:a}=u,c=((d=s==null?void 0:s.getRendererName)===null||d===void 0?void 0:d.call(s,o))||"renderer";if(r.includes(a)){const{message:l,level:h}=Te(u.reason,c);nt(l,h)}n.includes(a)&&Pe(Object.assign(Object.assign({type:"process",category:"child-process"},Te(u.reason,c)),{data:u}))})}}}xe.id="ChildProcess";var wo=Object.freeze(Object.defineProperty({__proto__:null,ElectronBreadcrumbs:ge,OnUncaughtException:te,MainContext:ye,SentryMinidump:me,ElectronMinidump:Ue,PreloadInjection:Se,MainProcessSession:be,AdditionalContext:Ee,Net:we,ChildProcess:xe},Symbol.toStringTag,{value:"Module"}));const xo=1024*32;class oe extends Error{constructor(e,n){super(n),this.status=e}}function Oo(t){return new Sr.Readable({read(){this.push(t),this.push(null)}})}class ir extends St{constructor(e){super(e),this.options=e,this._buffer=bn(30)}sendEvent(e){return m(this,void 0,void 0,function*(){const n=JSON.stringify({event_id:e.event_id,sent_at:new Date().toISOString()}),r=e.type||"event",i=JSON.stringify({type:r});if(this._isRateLimited(r))throw new oe("rate_limit",`Transport locked till ${JSON.stringify(this._rateLimits,null,2)} due to too many requests.`);delete e.sdkProcessingMetadata;const s=JSON.stringify(e),o=Buffer.from(`${n}
${i}
${s}
`);return this.sendRequest({url:ee(this._api.dsn),body:o,type:r})})}sendSession(e){const{name:n,version:r}=Zn(),i=JSON.stringify({sent_at:new Date().toISOString(),sdk:{name:n,version:r}}),s="aggregates"in e?"sessions":"session",o=JSON.stringify({type:s}),u=JSON.stringify(e),d=Buffer.from(`${i}
${o}
${u}
`);return this.sendRequest({url:ee(this._api.dsn),body:d,type:s})}isRateLimited(e){return this._isRateLimited(e)}sendRequest(e){return m(this,void 0,void 0,function*(){if(p.log(`Sending '${e.type}' request`),this._isRateLimited(e.type))throw new oe("rate_limit",`Transport for ${e.type} requests locked till ${this._disabledUntil(e.type)} due to too many requests.`);const n=this._getRequestOptions(new ke.URL(e.url));n.headers=Object.assign(Object.assign({},n.headers),{"Content-Type":"application/x-sentry-envelope"});let r=Oo(e.body);return e.body.length>xo&&(n.headers["Content-Encoding"]="gzip",r=r.pipe(br.createGzip())),yield Fe,this._buffer.add(()=>new Promise((i,s)=>{const o=v.net.request(n);o.on("error",s),o.on("response",u=>{u.on("error",s);const d=En(u.statusCode);if(d==="success")i({status:d});else{if(d==="rate_limit"){let a=u.headers?u.headers["retry-after"]:"";a=Array.isArray(a)?a[0]:a;let c=u.headers?u.headers["x-sentry-rate-limits"]:"";c=Array.isArray(c)?c[0]:c,this._handleRateLimit({"x-sentry-rate-limits":c,"retry-after":a})&&p.warn(`Too many requests, backing off until: ${this._disabledUntil(e.type)}`)}if(u.headers&&u.headers["x-sentry-error"]){let a=u.headers["x-sentry-error"];Array.isArray(a)&&(a=a.join(", ")),s(new oe(d,`HTTP Error (${u.statusCode}): ${a}`))}else s(new oe(d,`HTTP Error (${u.statusCode})`))}u.on("data",()=>{}),u.on("end",()=>{})}),r.pipe(o)}))})}}const To=864e5;class ko{constructor(e,n=30,r=30){this._queuePath=e,this._maxAgeDays=n,this._maxCount=r,this._queue=new Nt(this._queuePath,"queue",[])}add(e){return m(this,void 0,void 0,function*(){const n=U();this._queue.update(r=>{for(r.push({bodyPath:n,type:e.type,date:e.date||new Date});r.length>this._maxCount;){const i=r.shift();i&&this._removeBody(i.bodyPath)}return r});try{yield Js(T.join(this._queuePath,n),e.body)}catch{}})}pop(e){return m(this,void 0,void 0,function*(){let n;const r=Date.now()-To*this._maxAgeDays;if(this._queue.update(i=>{for(;(n=i.shift())&&n.date.getTime()<r;)this._removeBody(n.bodyPath),n=void 0;return i}),n)try{const i=yield kt(T.join(this._queuePath,n.bodyPath));return this._removeBody(n.bodyPath),{body:i,date:n.date,type:n.type,url:e}}catch(i){p.warn("Filed to read queued request body",i)}})}_removeBody(e){return m(this,void 0,void 0,function*(){try{yield le(T.join(this._queuePath,e))}catch{}})}}const on=5e3,an=2e9;function Ro(){return!("online"in v.net)||v.net.online===!0}class sr extends ir{constructor(e){super(e),this.options=e,this._queue=new ko(T.join(Tt,"queue")),this._url=ee(this._api.dsn),this._retryDelay=on,this._flushQueue()}sendRequest(e){const n=Object.create(null,{sendRequest:{get:()=>super.sendRequest}});return m(this,void 0,void 0,function*(){if(Ro())try{const r=yield n.sendRequest.call(this,e);return this._requestSuccess(),r}catch(r){if(r instanceof oe&&r.status!=="rate_limit")return p.warn("Dropping request:",r),{status:"failed"};p.log("Error sending:",r)}else p.log(`Currently Offline. Not sending '${e.type}' request. `);return yield this._queueRequest(e)})}_requestSuccess(){p.log("Successfully sent"),this._retryDelay=on,this._flushQueue()}_queueRequest(e){return m(this,void 0,void 0,function*(){return p.log("Queuing request"),yield this._queue.add(e),setTimeout(()=>{this._flushQueue()},this._retryDelay),this._retryDelay*=3,this._retryDelay>an&&(this._retryDelay=an),{status:"unknown"}})}_flushQueue(){this._queue.pop(this._url).then(e=>{e&&(p.log("Found a request in the queue"),this.sendRequest(e))})}}function or(t,e,n){var r;let i;try{i=JSON.parse(e)}catch{p.warn("sentry-electron received an invalid event message");return}const s=n&&((r=t==null?void 0:t.getRendererName)===null||r===void 0?void 0:r.call(t,n))||"renderer";Tn(K(i,{tags:{"event.process":s}}))}function Ke(t){return t!=null&&Object.keys(t).length>0}function ar(t,e){let n;try{n=JSON.parse(e)}catch{p.warn("sentry-electron received an invalid scope message");return}const r=N.clone(n);kn(i=>{Ke(r._user)&&i.setUser(r._user),Ke(r._tags)&&i.setTags(r._tags),Ke(r._extra)&&i.setExtras(r._extra);const s=r._breadcrumbs.pop();s&&i.addBreadcrumb(s,(t==null?void 0:t.maxBreadcrumbs)||100)})}function No(t){if(v.app.isReady())throw new S("Sentry SDK should be initialized before the Electron app 'ready' event is fired");v.protocol.registerSchemesAsPrivileged([{scheme:Oe,privileges:{bypassCSP:!0,corsEnabled:!0,supportFetchAPI:!0}}]),B(Fe.then(()=>{for(const e of t.getSessions())e.protocol.registerStringProtocol(Oe,(n,r)=>{var i,s;const o=(s=(i=n.uploadData)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.bytes.toString();n.url.startsWith(`${Oe}://${V.EVENT}`)&&o?or(t,o):n.url.startsWith(`${Oe}://${V.SCOPE}`)&&o&&ar(t,o),r("")})}))}function Io(t){v.ipcMain.on(V.EVENT,({sender:e},n)=>or(t,n,e)),v.ipcMain.on(V.SCOPE,(e,n)=>ar(t,n))}function Po(t){if(!Qt()&&t.ipcMode===exports.IPCMode.Protocol)throw new S("IPCMode.Protocol is only supported in Electron >= v5");Qt()&&(t.ipcMode&exports.IPCMode.Protocol)>0&&No(t),(t.ipcMode&exports.IPCMode.Classic)>0&&Io(t)}ln("main");const ur=[new me,new ge,new we,new ye,new xe,new te,new Se,new Ee,...Yn.filter(t=>t.name!=="OnUncaughtException")],Co={ipcMode:exports.IPCMode.Both,getSessions:()=>[v.session.defaultSession]};function Ao(t){const e=Object.assign(Co,t),n=ur;e.release===void 0&&(e.release=Qn()),e.environment===void 0&&(e.environment=er()),e.autoSessionTracking!==!1&&(n.push(new be),e.autoSessionTracking=!1),Mo(n,e),e.dsn&&e.transport===void 0&&(e.transport=sr),Po(e),Ls(e)}function Mo(t,e){if(e.defaultIntegrations===void 0){if(Array.isArray(e.integrations)&&e.integrations.some(n=>n.name==="ElectronMinidump")){e.defaultIntegrations=t.filter(n=>n.name!=="SentryMinidump");return}else if(typeof e.integrations=="function"){const n=e.integrations;e.integrations=r=>{const i=n(r);return i.some(s=>s.name==="ElectronMinidump")?i.filter(s=>s.name!=="SentryMinidump"):i}}e.defaultIntegrations=t}}ln("main");const Do=Object.assign(Object.assign({},wo),$s);exports.ElectronNetTransport=ir;exports.ElectronOfflineNetTransport=sr;exports.Hub=je;exports.Integrations=Do;exports.NodeBackend=Fn;exports.NodeClient=Un;exports.Scope=N;exports.addBreadcrumb=Pe;exports.addGlobalEventProcessor=gt;exports.captureEvent=Tn;exports.captureException=Mi;exports.captureMessage=nt;exports.configureScope=kn;exports.defaultIntegrations=ur;exports.getCurrentHub=g;exports.getHubFromCarrier=A;exports.init=Ao;exports.lastEventId=Fs;exports.setContext=Di;exports.setExtra=Fi;exports.setExtras=ji;exports.setTag=Ui;exports.setTags=Li;exports.setUser=Bi;exports.startTransaction=$i;exports.withScope=Hi;
