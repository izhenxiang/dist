import _ from"./4.js";import{c as e}from"./e.js";import{b as w,g,m as k}from"./$..js";import{v as S}from"./t.js";import{i as v}from"./0.js";import{k as b,H as y}from"./_.js";import"./..js";import"./6.js";import"./z.js";import"./i.js";import"./2.js";import"./-.js";import"./l.js";function h(){return new Worker("/s.js",{type:"module"})}var f,s,i,d,t,n,l,u,m,p,a;({camera:d}=v);l=await S();a=l.getVideoTracks()[0];({area:f}=e);f&&(p=new MediaStreamTrackProcessor({track:a,maxBufferSize:15}),a=new MediaStreamTrackGenerator({kind:"video"}),t=[p.readable,a.writable],n=()=>{new h().postMessage([localStorage.ppi-0,...t,...JSON.parse(localStorage.area)],t)});a.contentHint="detail";s=await w();i=s?s.getTracks():[];m=await g(e.sys_audio);u=new MediaStream([a,...k(i,m)]);b(()=>{var r,o,c;r=!!e.audio;for(o of i)o.enabled=r;c=e.sys_audio;for(o of m)o.enabled=c});y(()=>e.video,async()=>{var r;({video:r}=e),r?await d.show(localStorage.face_area_size-0):await d.hide()});_(u,i,n);
