"use strict";var ai=Object.defineProperty,ui=Object.defineProperties;var fi=Object.getOwnPropertyDescriptors;var tt=Object.getOwnPropertySymbols;var li=Object.prototype.hasOwnProperty,ci=Object.prototype.propertyIsEnumerable;var nt=(e,r,t)=>r in e?ai(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,$e=(e,r)=>{for(var t in r||(r={}))li.call(r,t)&&nt(e,t,r[t]);if(tt)for(var t of tt(r))ci.call(r,t)&&nt(e,t,r[t]);return e},it=(e,r)=>ui(e,fi(r));var y=require("electron"),di=require("os"),oe=require("fs"),q=require("path"),hi=require("crypto"),Ut=require("zlib"),xi=require("util"),le=require("./z.js"),je=require("fs/promises"),Ge=require("./$..js"),jt=require("./j.js"),ae=require("./b.js"),pi=require("events");function Rt(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var ge=Rt(di),wi=Rt(pi),gi="darwin",ie=e=>{if(!!e&&!e.isDestroyed()){e.close();try{e.destroy()}catch{}}},vi=(e,r)=>{var t,n;for(t in r)n=r[t],e.on(t,n);return e},Pt;Pt=q.dirname(__dirname);Ar=Tr=kr=__dirname;q.dirname(Pt);var kr=kr,Tr=Tr,Ar=Ar,fr,Wt;fr="127.0.0.1",Wt="http://"+fr,y.session.defaultSession.protocol.interceptStreamProtocol("http",(e,r)=>{var t,n,i,s,f,x,p,m,O;if(O=new URL(e.url),O.host===fr)({pathname:f}=O),f==="/"&&(f+=".htm"),m=f.slice(f.lastIndexOf(".")+1),m.startsWith("htm")?s="text/html":s={js:"text/javascript",css:"text/css",svg:"image/svg+xml",woff2:"font/woff2"}[m]||"application/octet-stream",n=oe.createReadStream(Tr+f),r({data:n,statusCode:200,headers:{"content-type":s}});else{if(e.useSessionCookies=!0,e.partition="persist:I",x=y.net.request(e),x.on("response",_=>{var U,A;({headers:U,statusCode:A}=_),r({data:_},U,A)}),e.uploadData){p=e.uploadData;for(i of p)({bytes:t}=i),t&&x.write(t)}x.end()}});var de=new Proxy({},{get:(e,r)=>t=>{var n;return t=it($e({skipTaskbar:!0,frame:!1,minimizable:!1,maximizable:!1,fullscreenable:!1,type:"toolbar",shadow:!1,hasShadow:!1,transparent:!0},t),{webPreferences:$e({preload:q.join(kr,"$!.js"),webSecurity:!1},t.webPreferences)}),n=new y.BrowserWindow(t),n.setMenu(null),r!=="main"&&n.setVisibleOnAllWorkspaces(!0,{visibleOnFullScreen:!0}),n.loadURL(Wt+"#"+r),n.once("ready-to-show",()=>{n.show()}),n.focus(),n}}),Xe=e=>{y.BrowserWindow.getAllWindows().forEach(r=>{var t,n;if(n=r.webContents.getURL(),n){if({hash:t}=new URL(n),t=t.slice(1),t.startsWith("main")){e?(r[e](),e==="show"&&r.once("show",()=>{r.setAlwaysOnTop(!0,"screen-saver"),setTimeout(()=>r.setAlwaysOnTop(!1,"screen-saver"),1e3)})):r.hide();return}if(t.startsWith("camera"))return}ie(r)})},yi=()=>{y.BrowserWindow.getAllWindows().forEach(e=>{var r,t;if(t=e.webContents.getURL(),t&&({hash:r}=new URL(t),r=r.slice(1),r.startsWith("main"))){e.hide();return}ie(e)})},Ct,Et;({main:Ct}=de);Et=function(e=!0){var r,t,n,i;if(t=y.BrowserWindow.getAllWindows(),t.length)for(r of t)switch(n=r.webContents.getURL().split("/#").pop(),n){case"main":i=r;break;case"recbar":case"win_area":case"area":return}i?(i.isMinimized(),i.restore()):i=Ct({type:"",resizable:!1,height:610,width:426,skipTaskbar:!1}),!(!e&&!i.isVisible())&&(i.show(),i.moveTop(),i.focus())};function ce(e=!0){return Et(e)}var mi=function(){var e,r,t,n;if(n=void 0,r=y.BrowserWindow.getAllWindows(),r.length)for(e of r)switch(t=e.webContents.getURL().split("/#").pop(),t){case"main":n=e;break;case"recbar":case"win_area":case"area":return}if(n!==void 0)return n.webContents.send("quick_start","start")},$r,ye,Qe,It,Oe,Re,Je,Ze,te,v,Mr;({camera:It}=de);v=void 0;te=void 0;$r=204;ye=30;Re=Oe=$r;var Bt=()=>{v&&!v.isDestroyed()&&v.getSize()[0]!==800&&(te=v.getPosition()),ie(v),v=void 0},bi=function(){return v&&!v.isDestroyed()?v.isFocused()||v.isVisible():!1},_i=e=>{var r,t;Re=e,Oe=e+ye,t=v.getSize()[0],t!==e&&(te=v.getPosition(),r=Math.round((e-t)/2),v.setBounds({x:te[0]-r,y:te[1]-r,width:Re,height:Oe}))};Qe=!1;var Dt=()=>Mr(800,500+ye);Je=Oe;Ze=[];var Si=function(){if(!v||v.isDestroyed())return 0;Je=v.getSize()[1],Ze=v.getPosition()},Oi=function(e){var r,t,n,i;if(!(!v||v.isDestroyed()))try{if(r=Re/(Oe-ye),n=Je+e,n<=200)return;i=parseInt(r*(n-ye)+.5),v.setBounds({x:Ze[0],y:Ze[1]-e,width:i,height:n})}catch(s){t=s,console.error("resize camera failed",e,Je,t)}},ki=Mr=(e,r)=>{v&&!v.isDestroyed()||(r<=400&&(r+=ye),Re=e,Oe=r,v=It({width:e,height:r,center:!0,roundedCorners:!1,resizable:!1,transparent:!0}),Qe&&Pe())},zt=e=>{var r,t,n,i,s;v&&!v.isDestroyed()||(e=e||$r,Mr(e,e),te&&te[0]>=0&&te[1]>=0?[r,t]=te:({width:s,height:n}=y.screen.getPrimaryDisplay().size,i=62+ye+5,r=i,t=n-i-e),v.setPosition(r,t))},Ti=()=>{Bt(),Dt()},Pe=()=>{v&&!v.isDestroyed()&&(v.setAlwaysOnTop(!0,"pop-up-menu"),v.setVisibleOnAllWorkspaces(!0,{visibleOnFullScreen:!0})),Qe=!0},Ai=()=>{v&&!v.isDestroyed()&&v.moveTop()},Lt=()=>{v&&!v.isDestroyed()&&(v.setAlwaysOnTop(!1),v.setVisibleOnAllWorkspaces(!1)),Qe=!1},Ft=function(){return v},$i=function(){v&&!v.isDestroyed()&&v.hide()},Mi=function(e){v&&!v.isDestroyed()?(v.show(),Pe()):(zt(e),Pe())},Ui=Object.freeze(Object.defineProperty({__proto__:null,x:Bt,visible:bi,size:_i,rect:Dt,record_ori_height:Si,zoom_window:Oi,default:ki,circle:zt,x_rect:Ti,top:Pe,top_once:Ai,untop:Lt,get_camera_win:Ft,hide:$i,show:Mi},Symbol.toStringTag,{value:"Module"})),ji="x64",hr;try{hr=new TextDecoder}catch{}var h,fe,o=0,V={},M,ue,J=0,X=0,L,ne,N=[],$,st={useRecords:!1,mapsAsObjects:!0};class qt{}const Vt=new qt;Vt.name="MessagePack 0xC1";var ke=!1,Nt=2;try{new Function("")}catch{Nt=1/0}class We{constructor(r){r&&(r.useRecords===!1&&r.mapsAsObjects===void 0&&(r.mapsAsObjects=!0),r.structures?r.structures.sharedLength=r.structures.length:r.getStructures&&((r.structures=[]).uninitialized=!0,r.structures.sharedLength=0)),Object.assign(this,r)}unpack(r,t){if(h)return Kt(()=>(pr(),this?this.unpack(r,t):We.prototype.unpack.call(st,r,t)));fe=t>-1?t:r.length,o=0,X=0,ue=null,L=null,h=r;try{$=r.dataView||(r.dataView=new DataView(r.buffer,r.byteOffset,r.byteLength))}catch(n){throw h=null,r instanceof Uint8Array?n:new Error("Source must be a Uint8Array or Buffer but was a "+(r&&typeof r=="object"?r.constructor.name:typeof r))}if(this instanceof We){if(V=this,this.structures)return M=this.structures,ze();(!M||M.length>0)&&(M=[])}else V=st,(!M||M.length>0)&&(M=[]);return ze()}unpackMultiple(r,t){let n,i=0;try{ke=!0;let s=r.length,f=this?this.unpack(r,s):er.unpack(r,s);if(t){for(t(f);o<s;)if(i=o,t(ze())===!1)return}else{for(n=[f];o<s;)i=o,n.push(ze());return n}}catch(s){throw s.lastPosition=i,s.values=n,s}finally{ke=!1,pr()}}_mergeStructures(r,t){r=r||[];for(let n=0,i=r.length;n<i;n++){let s=r[n];s&&(s.isShared=!0,n>=32&&(s.highByte=n-32>>5))}r.sharedLength=r.length;for(let n in t||[])if(n>=0){let i=r[n],s=t[n];s&&(i&&((r.restoreStructures||(r.restoreStructures=[]))[n]=i),r[n]=s)}return this.structures=r}decode(r,t){return this.unpack(r,t)}}function ze(){try{if(!V.trusted&&!ke){let r=M.sharedLength||0;r<M.length&&(M.length=r)}let e=E();if(L&&(o=L.postBundlePosition),o==fe)M.restoreStructures&&ot(),M=null,h=null,ne&&(ne=null);else if(o>fe){let r=new Error("Unexpected end of MessagePack data");throw r.incomplete=!0,r}else if(!ke)throw new Error("Data read, but end of buffer not reached");return e}catch(e){throw M.restoreStructures&&ot(),pr(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function ot(){for(let e in M.restoreStructures)M[e]=M.restoreStructures[e];M.restoreStructures=null}function E(){let e=h[o++];if(e<160)if(e<128){if(e<64)return e;{let r=M[e&63]||V.getStructures&&Gt()[e&63];return r?(r.read||(r.read=Ur(r,e&63)),r.read()):e}}else if(e<144)if(e-=128,V.mapsAsObjects){let r={};for(let t=0;t<e;t++)r[Zt()]=E();return r}else{let r=new Map;for(let t=0;t<e;t++)r.set(E(),E());return r}else{e-=144;let r=new Array(e);for(let t=0;t<e;t++)r[t]=E();return r}else if(e<192){let r=e-160;if(X>=o)return ue.slice(o-J,(o+=r)-J);if(X==0&&fe<140){let t=r<16?jr(r):Jt(r);if(t!=null)return t}return xr(r)}else{let r;switch(e){case 192:return null;case 193:return L?(r=E(),r>0?L[1].slice(L.position1,L.position1+=r):L[0].slice(L.position0,L.position0-=r)):Vt;case 194:return!1;case 195:return!0;case 196:return lr(h[o++]);case 197:return r=$.getUint16(o),o+=2,lr(r);case 198:return r=$.getUint32(o),o+=4,lr(r);case 199:return we(h[o++]);case 200:return r=$.getUint16(o),o+=2,we(r);case 201:return r=$.getUint32(o),o+=4,we(r);case 202:if(r=$.getFloat32(o),V.useFloat32>2){let t=Rr[(h[o]&127)<<1|h[o+1]>>7];return o+=4,(t*r+(r>0?.5:-.5)>>0)/t}return o+=4,r;case 203:return r=$.getFloat64(o),o+=8,r;case 204:return h[o++];case 205:return r=$.getUint16(o),o+=2,r;case 206:return r=$.getUint32(o),o+=4,r;case 207:return V.int64AsNumber?(r=$.getUint32(o)*4294967296,r+=$.getUint32(o+4)):r=$.getBigUint64(o),o+=8,r;case 208:return $.getInt8(o++);case 209:return r=$.getInt16(o),o+=2,r;case 210:return r=$.getInt32(o),o+=4,r;case 211:return V.int64AsNumber?(r=$.getInt32(o)*4294967296,r+=$.getUint32(o+4)):r=$.getBigInt64(o),o+=8,r;case 212:if(r=h[o++],r==114)return dt(h[o++]&63);{let t=N[r];if(t)return t.read?(o++,t.read(E())):t.noBuffer?(o++,t()):t(h.subarray(o,++o));throw new Error("Unknown extension "+r)}case 213:return r=h[o],r==114?(o++,dt(h[o++]&63,h[o++])):we(2);case 214:return we(4);case 215:return we(8);case 216:return we(16);case 217:return r=h[o++],X>=o?ue.slice(o-J,(o+=r)-J):Pi(r);case 218:return r=$.getUint16(o),o+=2,X>=o?ue.slice(o-J,(o+=r)-J):Wi(r);case 219:return r=$.getUint32(o),o+=4,X>=o?ue.slice(o-J,(o+=r)-J):Ci(r);case 220:return r=$.getUint16(o),o+=2,ut(r);case 221:return r=$.getUint32(o),o+=4,ut(r);case 222:return r=$.getUint16(o),o+=2,ft(r);case 223:return r=$.getUint32(o),o+=4,ft(r);default:if(e>=224)return e-256;if(e===void 0){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}throw new Error("Unknown MessagePack token "+e)}}}const Ri=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Ur(e,r){function t(){if(t.count++>Nt){let i=e.read=new Function("r","return function(){return {"+e.map(s=>Ri.test(s)?s+":r()":"["+JSON.stringify(s)+"]:r()").join(",")+"}}")(E);return e.highByte===0&&(e.read=at(r,e.read)),i()}let n={};for(let i=0,s=e.length;i<s;i++){let f=e[i];n[f]=E()}return n}return t.count=0,e.highByte===0?at(r,t):t}const at=(e,r)=>function(){let t=h[o++];if(t===0)return r();let n=e<32?-(e+(t<<5)):e+(t<<5),i=M[n]||Gt()[n];if(!i)throw new Error("Record id is not defined for "+n);return i.read||(i.read=Ur(i,e)),i.read()};function Gt(){let e=Kt(()=>(h=null,V.getStructures()));return M=V._mergeStructures(e,M)}var xr=Be,Pi=Be,Wi=Be,Ci=Be;function Be(e){let r;if(e<16&&(r=jr(e)))return r;if(e>64&&hr)return hr.decode(h.subarray(o,o+=e));const t=o+e,n=[];for(r="";o<t;){const i=h[o++];if((i&128)===0)n.push(i);else if((i&224)===192){const s=h[o++]&63;n.push((i&31)<<6|s)}else if((i&240)===224){const s=h[o++]&63,f=h[o++]&63;n.push((i&31)<<12|s<<6|f)}else if((i&248)===240){const s=h[o++]&63,f=h[o++]&63,x=h[o++]&63;let p=(i&7)<<18|s<<12|f<<6|x;p>65535&&(p-=65536,n.push(p>>>10&1023|55296),p=56320|p&1023),n.push(p)}else n.push(i);n.length>=4096&&(r+=D.apply(String,n),n.length=0)}return n.length>0&&(r+=D.apply(String,n)),r}function ut(e){let r=new Array(e);for(let t=0;t<e;t++)r[t]=E();return r}function ft(e){if(V.mapsAsObjects){let r={};for(let t=0;t<e;t++)r[Zt()]=E();return r}else{let r=new Map;for(let t=0;t<e;t++)r.set(E(),E());return r}}var D=String.fromCharCode;function Jt(e){let r=o,t=new Array(e);for(let n=0;n<e;n++){const i=h[o++];if((i&128)>0){o=r;return}t[n]=i}return D.apply(String,t)}function jr(e){if(e<4)if(e<2){if(e===0)return"";{let r=h[o++];if((r&128)>1){o-=1;return}return D(r)}}else{let r=h[o++],t=h[o++];if((r&128)>0||(t&128)>0){o-=2;return}if(e<3)return D(r,t);let n=h[o++];if((n&128)>0){o-=3;return}return D(r,t,n)}else{let r=h[o++],t=h[o++],n=h[o++],i=h[o++];if((r&128)>0||(t&128)>0||(n&128)>0||(i&128)>0){o-=4;return}if(e<6){if(e===4)return D(r,t,n,i);{let s=h[o++];if((s&128)>0){o-=5;return}return D(r,t,n,i,s)}}else if(e<8){let s=h[o++],f=h[o++];if((s&128)>0||(f&128)>0){o-=6;return}if(e<7)return D(r,t,n,i,s,f);let x=h[o++];if((x&128)>0){o-=7;return}return D(r,t,n,i,s,f,x)}else{let s=h[o++],f=h[o++],x=h[o++],p=h[o++];if((s&128)>0||(f&128)>0||(x&128)>0||(p&128)>0){o-=8;return}if(e<10){if(e===8)return D(r,t,n,i,s,f,x,p);{let m=h[o++];if((m&128)>0){o-=9;return}return D(r,t,n,i,s,f,x,p,m)}}else if(e<12){let m=h[o++],O=h[o++];if((m&128)>0||(O&128)>0){o-=10;return}if(e<11)return D(r,t,n,i,s,f,x,p,m,O);let _=h[o++];if((_&128)>0){o-=11;return}return D(r,t,n,i,s,f,x,p,m,O,_)}else{let m=h[o++],O=h[o++],_=h[o++],U=h[o++];if((m&128)>0||(O&128)>0||(_&128)>0||(U&128)>0){o-=12;return}if(e<14){if(e===12)return D(r,t,n,i,s,f,x,p,m,O,_,U);{let A=h[o++];if((A&128)>0){o-=13;return}return D(r,t,n,i,s,f,x,p,m,O,_,U,A)}}else{let A=h[o++],C=h[o++];if((A&128)>0||(C&128)>0){o-=14;return}if(e<15)return D(r,t,n,i,s,f,x,p,m,O,_,U,A,C);let Y=h[o++];if((Y&128)>0){o-=15;return}return D(r,t,n,i,s,f,x,p,m,O,_,U,A,C,Y)}}}}}function lt(){let e=h[o++],r;if(e<192)r=e-160;else switch(e){case 217:r=h[o++];break;case 218:r=$.getUint16(o),o+=2;break;case 219:r=$.getUint32(o),o+=4;break;default:throw new Error("Expected string")}return Be(r)}function lr(e){return V.copyBuffers?Uint8Array.prototype.slice.call(h,o,o+=e):h.subarray(o,o+=e)}function we(e){let r=h[o++];if(N[r])return N[r](h.subarray(o,o+=e));throw new Error("Unknown extension type "+r)}var ct=new Array(4096);function Zt(){let e=h[o++];if(e>=160&&e<192){if(e=e-160,X>=o)return ue.slice(o-J,(o+=e)-J);if(!(X==0&&fe<180))return xr(e)}else return o--,E();let r=(e<<5^(e>1?$.getUint16(o):e>0?h[o]:0))&4095,t=ct[r],n=o,i=o+e-3,s,f=0;if(t&&t.bytes==e){for(;n<i;){if(s=$.getUint32(n),s!=t[f++]){n=1879048192;break}n+=4}for(i+=3;n<i;)if(s=h[n++],s!=t[f++]){n=1879048192;break}if(n===i)return o=n,t.string;i-=3,n=o}for(t=[],ct[r]=t,t.bytes=e;n<i;)s=$.getUint32(n),t.push(s),n+=4;for(i+=3;n<i;)s=h[n++],t.push(s);let x=e<16?jr(e):Jt(e);return x!=null?t.string=x:t.string=xr(e)}const dt=(e,r)=>{var t=E();let n=e;r!==void 0&&(e=e<32?-((r<<5)+e):(r<<5)+e,t.highByte=r);let i=M[e];return i&&i.isShared&&((M.restoreStructures||(M.restoreStructures=[]))[e]=i),M[e]=t,t.read=Ur(t,n),t.read()};var Ht=typeof self=="object"?self:global;N[0]=()=>{};N[0].noBuffer=!0;N[101]=()=>{let e=E();return(Ht[e[0]]||Error)(e[1])};N[105]=e=>{let r=$.getUint32(o-4);ne||(ne=new Map);let t=h[o],n;t>=144&&t<160||t==220||t==221?n=[]:n={};let i={target:n};ne.set(r,i);let s=E();return i.used?Object.assign(n,s):(i.target=s,s)};N[112]=e=>{let r=$.getUint32(o-4),t=ne.get(r);return t.used=!0,t.target};N[115]=()=>new Set(E());const Yt=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array");N[116]=e=>{let r=e[0],t=Yt[r];if(!t)throw new Error("Could not find typed array for code "+r);return new Ht[t](Uint8Array.prototype.slice.call(e,1).buffer)};N[120]=()=>{let e=E();return new RegExp(e[0],e[1])};const Ei=[];N[98]=e=>{let r=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],t=o;return o+=r-e.length,L=Ei,L=[lt(),lt()],L.position0=0,L.position1=0,L.postBundlePosition=o,o=t,E()};N[255]=e=>e.length==4?new Date((e[0]*16777216+(e[1]<<16)+(e[2]<<8)+e[3])*1e3):e.length==8?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+((e[3]&3)*4294967296+e[4]*16777216+(e[5]<<16)+(e[6]<<8)+e[7])*1e3):e.length==12?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+((e[4]&128?-281474976710656:0)+e[6]*1099511627776+e[7]*4294967296+e[8]*16777216+(e[9]<<16)+(e[10]<<8)+e[11])*1e3):new Date("invalid");function Kt(e){let r=fe,t=o,n=J,i=X,s=ue,f=ne,x=L,p=new Uint8Array(h.slice(0,fe)),m=M,O=M.slice(0,M.length),_=V,U=ke,A=e();return fe=r,o=t,J=n,X=i,ue=s,ne=f,L=x,h=p,ke=U,M=m,M.splice(0,M.length,...O),V=_,$=new DataView(h.buffer,h.byteOffset,h.byteLength),A}function pr(){h=null,ne=null,M=null}const Rr=new Array(147);for(let e=0;e<256;e++)Rr[e]=+("1e"+Math.floor(45.15-e*.30103));var er=new We({useRecords:!1});const Ii=er.unpack;er.unpackMultiple;er.unpack;let Bi=new Float32Array(1);new Uint8Array(Bi.buffer,0,4);let qe;try{qe=new TextEncoder}catch{}let wr,Xt;const rr=typeof Buffer!="undefined",Le=rr?Buffer.allocUnsafeSlow:Uint8Array,Qt=rr?Buffer:Uint8Array,ht=rr?4294967296:2144337920;let u,Me,W,a=0,F,z=null;const Di=61440,zi=/[\u0080-\uFFFF]/,be=Symbol("record-id");class Li extends We{constructor(r){super(r),this.offset=0;let t,n,i,s,f=0,x=Qt.prototype.utf8Write?function(l,S,d){return u.utf8Write(l,S,d)}:qe&&qe.encodeInto?function(l,S){return qe.encodeInto(l,u.subarray(S)).written}:!1,p=this;r||(r={});let m=r&&r.sequential,O=r.structures||r.saveStructures,_=r.maxSharedStructures;if(_==null&&(_=O?32:0),_>8160)throw new Error("Maximum maxSharedStructure is 8160");r.structuredClone&&r.moreTypes==null&&(r.moreTypes=!0);let U=r.maxOwnStructures;U==null&&(U=O?32:64),!this.structures&&r.useRecords!=!1&&(this.structures=[]);let A=_>32||U+_>64,C=_+64,Y=_+U+64;if(Y>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let G=[],he=0,K=0;this.pack=this.encode=function(l,S){if(u||(u=new Le(8192),W=new DataView(u.buffer,0,8192),a=0),F=u.length-10,F-a<2048?(u=new Le(u.length),W=new DataView(u.buffer,0,u.length),F=u.length-10,a=0):a=a+7&2147483640,t=a,s=p.structuredClone?new Map:null,p.bundleStrings&&typeof l!="string"?(z=[],z.size=1/0):z=null,i=p.structures,i){i.uninitialized&&(i=p._mergeStructures(p.getStructures()));let d=i.sharedLength||0;if(d>_)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+i.sharedLength);if(!i.transitions){i.transitions=Object.create(null);for(let c=0;c<d;c++){let w=i[c];if(!w)continue;let j,k=i.transitions;for(let b=0,I=w.length;b<I;b++){let R=w[b];j=k[R],j||(j=k[R]=Object.create(null)),k=j}k[be]=c+64}f=d}m||(i.nextId=d+64)}n&&(n=!1);try{if(P(l),z&&wt(t,P),p.offset=a,s&&s.idsToInsert){a+=s.idsToInsert.length*6,a>F&&xe(a),p.offset=a;let d=qi(u.subarray(t,a),s.idsToInsert);return s=null,d}return S&Vi?(u.start=t,u.end=a,u):u.subarray(t,a)}finally{if(i){K<10&&K++;let d=i.sharedLength||_;if(i.length>d&&(i.length=d),he>1e4)i.transitions=null,K=0,he=0,G.length>0&&(G=[]);else if(G.length>0&&!m){for(let c=0,w=G.length;c<w;c++)G[c][be]=0;G=[]}if(n&&p.saveStructures){let c=u.subarray(t,a);return p.saveStructures(i,f)===!1?(p._mergeStructures(p.getStructures()),p.pack(l)):(f=d,c)}}S&Ni&&(a=t)}};const P=l=>{a>F&&(u=xe(a));var S=typeof l,d;if(S==="string"){let c=l.length;if(z&&c>=4&&c<4096){if((z.size+=c)>Di){let b,I=(z[0]?z[0].length*3+z[1].length:0)+10;a+I>F&&(u=xe(a+I)),z.position?(u[a]=200,a+=3,u[a++]=98,b=a-t,a+=4,wt(t,P),W.setUint16(b+t-3,a-t-b)):(u[a++]=214,u[a++]=98,b=a-t,a+=4),z=["",""],z.size=0,z.position=b}let k=zi.test(l);z[k?0:1]+=l,u[a++]=193,P(k?-c:c);return}let w;c<32?w=1:c<256?w=2:c<65536?w=3:w=5;let j=c*3;if(a+j>F&&(u=xe(a+j)),c<64||!x){let k,b,I,R=a+w;for(k=0;k<c;k++)b=l.charCodeAt(k),b<128?u[R++]=b:b<2048?(u[R++]=b>>6|192,u[R++]=b&63|128):(b&64512)===55296&&((I=l.charCodeAt(k+1))&64512)===56320?(b=65536+((b&1023)<<10)+(I&1023),k++,u[R++]=b>>18|240,u[R++]=b>>12&63|128,u[R++]=b>>6&63|128,u[R++]=b&63|128):(u[R++]=b>>12|224,u[R++]=b>>6&63|128,u[R++]=b&63|128);d=R-a-w}else d=x(l,a+w,j);d<32?u[a++]=160|d:d<256?(w<2&&u.copyWithin(a+2,a+1,a+1+d),u[a++]=217,u[a++]=d):d<65536?(w<3&&u.copyWithin(a+3,a+2,a+2+d),u[a++]=218,u[a++]=d>>8,u[a++]=d&255):(w<5&&u.copyWithin(a+5,a+3,a+3+d),u[a++]=219,W.setUint32(a,d),a+=4),a+=d}else if(S==="number")if(l>>>0===l)l<64?u[a++]=l:l<256?(u[a++]=204,u[a++]=l):l<65536?(u[a++]=205,u[a++]=l>>8,u[a++]=l&255):(u[a++]=206,W.setUint32(a,l),a+=4);else if(l>>0===l)l>=-32?u[a++]=256+l:l>=-128?(u[a++]=208,u[a++]=l+256):l>=-32768?(u[a++]=209,W.setInt16(a,l),a+=2):(u[a++]=210,W.setInt32(a,l),a+=4);else{let c;if((c=this.useFloat32)>0&&l<4294967296&&l>=-2147483648){u[a++]=202,W.setFloat32(a,l);let w;if(c<4||(w=l*Rr[(u[a]&127)<<1|u[a+1]>>7])>>0===w){a+=4;return}else a--}u[a++]=203,W.setFloat64(a,l),a+=8}else if(S==="object")if(!l)u[a++]=192;else{if(s){let w=s.get(l);if(w){if(!w.id){let j=s.idsToInsert||(s.idsToInsert=[]);w.id=j.push(w)}u[a++]=214,u[a++]=112,W.setUint32(a,w.id),a+=4;return}else s.set(l,{offset:a-t})}let c=l.constructor;if(c===Object)et(l,!0);else if(c===Array){d=l.length,d<16?u[a++]=144|d:d<65536?(u[a++]=220,u[a++]=d>>8,u[a++]=d&255):(u[a++]=221,W.setUint32(a,d),a+=4);for(let w=0;w<d;w++)P(l[w])}else if(c===Map){d=l.size,d<16?u[a++]=128|d:d<65536?(u[a++]=222,u[a++]=d>>8,u[a++]=d&255):(u[a++]=223,W.setUint32(a,d),a+=4);for(let[w,j]of l)P(w),P(j)}else{for(let w=0,j=wr.length;w<j;w++){let k=Xt[w];if(l instanceof k){let b=wr[w];if(b.write){b.type&&(u[a++]=212,u[a++]=b.type,u[a++]=0),P(b.write.call(this,l));return}let I=u,R=W,re=a;u=null;let pe;try{pe=b.pack.call(this,l,Ae=>(u=I,I=null,a+=Ae,a>F&&xe(a),{target:u,targetView:W,position:a-Ae}),P)}finally{I&&(u=I,W=R,a=re,F=u.length-10)}pe&&(pe.length+a>F&&xe(pe.length+a),a=Fi(pe,u,a,b.type));return}}et(l,!l.hasOwnProperty)}}else if(S==="boolean")u[a++]=l?195:194;else if(S==="bigint"){if(l<BigInt(1)<<BigInt(63)&&l>=-(BigInt(1)<<BigInt(63)))u[a++]=211,W.setBigInt64(a,l);else if(l<BigInt(1)<<BigInt(64)&&l>0)u[a++]=207,W.setBigUint64(a,l);else if(this.largeBigIntToFloat)u[a++]=203,W.setFloat64(a,Number(l));else throw new RangeError(l+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");a+=8}else if(S==="undefined")this.encodeUndefinedAsNil?u[a++]=192:(u[a++]=212,u[a++]=0,u[a++]=0);else if(S==="function")P(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+S)},et=this.useRecords===!1?this.variableMapSize?l=>{let S=Object.keys(l),d=S.length;d<16?u[a++]=128|d:d<65536?(u[a++]=222,u[a++]=d>>8,u[a++]=d&255):(u[a++]=223,W.setUint32(a,d),a+=4);let c;for(let w=0;w<d;w++)P(c=S[w]),P(l[c])}:(l,S)=>{u[a++]=222;let d=a-t;a+=2;let c=0;for(let w in l)(S||l.hasOwnProperty(w))&&(P(w),P(l[w]),c++);u[d+++t]=c>>8,u[d+t]=c&255}:r.progressiveRecords&&!A?(l,S)=>{let d,c=i.transitions||(i.transitions=Object.create(null)),w=a++-t,j;for(let k in l)if(S||l.hasOwnProperty(k)){if(d=c[k],d)c=d;else{let b=Object.keys(l),I=c;c=i.transitions;let R=0;for(let re=0,pe=b.length;re<pe;re++){let Ae=b[re];d=c[Ae],d||(d=c[Ae]=Object.create(null),R++),c=d}w+t+1==a?(a--,ur(c,b,R)):rt(c,b,w,R),j=!0,c=I[k]}P(l[k])}if(!j){let k=c[be];k?u[w+t]=k:rt(c,Object.keys(l),w,0)}}:(l,S)=>{let d,c=i.transitions||(i.transitions=Object.create(null)),w=0;for(let k in l)(S||l.hasOwnProperty(k))&&(d=c[k],d||(d=c[k]=Object.create(null),w++),c=d);let j=c[be];j?j>=96&&A?(u[a++]=((j-=96)&31)+96,u[a++]=j>>5):u[a++]=j:ur(c,c.__keys__||Object.keys(l),w);for(let k in l)(S||l.hasOwnProperty(k))&&P(l[k])},xe=l=>{let S;if(l>16777216){if(l-t>ht)throw new Error("Packed buffer would be larger than maximum buffer size");S=Math.min(ht,Math.round(Math.max((l-t)*(l>67108864?1.25:2),4194304)/4096)*4096)}else S=(Math.max(l-t<<2,u.length-1)>>12)+1<<12;let d=new Le(S);return W=new DataView(d.buffer,0,S),u.copy?u.copy(d,0,t,l):d.set(u.slice(t,l)),a-=t,t=0,F=d.length-10,u=d},ur=(l,S,d)=>{let c=i.nextId;c||(c=64),c<C&&this.shouldShareStructure&&!this.shouldShareStructure(S)?(c=i.nextOwnId,c<Y||(c=C),i.nextOwnId=c+1):(c>=Y&&(c=C),i.nextId=c+1);let w=S.highByte=c>=96&&A?c-96>>5:-1;l[be]=c,l.__keys__=S,i[c-64]=S,c<C?(S.isShared=!0,i.sharedLength=c-63,n=!0,w>=0?(u[a++]=(c&31)+96,u[a++]=w):u[a++]=c):(w>=0?(u[a++]=213,u[a++]=114,u[a++]=(c&31)+96,u[a++]=w):(u[a++]=212,u[a++]=114,u[a++]=c),d&&(he+=K*d),G.length>=U&&(G.shift()[be]=0),G.push(l),P(S))},rt=(l,S,d,c)=>{let w=u,j=a,k=F,b=t;u=Me,a=0,t=0,u||(Me=u=new Le(8192)),F=u.length-10,ur(l,S,c),Me=u;let I=a;if(u=w,a=j,F=k,t=b,I>1){let R=a+I-1;R>F&&xe(R);let re=d+t;u.copyWithin(re+I,re+1,a),u.set(Me.slice(0,I),re),a=R}else u[d+t]=Me[0]}}useBuffer(r){u=r,W=new DataView(u.buffer,u.byteOffset,u.byteLength),a=0}clearSharedData(){this.structures&&(this.structures=[])}}Xt=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,qt];wr=[{pack(e,r,t){let n=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&n>=0&&n<4294967296){let{target:i,targetView:s,position:f}=r(6);i[f++]=214,i[f++]=255,s.setUint32(f,n)}else if(n>0&&n<4294967296){let{target:i,targetView:s,position:f}=r(10);i[f++]=215,i[f++]=255,s.setUint32(f,e.getMilliseconds()*4e6+(n/1e3/4294967296>>0)),s.setUint32(f+4,n)}else if(isNaN(n)){if(this.onInvalidDate)return r(0),t(this.onInvalidDate());let{target:i,targetView:s,position:f}=r(3);i[f++]=212,i[f++]=255,i[f++]=255}else{let{target:i,targetView:s,position:f}=r(15);i[f++]=199,i[f++]=12,i[f++]=255,s.setUint32(f,e.getMilliseconds()*1e6),s.setBigInt64(f+4,BigInt(Math.floor(n)))}}},{pack(e,r,t){let n=Array.from(e),{target:i,position:s}=r(this.moreTypes?3:0);this.moreTypes&&(i[s++]=212,i[s++]=115,i[s++]=0),t(n)}},{pack(e,r,t){let{target:n,position:i}=r(this.moreTypes?3:0);this.moreTypes&&(n[i++]=212,n[i++]=101,n[i++]=0),t([e.name,e.message])}},{pack(e,r,t){let{target:n,position:i}=r(this.moreTypes?3:0);this.moreTypes&&(n[i++]=212,n[i++]=120,n[i++]=0),t([e.source,e.flags])}},{pack(e,r){this.moreTypes?xt(e,16,r):pt(rr?Buffer.from(e):new Uint8Array(e),r)}},{pack(e,r){let t=e.constructor;t!==Qt&&this.moreTypes?xt(e,Yt.indexOf(t.name),r):pt(e,r)}},{pack(e,r){let{target:t,position:n}=r(1);t[n]=193}}];function xt(e,r,t,n){let i=e.byteLength;if(i+1<256){var{target:s,position:f}=t(4+i);s[f++]=199,s[f++]=i+1}else if(i+1<65536){var{target:s,position:f}=t(5+i);s[f++]=200,s[f++]=i+1>>8,s[f++]=i+1&255}else{var{target:s,position:f,targetView:x}=t(7+i);s[f++]=201,x.setUint32(f,i+1),f+=4}s[f++]=116,s[f++]=r,s.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),f)}function pt(e,r){let t=e.byteLength;var n,i;if(t<256){var{target:n,position:i}=r(t+2);n[i++]=196,n[i++]=t}else if(t<65536){var{target:n,position:i}=r(t+3);n[i++]=197,n[i++]=t>>8,n[i++]=t&255}else{var{target:n,position:i,targetView:s}=r(t+5);n[i++]=198,s.setUint32(i,t),i+=4}n.set(e,i)}function Fi(e,r,t,n){let i=e.length;switch(i){case 1:r[t++]=212;break;case 2:r[t++]=213;break;case 4:r[t++]=214;break;case 8:r[t++]=215;break;case 16:r[t++]=216;break;default:i<256?(r[t++]=199,r[t++]=i):i<65536?(r[t++]=200,r[t++]=i>>8,r[t++]=i&255):(r[t++]=201,r[t++]=i>>24,r[t++]=i>>16&255,r[t++]=i>>8&255,r[t++]=i&255)}return r[t++]=n,r.set(e,t),t+=i,t}function qi(e,r){let t,n=r.length*6,i=e.length-n;for(r.sort((s,f)=>s.offset>f.offset?1:-1);t=r.pop();){let s=t.offset,f=t.id;e.copyWithin(s+n,s,i),n-=6;let x=s+n;e[x++]=214,e[x++]=105,e[x++]=f>>24,e[x++]=f>>16&255,e[x++]=f>>8&255,e[x++]=f&255,i=s}return e}function wt(e,r){W.setUint32(z.position+e,a-z.position-e);let t=z;z=null,r(t[0]),r(t[1])}let en=new Li({useRecords:!1});en.pack;en.pack;const Vi=512,Ni=1024;var Gi="https://izx.dalukuankuan.com/",rn="https://i-desk-ver.izhenxiang.com/",tn,Ji=async e=>{var r,t;return e=await e,t=[],r=t.push.bind(t),e.on("data",r),new Promise((n,i)=>(e.on("end",()=>{n(Buffer.concat(t))}),e.on("error",i)))},Zi=e=>Ji(nn(e));tn=e=>{var r;return r=y.net.request(e),r.end(),new Promise((t,n)=>(r.on("error",i=>{n(i)}),r.on("response",i=>{if(i.statusCode!==200){n(i);return}t(i)})))};var nn=e=>tn(e),De={};De.version="1.0.0";De.encode=function(r){return r.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")};De.decode=function(r){return r+=Array(5-r.length%4).join("="),r=r.replace(/\-/g,"+").replace(/\_/g,"/"),new Buffer(r,"base64")};De.validate=function(r){return/^[A-Za-z0-9\-_]+$/.test(r)};var cr=De;var Se,sn,Ve,tr,Pr,Ce,Wr,on,an,Cr,He,un,Er,Ir,Ye,gr,nr;an=xi.promisify(Ut.brotliDecompress);var fn=()=>(y.app.relaunch(),y.app.exit());Se=q.join(jt.ROOT,"v");oe.mkdirSync(Se,{recursive:!0});sn="sha512";Ye=void 0;var ln=()=>{ie(Ye),Ye=void 0},cn=()=>{ln(),Ye=de.update({width:400,height:500,resizable:!1})};He=e=>Zi(rn+e);un=e=>{var r;return r=hi.createHash(sn),new Promise(t=>oe.createReadStream(e).on("data",r.update.bind(r)).on("end",()=>{t(r.digest().slice(0,8))}))};gr=(()=>{var e;return{v:e}=Ge.default,e&&le.decode(e)})();var Br=()=>le.PACKAGE_JSON().version,Hi=async()=>["desk",await Br(),ge.default.type(),ge.default.release(),ge.default.arch(),"ol"].join(" ");Wr=gi+"/"+ji+"/";nr=le.ver_int(Br());Ce=0;Ir=async()=>{var e,r;e=le.encode(parseInt(new Date/1e3)),r=Wr+"v?"+e;try{Ce=await He(r)}catch{console.error("❌",r)}return Ce};on=async e=>{var r,t,n,i,s,f,x,p,m,O,_,U,A,C,Y,G,he,K;if(e||(e=Ce||await Ir()),!!e&&(K=e.readUintBE(0,6),!(nr>=K))){if(n=le.encode(K),r=q.join(Se,n),oe.existsSync(q.join(r,le.package_json))&&K===gr)return r;for(G=cr.encode(await He(Wr+cr.encode(e))),[t,i,x]=Ii(await an(await He(G))),U=P=>je.mkdir(q.join(r,P),{recursive:!0}),await Promise.all(t.map(U)),C=q.dirname(__dirname),A=m=0,O=i.length;m<O;A=++m)if(p=i[A],s=q.join(r,p),f=x[A],Y=async P=>Buffer.compare(f,await un(P))===0,!(oe.existsSync(s)&&await Y(s))){if(await U(q.dirname(p)),_=q.join(C,p),oe.existsSync(_)&&await Y(_)){await je.copyFile(_,s);continue}if(he=oe.createWriteStream(s),(await nn(rn+cr.encode(f))).pipe(Ut.createBrotliDecompress()).pipe(he),await new Promise(P=>{he.on("finish",P)}),!await Y(s))return}return Ge.default.v=n,gr=K,r}};var dn=async()=>{var e,r;return e=await Ir(),e&&(r=nr<e.readUintBE(0,6),r)?e:0};Cr=async()=>{var e;(e=await dn())&&await hn(e)};setInterval(Cr,864e5);Ve=tr=Pr=void 0;Er=()=>tr=new Promise(e=>Pr=e);Er();var Yi=()=>tr,hn=(...e)=>(Ve||(Ve=on(...e).then(async r=>{r&&(Pr([Ce,JSON.parse(await je.readFile(q.join(r,le.package_json),"utf8")).description]),Er())}).finally(()=>{Ve=!1})),tr);setTimeout(async()=>{var e,r,t,n;if(oe.existsSync(Se)){n=await je.readdir(Se,{withFileTypes:!0});for(r of n)r.isDirectory()&&({name:t}=r,le.decode(t)<nr&&await je.rm(q.join(Se,t),{recursive:!0,force:!0}))}if(e=parseInt(new Date/864e5),e!==Ge.default.update_check)return Ge.default.update_check=e,await Cr()},15e3);var Ki=Object.freeze(Object.defineProperty({__proto__:null,relaunch:fn,x:ln,show:cn,ver_now:Br,ua_now:Hi,update_check:dn,update_promise:Yi,update:hn},Symbol.toStringTag,{value:"Module"})),xn={ID:""},Dr=new Proxy({},{get:(e,r)=>t=>{var n,i,s,f;return{width:s,height:i}=y.screen.getPrimaryDisplay().size,n={width:s,height:i,roundedCorners:!1,transparent:!0,resizable:!1,hasShadow:!1},r.startsWith("confirm")&&(n.webPreferences=$e({},t.webPreferences)),f=de[r](n),f.setAlwaysOnTop(!0,"screen-saver"),f.setPosition(0,0),f.setVisibleOnAllWorkspaces(!0,{visibleOnFullScreen:!0}),f}}),me={},zr={},Xi=require("./-.node");const gt=ge.default;let vr;(gt.platform()==="win32"||gt.platform()==="darwin")&&(vr=Xi.getIcon);const Qi=(e,r=64)=>{if(!!vr)return vr(e,r)};var es=Qi,ir={};Object.defineProperty(ir,"__esModule",{value:!0});const se=me,rs=ge.default,dr=e=>{if(!(!se.addon||!se.addon.getMonitorInfo))return se.addon.getMonitorInfo(e)};class ts{constructor(r){this.id=r}getBounds(){return dr(this.id).bounds}getWorkArea(){return dr(this.id).workArea}isPrimary(){return dr(this.id).isPrimary}getScaleFactor(){if(!se.addon||!se.addon.getMonitorScaleFactor)return;const r=rs.release().split(".").map(t=>parseInt(t,10));return r[0]>8||r[0]===8&&r[1]>=1?se.addon.getMonitorScaleFactor(this.id):1}isValid(){return se.addon&&se.addon.getMonitorInfo}}ir.Monitor=ts;var sr={};Object.defineProperty(sr,"__esModule",{value:!0});class ns{getBounds(){return{x:0,y:0,width:0,height:0}}getWorkArea(){return{x:0,y:0,width:0,height:0}}isPrimary(){return!1}getScaleFactor(){return 1}isValid(){return!1}}sr.EmptyMonitor=ns;var is=ae.commonjsGlobal&&ae.commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zr,"__esModule",{value:!0});const g=me,ss=is(es),os=ir,as=sr;class Ke{constructor(r){if(!g.addon)return;this.id=r;const{processId:t,path:n}=g.addon.initWindow(r);this.processId=t,this.path=n}getBounds(){if(!g.addon)return;const r=g.addon.getWindowBounds(this.id);if(process.platform==="win32"){const t=this.getMonitor().getScaleFactor();r.x=Math.floor(r.x/t),r.y=Math.floor(r.y/t),r.width=Math.floor(r.width/t),r.height=Math.floor(r.height/t)}return r}setBounds(r){if(!g.addon)return;const t=Object.assign(Object.assign({},this.getBounds()),r);if(process.platform==="win32"){const n=this.getMonitor().getScaleFactor();t.x=Math.floor(t.x*n),t.y=Math.floor(t.y*n),t.width=Math.floor(t.width*n),t.height=Math.floor(t.height*n),g.addon.setWindowBounds(this.id,t)}else process.platform==="darwin"&&g.addon.setWindowBounds(this.id,t)}getTitle(){if(!!g.addon)return g.addon.getWindowTitle(this.id)}getMonitor(){return!g.addon||!g.addon.getMonitorFromWindow?new as.EmptyMonitor:new os.Monitor(g.addon.getMonitorFromWindow(this.id))}show(){!g.addon||!g.addon.showWindow||g.addon.showWindow(this.id,"show")}hide(){!g.addon||!g.addon.showWindow||g.addon.showWindow(this.id,"hide")}minimize(){!g.addon||(process.platform==="win32"?g.addon.showWindow(this.id,"minimize"):process.platform==="darwin"&&g.addon.setWindowMinimized(this.id,!0))}restore(){!g.addon||(process.platform==="win32"?g.addon.showWindow(this.id,"restore"):process.platform==="darwin"&&g.addon.setWindowMinimized(this.id,!1))}maximize(){!g.addon||(process.platform==="win32"?g.addon.showWindow(this.id,"maximize"):process.platform==="darwin"&&g.addon.setWindowMaximized(this.id))}bringToTop(){!g.addon||(process.platform==="darwin"?g.addon.bringWindowToTop(this.id,this.processId):g.addon.bringWindowToTop(this.id))}redraw(){!g.addon||!g.addon.redrawWindow||g.addon.redrawWindow(this.id)}isWindow(){if(!!g.addon){if(process.platform==="win32")return this.path&&this.path!==""&&g.addon.isWindow(this.id);if(process.platform==="darwin")return this.path&&this.path!==""&&!!g.addon.initWindow(this.id)}}isVisible(){return!g.addon||!g.addon.isWindowVisible?!0:g.addon.isWindowVisible(this.id)}toggleTransparency(r){!g.addon||!g.addon.toggleWindowTransparency||g.addon.toggleWindowTransparency(this.id,r)}setOpacity(r){!g.addon||!g.addon.setWindowOpacity||g.addon.setWindowOpacity(this.id,r)}getOpacity(){return!g.addon||!g.addon.getWindowOpacity?1:g.addon.getWindowOpacity(this.id)}getIcon(r=64){return ss.default(this.path,r)}setOwner(r){if(!g.addon||!g.addon.setWindowOwner)return;let t=r;r instanceof Ke?t=r.id:r||(t=0),g.addon.setWindowOwner(this.id,t)}getOwner(){if(!(!g.addon||!g.addon.getWindowOwner))return new Ke(g.addon.getWindowOwner(this.id))}}zr.Window=Ke;var us=require("./..node"),fs=ae.commonjsGlobal&&ae.commonjsGlobal.__awaiter||function(e,r,t,n){function i(s){return s instanceof t?s:new t(function(f){f(s)})}return new(t||(t=Promise))(function(s,f){function x(O){try{m(n.next(O))}catch(_){f(_)}}function p(O){try{m(n.throw(O))}catch(_){f(_)}}function m(O){O.done?s(O.value):i(O.value).then(x,p)}m((n=n.apply(e,r||[])).next())})};Object.defineProperty(me,"__esModule",{value:!0});const Ne=zr;me.Window=Ne.Window;const ls=wi.default,vt=ge.default,cs=ir,ds=sr;let B;me.addon=B;(vt.platform()==="win32"||vt.platform()==="darwin")&&(me.addon=B=us);let yt=null,Fe=[];class hs extends ls.EventEmitter{constructor(){super(),this.requestAccessibility=()=>!B||!B.requestAccessibility?!0:B.requestAccessibility(),this.getActiveWindow=()=>{if(!!B)return new Ne.Window(B.getActiveWindow())},this.getWindows=()=>!B||!B.getWindows?[]:B.getWindows().map(t=>new Ne.Window(t)).filter(t=>t.isWindow()),this.getMonitors=()=>!B||!B.getMonitors?[]:B.getMonitors().map(t=>new cs.Monitor(t)),this.getPrimaryMonitor=()=>process.platform==="win32"?this.getMonitors().find(t=>t.isPrimary):new ds.EmptyMonitor,this.createProcess=(t,n="")=>{if(!(!B||!B.createProcess))return B.createProcess(t,n)};let r;!B||(this.on("newListener",t=>{if(t==="window-activated"&&(r=B.getActiveWindow()),Fe.indexOf(t)===-1){if(t==="window-activated")yt=setInterval(()=>fs(this,void 0,void 0,function*(){const n=B.getActiveWindow();r!==n&&(r=n,this.emit("window-activated",new Ne.Window(n)))}),50);else return;Fe.push(t)}}),this.on("removeListener",t=>{this.listenerCount(t)>0||(t==="window-activated"&&clearInterval(yt),Fe=Fe.filter(n=>n!==t))}))}}const xs=new hs;var pn=me.windowManager=xs,Lr,Z,yr,Fr,wn,gn,vn,yn,mn,bn,T;({recbar:bn,draw:yn}=de);T=void 0;Z=void 0;({draw:mn}=Dr);var ps=(e,[r,t,n,i])=>{var s;Z||(e===0?Z=mn():(s={roundedCorners:!1,transparent:!0,resizable:!1,width:n,height:i},Z=yn(s),Z.setAlwaysOnTop(!0,"screen-saver"),Z.setPosition(r,t),Z.setVisibleOnAllWorkspaces(!0,{visibleOnFullScreen:!0})),Z.on("close",()=>Z=void 0),_n())},_n=()=>{Te(),Z.focus()},ws=()=>{ie(Z),Z=void 0};yr=["CommandOrControl+R","CommandOrControl+W","CommandOrControl+Q","Alt+F4","F5"];Lr={"browser-window-focus":()=>{var e;for(e of yr)y.globalShortcut.register(e,()=>{})},"browser-window-blur":()=>{var e;for(e of yr)y.globalShortcut.unregister(e,()=>{})}};var qr=e=>{var r;return e==="camera"?r=500:r=696+30,wn(r)};wn=e=>{var r,t,n,i,s,f,x,p;s=Object.entries(Lr);for(p of s)[n,r]=p,y.app.on(n,r);return Us(),t=48+40,i={roundedCorners:!1,transparent:!0,resizable:!1,width:e,height:t},T=bn(i),T.on("close",()=>T=void 0),{width:x,height:f}=y.screen.getPrimaryDisplay().workArea,T.setBounds({x:Math.round((x-e)/2),y:f-28-t,width:e,height:t}),Te(),Pe(),new Promise(m=>T.webContents.on("did-finish-load",()=>{Te(),T.focus(),m(T)}))};var Te=()=>{T&&(T.setAlwaysOnTop(!0,"screen-saver"),T.moveTop())};gn=async function(){var e,r,t,n,i,s,f;return{width:f,height:s}=y.screen.getPrimaryDisplay().workArea,e=[0,0,f,s],n=await T.webContents.executeJavaScript("localStorage",!0),i=JSON.parse(n.record),i.src==="camera"?(t=Ft(),r=t.getBounds(),e=[r.x,r.y,r.width,r.height]):i.area!==0&&n.area&&(e=JSON.parse(n.area),e.length!==4&&(e=void 0)),e||(e=[0,0,f,s]),e};var gs=()=>{var e,r,t,n,i,s,f,x,p;n=T.getPosition(),[t,r]=T.getSize(),[p,e]=T.size,e=48+40,{width:x,height:f}=y.screen.getPrimaryDisplay().bounds,i=n[0]+Math.round((t-p)/2),i<0&&(i=0),i>x-p&&(i=x-p),s=n[1]-(48-32),s<0&&(s=0),s>f-e&&(s=f-e),T.setBounds({x:i,y:s,width:p,height:e}),Te()},vs=async()=>{var e,r,t,n,i,s,f,x;[f,x,i,e]=await gn(),T.getPosition(),T.size=T.getSize(),s=88,r=32,{width:n,height:t}=y.screen.getPrimaryDisplay().bounds,x>60?x=x-r-5:x=0,f=f+Math.round((i-s)/2),f<0&&(f=0),f>n-s&&(f=n-s),T.setBounds({x:f,y:x,width:s,height:r}),T.moveTop()};Fr=()=>{var e,r,t,n;t=Object.entries(Lr);for(n of t)[r,e]=n,y.app.off(r,e);Un(),Lt()};var ys=()=>{Fr(),Xe("show")},ms=()=>{Fr(),Xe()},bs=()=>{T.hide()};vn=(...e)=>y.desktopCapturer.getSources({types:e,thumbnailSize:{width:0,height:0}});var _s=async()=>{var e,r;r=await vn("screen");for(e of r)return e.id},Ss=async()=>{var e,r,t,n,i,s,f,x,p,m,O,_,U,A,C;({bounds:e}=y.screen.getPrimaryDisplay()),{scaleFactor:O}=y.screen.getPrimaryDisplay(),s=new Map,p=await y.desktopCapturer.getSources({types:["window"],fetchWindowIcons:!1,thumbnailSize:{width:320*O,height:180*O}});for(n of p)s.set(Math.floor(n.id.split(":")[1]),[n.thumbnail.toDataURL(),n.name]);x=[],m=pn.getWindows();for(n of m)if({id:i}=n,!process.execPath.startsWith(n.path)&&(f=s.get(i),f)){if({x:A,y:C,width:U,height:t}=n.getBounds(),A+U<=0&&A<=0||A+U>e.width&&A>e.width||C+t<=0&&C<=0||C+t>e.height&&C>e.height)continue;_=e.width-A,U>_&&(U=_),r=e.height-C,t>r&&(t=r),A<0&&(A=0),C<0&&(C=0),x.push(f.concat([i,A,C,U,t]))}return x},Os=e=>{y.BrowserWindow.getAllWindows().forEach(r=>{var t;if({hash:t}=new URL(r.webContents.getURL()),!e&&t.slice(1)==="camera"){ie(r);return}return r.hide()})},Sn=function(){T!==void 0&&!T.isDestroyed()&&T.webContents.send("quick_stop","stop"),setTimeout(()=>{if(T!==void 0&&!T.isDestroyed())return fn()},5e3)},On=function(){T!==void 0&&!T.isDestroyed()&&T.webContents.send("quick_cmd","pause")},ks=function(){T!==void 0&&!T.isDestroyed()&&T.webContents.send("quick_cmd","resume")},Ts=Object.freeze(Object.defineProperty({__proto__:null,draw:ps,draw_top:_n,draw_x:ws,工具条:qr,top:Te,expand:gs,fold:vs,cancel:ys,end:ms,hide:bs,screen_source:_s,win_source:Ss,stop:Os,send_quick_stop:Sn,send_quick_pause:On,send_quick_resume:ks},Symbol.toStringTag,{value:"Module"})),kn,Q;({guide:kn}=de);Q=void 0;var As=function(){return ie(Q),Q=void 0,ce()},Tn=function(){if(Q!==void 0&&!Q.isDestroyed()){Q.show(),mr();return}Q=kn({width:520,height:510,center:!0,roundedCorners:!1,resizable:!1,transparent:!0}),mr()},mr=function(){Q&&!Q.isDestroyed()&&Q.moveTop()},$s=Object.freeze(Object.defineProperty({__proto__:null,x:As,show:Tn,top_once:mr},Symbol.toStringTag,{value:"Module"}));var or,Vr,An,br,Nr,Ms,Gr,$n,Mn,Ee;ge.default.platform();({Menu:Vr,Tray:An,app:br,globalShortcut:Ms}=require("electron"));Ee=new An(q.join(Ar,"trayTemplate.png"));Gr=[{label:"我的空间",click:()=>{y.shell.openExternal(Gi+"video_library.html?user_token="+xn.ID)}},{label:"操作指引",click:Tn},{label:"检测更新",click:cn},{type:"separator"}];or=$n=Vr.buildFromTemplate([{label:"显示界面",click:ce},{label:"快速录制",click:mi},...Gr,{label:"退出",click:()=>(br.quiting=!0,br.quit())}]);Mn=Vr.buildFromTemplate([{label:"结束录制",click:Sn},...Gr]);Nr=["click",()=>{ce()}];Ee.on("right-click",e=>{Ee.popUpContextMenu(or)});var Us=()=>{Ee.off(...Nr),or=Mn},Un=()=>{Ee.on(...Nr),or=$n};var jn;jn=e=>{var r,t,n,i,s,f,x,p;e&&(e.devToolsWebContents||({webContents:s}=e,r=new y.BrowserWindow({minimizable:!1,maximizable:!1}),[i,t]=e.getSize(),[x,p]=e.getPosition(),{width:f,height:n}=y.screen.getPrimaryDisplay().workArea,s.setDevToolsWebContents(r.webContents),s.openDevTools({mode:"detach"}),i>t?(p=0,i=0,t+=20,n-=t):(x=0,t=0,f-=i),r.setPosition(i,t),e.setPosition(x,p),r.setSize(f,n),e.focus()))};var js=()=>{y.globalShortcut.register("CmdOrCtrl+Alt+I",()=>jn(y.BrowserWindow.getFocusedWindow()))},Rn,H;({count_down:Rn}=de);H=void 0;var Pn=()=>{var e;if(H){H.focus();return}e=240,H=Rn({width:e,height:e,transparent:!0,resizable:!1,hasShadow:!1}),H.on("close",()=>{H=void 0}),H.setAlwaysOnTop(!0,"screen-saver"),H.on("show",()=>{var r,t;t=y.BrowserWindow.getAllWindows();for(r of t)r.webContents.getURL().endsWith("/#main")||r.setVisibleOnAllWorkspaces(!0,{visibleOnFullScreen:!0})})},Rs={hide:()=>{H!=null&&H.hide()},close:()=>{H!=null&&H.close(),Te()}},Ps=typeof ae.commonjsGlobal=="object"&&ae.commonjsGlobal&&ae.commonjsGlobal.Object===Object&&ae.commonjsGlobal,Ws=Ps,Cs=Ws,Es=typeof self=="object"&&self&&self.Object===Object&&self,Is=Cs||Es||Function("return this")(),Bs=Is,Ds=Bs,zs=Ds.Symbol,Jr=zs;function Ls(e,r){for(var t=-1,n=e==null?0:e.length,i=Array(n);++t<n;)i[t]=r(e[t],t,e);return i}var Fs=Ls,qs=Array.isArray,Vs=qs,mt=Jr,Wn=Object.prototype,Ns=Wn.hasOwnProperty,Gs=Wn.toString,Ue=mt?mt.toStringTag:void 0;function Js(e){var r=Ns.call(e,Ue),t=e[Ue];try{e[Ue]=void 0;var n=!0}catch{}var i=Gs.call(e);return n&&(r?e[Ue]=t:delete e[Ue]),i}var Zs=Js,Hs=Object.prototype,Ys=Hs.toString;function Ks(e){return Ys.call(e)}var Xs=Ks,bt=Jr,Qs=Zs,eo=Xs,ro="[object Null]",to="[object Undefined]",_t=bt?bt.toStringTag:void 0;function no(e){return e==null?e===void 0?to:ro:_t&&_t in Object(e)?Qs(e):eo(e)}var io=no;function so(e){return e!=null&&typeof e=="object"}var oo=so,ao=io,uo=oo,fo="[object Symbol]";function lo(e){return typeof e=="symbol"||uo(e)&&ao(e)==fo}var co=lo,St=Jr,ho=Fs,xo=Vs,po=co,wo=1/0,Ot=St?St.prototype:void 0,kt=Ot?Ot.toString:void 0;function Cn(e){if(typeof e=="string")return e;if(xo(e))return ho(e,Cn)+"";if(po(e))return kt?kt.call(e):"";var r=e+"";return r=="0"&&1/e==-wo?"-0":r}var go=Cn,vo=go;function yo(e){return e==null?"":vo(e)}var ar=yo;function mo(e,r,t){var n=-1,i=e.length;r<0&&(r=-r>i?0:i+r),t=t>i?i:t,t<0&&(t+=i),i=r>t?0:t-r>>>0,r>>>=0;for(var s=Array(i);++n<i;)s[n]=e[n+r];return s}var bo=mo,_o=bo;function So(e,r,t){var n=e.length;return t=t===void 0?n:t,!r&&t>=n?e:_o(e,r,t)}var Oo=So,ko="\\ud800-\\udfff",To="\\u0300-\\u036f",Ao="\\ufe20-\\ufe2f",$o="\\u20d0-\\u20ff",Mo=To+Ao+$o,Uo="\\ufe0e\\ufe0f",jo="\\u200d",Ro=RegExp("["+jo+ko+Mo+Uo+"]");function Po(e){return Ro.test(e)}var En=Po;function Wo(e){return e.split("")}var Co=Wo,In="\\ud800-\\udfff",Eo="\\u0300-\\u036f",Io="\\ufe20-\\ufe2f",Bo="\\u20d0-\\u20ff",Do=Eo+Io+Bo,zo="\\ufe0e\\ufe0f",Lo="["+In+"]",_r="["+Do+"]",Sr="\\ud83c[\\udffb-\\udfff]",Fo="(?:"+_r+"|"+Sr+")",Bn="[^"+In+"]",Dn="(?:\\ud83c[\\udde6-\\uddff]){2}",zn="[\\ud800-\\udbff][\\udc00-\\udfff]",qo="\\u200d",Ln=Fo+"?",Fn="["+zo+"]?",Vo="(?:"+qo+"(?:"+[Bn,Dn,zn].join("|")+")"+Fn+Ln+")*",No=Fn+Ln+Vo,Go="(?:"+[Bn+_r+"?",_r,Dn,zn,Lo].join("|")+")",Jo=RegExp(Sr+"(?="+Sr+")|"+Go+No,"g");function Zo(e){return e.match(Jo)||[]}var Ho=Zo,Yo=Co,Ko=En,Xo=Ho;function Qo(e){return Ko(e)?Xo(e):Yo(e)}var ea=Qo,ra=Oo,ta=En,na=ea,ia=ar;function sa(e){return function(r){r=ia(r);var t=ta(r)?na(r):void 0,n=t?t[0]:r.charAt(0),i=t?ra(t,1).join(""):r.slice(1);return n[e]()+i}}var oa=sa,aa=oa,ua=aa("toUpperCase"),qn=ua,fa=ar,la=qn;function ca(e){return la(fa(e).toLowerCase())}var da=ca;function ha(e,r,t,n){var i=-1,s=e==null?0:e.length;for(n&&s&&(t=e[++i]);++i<s;)t=r(t,e[i],i,e);return t}var xa=ha;function pa(e){return function(r){return e==null?void 0:e[r]}}var wa=pa,ga=wa,va={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},ya=ga(va),ma=ya,ba=ma,_a=ar,Sa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Oa="\\u0300-\\u036f",ka="\\ufe20-\\ufe2f",Ta="\\u20d0-\\u20ff",Aa=Oa+ka+Ta,$a="["+Aa+"]",Ma=RegExp($a,"g");function Ua(e){return e=_a(e),e&&e.replace(Sa,ba).replace(Ma,"")}var ja=Ua,Ra=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Pa(e){return e.match(Ra)||[]}var Wa=Pa,Ca=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Ea(e){return Ca.test(e)}var Ia=Ea,Vn="\\ud800-\\udfff",Ba="\\u0300-\\u036f",Da="\\ufe20-\\ufe2f",za="\\u20d0-\\u20ff",La=Ba+Da+za,Nn="\\u2700-\\u27bf",Gn="a-z\\xdf-\\xf6\\xf8-\\xff",Fa="\\xac\\xb1\\xd7\\xf7",qa="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Va="\\u2000-\\u206f",Na=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Jn="A-Z\\xc0-\\xd6\\xd8-\\xde",Ga="\\ufe0e\\ufe0f",Zn=Fa+qa+Va+Na,Hn="['’]",Tt="["+Zn+"]",Ja="["+La+"]",Yn="\\d+",Za="["+Nn+"]",Kn="["+Gn+"]",Xn="[^"+Vn+Zn+Yn+Nn+Gn+Jn+"]",Ha="\\ud83c[\\udffb-\\udfff]",Ya="(?:"+Ja+"|"+Ha+")",Ka="[^"+Vn+"]",Qn="(?:\\ud83c[\\udde6-\\uddff]){2}",ei="[\\ud800-\\udbff][\\udc00-\\udfff]",_e="["+Jn+"]",Xa="\\u200d",At="(?:"+Kn+"|"+Xn+")",Qa="(?:"+_e+"|"+Xn+")",$t="(?:"+Hn+"(?:d|ll|m|re|s|t|ve))?",Mt="(?:"+Hn+"(?:D|LL|M|RE|S|T|VE))?",ri=Ya+"?",ti="["+Ga+"]?",e0="(?:"+Xa+"(?:"+[Ka,Qn,ei].join("|")+")"+ti+ri+")*",r0="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",t0="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",n0=ti+ri+e0,i0="(?:"+[Za,Qn,ei].join("|")+")"+n0,s0=RegExp([_e+"?"+Kn+"+"+$t+"(?="+[Tt,_e,"$"].join("|")+")",Qa+"+"+Mt+"(?="+[Tt,_e+At,"$"].join("|")+")",_e+"?"+At+"+"+$t,_e+"+"+Mt,t0,r0,Yn,i0].join("|"),"g");function o0(e){return e.match(s0)||[]}var a0=o0,u0=Wa,f0=Ia,l0=ar,c0=a0;function d0(e,r,t){return e=l0(e),r=t?void 0:r,r===void 0?f0(e)?c0(e):u0(e):e.match(r)||[]}var h0=d0,x0=xa,p0=ja,w0=h0,g0="['’]",v0=RegExp(g0,"g");function y0(e){return function(r){return x0(w0(p0(r).replace(v0,"")),e,"")}}var m0=y0,b0=da,_0=m0,S0=_0(function(e,r,t){return r=r.toLowerCase(),e+(t?b0(r):r)}),O0=S0;var k0=async e=>{var r;if(r=await Promise.resolve().then(function(){return require("./$.js")}).then(function(t){return t.index}),r.getAuthStatus(e)!=="authorized")return e==="screen"?e="ScreenCapture":e=qn(O0(e)),r[`askFor${e}Access`](),!0};var Ie,Zr,Hr,Yr,Kr;Ie=Hr=Zr=void 0;Yr=()=>{Zr=new Promise(e=>{Hr=e})};Yr();Kr=e=>{Ie.once("closed",()=>{Hr(e),Yr()}),ie(Ie)};var T0=()=>{Kr(!0)},A0=()=>{Kr(!1)},ni=(e,r=void 0)=>{var t;return t={width:275,height:190,modal:!0,isAlwaysOnTop:!0,visibleOnAllWorkspaces:!0},r!==void 0&&(t.webPreferences=$e({},r)),Ie=Dr["confirm_"+e](t),Ie.setAlwaysOnTop(!0,"screen-saver"),Zr},$0=async function(e,r,t,n="停止录制",i="继续录制",s=!0){var f,x,p,m;s&&On(),p="<p>"+r,t&&(p+="<br>");for(f in t)m=t[f],p+=f+": "+m+"<br>";return p+="</p>",x={additionalArguments:["--my_title="+e,"--my_tip="+p,"--my_yes="+n,"--my_no="+i]},await ni("err",x)},M0=Object.freeze(Object.defineProperty({__proto__:null,y:T0,n:A0,show:ni,show_err:$0},Symbol.toStringTag,{value:"Module"})),U0=e=>{var r;if(r=y.app.getLoginItemSettings().openAtLogin,r!==e)return y.app.setLoginItemSettings({openAtLogin:e})},j0=Object.freeze(Object.defineProperty({__proto__:null,auto_start:U0},Symbol.toStringTag,{value:"Module"})),R0=e=>{xn.ID=e},P0=Object.freeze(Object.defineProperty({__proto__:null,ID:R0},Symbol.toStringTag,{value:"Module"})),W0=function(){var e,r,t;return t=this.sender.getOwnerBrowserWindow(),r=t.getBounds(),e=n=>{var i,s;if(s=t[n],i=r[n],s&&i>s&&i-s<3){r[n]=s;return}t[n]=i},["height","width"].map(e),r},C0=function(e,r,t,n){var i,s;s=this.sender.getOwnerBrowserWindow();try{s.setBounds({x:Math.round(e),y:Math.round(r),width:t,height:n})}catch(f){i=f,console.error(JSON.stringify([e,r,t,n]),i)}},E0=Object.freeze(Object.defineProperty({__proto__:null,getBounds:W0,setBounds:C0},Symbol.toStringTag,{value:"Module"})),ii,ee;({preference:ii}=de);ee=void 0;var I0=function(){return ie(ee),ee=void 0,ce()},B0=function(){if(ee!==void 0&&!ee.isDestroyed()){ee.show(),Or();return}ee=ii({width:570,height:400,center:!0,roundedCorners:!1,resizable:!1,transparent:!0}),Or()},Or=function(){ee&&!ee.isDestroyed()&&ee.moveTop()},D0=Object.freeze(Object.defineProperty({__proto__:null,x:I0,show:B0,top_once:Or},Symbol.toStringTag,{value:"Module"}));var si,Xr,Qr,ve,oi;({area:si,win_area:oi}=Dr);ve=void 0;var z0=e=>{var r,t,n;t=void 0,n=pn.getWindows();for(r of n)if(e===r.id){t=r;break}t&&(ve.setAlwaysOnTop(!1),t.bringToTop(),Qr())};Qr=()=>{ve.setAlwaysOnTop(!0,"screen-saver")};Xr=e=>{ve=e(),Qr(),ve.on("close",()=>ve=void 0)};var L0=()=>Xr(oi),F0=()=>Xr(si),q0=()=>{qr(),ve.setIgnoreMouseEvents(!0,{forward:!0}),Pn()},V0=()=>{var e,r;return{x:e,y:r}=y.screen.getCursorScreenPoint(),[e,r]};function N0(e,r,t,n){var i;if(i=e==="camera",!i&&n){[L0,F0][n-1]();return}else Pn();qr(e)}var G0=(e,r,t,n)=>{Xe(),N0(e,r,t,n)},J0=e=>{y.shell.openExternal(e)},Z0=()=>jt.ROOT,H0=Object.freeze(Object.defineProperty({__proto__:null,userData:Z0,close:Xe,x:yi,count_down:Rs,permission:k0,confirm:M0,auto_update:Ki,auto_start:j0,recbar:Ts,USER:P0,camera:Ui,drag:E0,guide:$s,preference:D0,area:q0,wintop:z0,main:ce,mouse:V0,rec:G0,open:J0},Symbol.toStringTag,{value:"Module"}));process.on("exit",()=>{y.app.quit()});y.app.requestSingleInstanceLock()||(y.app.quit(),process.exit(0));y.app.commandLine.appendSwitch("webrtc-max-cpu-consumption-percentage","100");y.app.commandLine.appendSwitch("js-flags","--expose_gc --max-old-space-size=512");(()=>{var e,r,t,n,i,s;ce(),(t=y.app.dock)!=null&&t.hide(),e=(f,x)=>{var p,m,O,_;x instanceof Function&&y.ipcMain.handle(f.join("."),(U,A)=>x.apply(U,A)),O=Object.entries(x);for(_ of O)[m,p]=_,e([...f,m],p)},n=Object.entries(H0);for(s of n)[r,i]=s,e([r],i);Un(),js()})();vi(y.app,{"second-instance":ce,activate:ce});
