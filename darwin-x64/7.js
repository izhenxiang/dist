"use strict";var Pr=Object.defineProperty;var bt=Object.getOwnPropertySymbols;var Ir=Object.prototype.hasOwnProperty,jr=Object.prototype.propertyIsEnumerable;var St=(t,e,r)=>e in t?Pr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_t=(t,e)=>{for(var r in e||(e={}))Ir.call(e,r)&&St(t,r,e[r]);if(bt)for(var r of bt(e))jr.call(e,r)&&St(t,r,e[r]);return t};var m=require("electron"),Rr=require("os"),Y=require("fs"),N=require("path"),Dr=require("crypto"),Mt=require("zlib"),Mr=require("util"),re=require("./q.js"),we=require("fs/promises"),Ee=require("./u.js"),Ct=require("./w.js");function Cr(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var zt=Cr(Rr),zr="darwin",oe=t=>{if(!!t&&!t.isDestroyed()){t.close();try{t.destroy()}catch{}}},Lr=(t,e)=>{var r,i;for(r in e)i=e[r],t.on(r,i);return t};Xe=Ge=Ke=__dirname;var Ke=Ke,Ge=Ge,Xe=Xe,We,Lt;We="127.0.0.1",Lt="http://"+We,m.session.defaultSession.protocol.interceptStreamProtocol("http",(t,e)=>{var r,i,n,l,u,p,g,k,U;if(U=new URL(t.url),U.host===We)({pathname:u}=U),u==="/"&&(u+=".htm"),k=u.slice(u.lastIndexOf(".")+1),k.startsWith("htm")?l="text/html":l={js:"text/javascript",css:"text/css",svg:"image/svg+xml",woff2:"font/woff2"}[k]||"application/octet-stream",i=Y.createReadStream(Ge+u),e({data:i,statusCode:200,headers:{"content-type":l}});else{if(t.useSessionCookies=!0,t.partition="persist:I",p=m.net.request(t),p.on("response",_=>{var A,P;({headers:A,statusCode:P}=_),e({data:_},A,P)}),t.uploadData){g=t.uploadData;for(n of g)({bytes:r}=n),r&&p.write(r)}p.end()}});var he=new Proxy({},{get:(t,e)=>r=>{var i;return r=_t({skipTaskbar:!0,frame:!1,minimizable:!1,maximizable:!1,fullscreenable:!1,type:"toolbar",shadow:!1,hasShadow:!1,transparent:!0,webPreferences:{preload:N.join(Ke,"s.js"),webSecurity:!1}},r),i=new m.BrowserWindow(r),i.setMenu(null),e!=="main"&&i.setVisibleOnAllWorkspaces(!0,{visibleOnFullScreen:!0}),i.loadURL(Lt+"#"+e),i.once("ready-to-show",()=>i.show()),i.focus(),i}}),Wt;({main:Wt}=he);var de=(t=!0)=>{var e,r,i;if(r=m.BrowserWindow.getAllWindows(),r.length){for(e of r)if(e.webContents.getURL().endsWith("/#main")){i=e,i.isMinimized()&&i.restore();break}}i||(i=Wt({type:"",resizable:!1,height:590,width:426,skipTaskbar:!1})),!(!t&&!i.isVisible())&&(i.show(),i.moveTop(),i.focus())},Ft={ID:""},Ve;try{Ve=new TextDecoder}catch{}var x,te,s=0,W={},S,Q,V=0,K=0,z,X,F=[],b,kt={useRecords:!1,mapsAsObjects:!0};class $t{}const Vt=new $t;Vt.name="MessagePack 0xC1";var xe=!1,Nt=2;try{new Function("")}catch{Nt=1/0}class ye{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,r){if(x)return Gt(()=>(qe(),this?this.unpack(e,r):ye.prototype.unpack.call(kt,e,r)));te=r>-1?r:e.length,s=0,K=0,Q=null,z=null,x=e;try{b=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(i){throw x=null,e instanceof Uint8Array?i:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof ye){if(W=this,this.structures)return S=this.structures,Oe();(!S||S.length>0)&&(S=[])}else W=kt,(!S||S.length>0)&&(S=[]);return Oe()}unpackMultiple(e,r){let i,n=0;try{xe=!0;let l=e.length,u=this?this.unpack(e,l):Ie.unpack(e,l);if(r){for(r(u);s<l;)if(n=s,r(Oe())===!1)return}else{for(i=[u];s<l;)n=s,i.push(Oe());return i}}catch(l){throw l.lastPosition=n,l.values=i,l}finally{xe=!1,qe()}}_mergeStructures(e,r){e=e||[];for(let i=0,n=e.length;i<n;i++){let l=e[i];l&&(l.isShared=!0,i>=32&&(l.highByte=i-32>>5))}e.sharedLength=e.length;for(let i in r||[])if(i>=0){let n=e[i],l=r[i];l&&(n&&((e.restoreStructures||(e.restoreStructures=[]))[i]=n),e[i]=l)}return this.structures=e}decode(e,r){return this.unpack(e,r)}}function Oe(){try{if(!W.trusted&&!xe){let e=S.sharedLength||0;e<S.length&&(S.length=e)}let t=R();if(z&&(s=z.postBundlePosition),s==te)S.restoreStructures&&Ot(),S=null,x=null,X&&(X=null);else if(s>te){let e=new Error("Unexpected end of MessagePack data");throw e.incomplete=!0,e}else if(!xe)throw new Error("Data read, but end of buffer not reached");return t}catch(t){throw S.restoreStructures&&Ot(),qe(),(t instanceof RangeError||t.message.startsWith("Unexpected end of buffer"))&&(t.incomplete=!0),t}}function Ot(){for(let t in S.restoreStructures)S[t]=S.restoreStructures[t];S.restoreStructures=null}function R(){let t=x[s++];if(t<160)if(t<128){if(t<64)return t;{let e=S[t&63]||W.getStructures&&qt()[t&63];return e?(e.read||(e.read=Ye(e,t&63)),e.read()):t}}else if(t<144)if(t-=128,W.mapsAsObjects){let e={};for(let r=0;r<t;r++)e[Ht()]=R();return e}else{let e=new Map;for(let r=0;r<t;r++)e.set(R(),R());return e}else{t-=144;let e=new Array(t);for(let r=0;r<t;r++)e[r]=R();return e}else if(t<192){let e=t-160;if(K>=s)return Q.slice(s-V,(s+=e)-V);if(K==0&&te<140){let r=e<16?Qe(e):Jt(e);if(r!=null)return r}return Ne(e)}else{let e;switch(t){case 192:return null;case 193:return z?(e=R(),e>0?z[1].slice(z.position1,z.position1+=e):z[0].slice(z.position0,z.position0-=e)):Vt;case 194:return!1;case 195:return!0;case 196:return Fe(x[s++]);case 197:return e=b.getUint16(s),s+=2,Fe(e);case 198:return e=b.getUint32(s),s+=4,Fe(e);case 199:return ae(x[s++]);case 200:return e=b.getUint16(s),s+=2,ae(e);case 201:return e=b.getUint32(s),s+=4,ae(e);case 202:if(e=b.getFloat32(s),W.useFloat32>2){let r=et[(x[s]&127)<<1|x[s+1]>>7];return s+=4,(r*e+(e>0?.5:-.5)>>0)/r}return s+=4,e;case 203:return e=b.getFloat64(s),s+=8,e;case 204:return x[s++];case 205:return e=b.getUint16(s),s+=2,e;case 206:return e=b.getUint32(s),s+=4,e;case 207:return W.int64AsNumber?(e=b.getUint32(s)*4294967296,e+=b.getUint32(s+4)):e=b.getBigUint64(s),s+=8,e;case 208:return b.getInt8(s++);case 209:return e=b.getInt16(s),s+=2,e;case 210:return e=b.getInt32(s),s+=4,e;case 211:return W.int64AsNumber?(e=b.getInt32(s)*4294967296,e+=b.getUint32(s+4)):e=b.getBigInt64(s),s+=8,e;case 212:if(e=x[s++],e==114)return Pt(x[s++]&63);{let r=F[e];if(r)return r.read?(s++,r.read(R())):r.noBuffer?(s++,r()):r(x.subarray(s,++s));throw new Error("Unknown extension "+e)}case 213:return e=x[s],e==114?(s++,Pt(x[s++]&63,x[s++])):ae(2);case 214:return ae(4);case 215:return ae(8);case 216:return ae(16);case 217:return e=x[s++],K>=s?Q.slice(s-V,(s+=e)-V):Fr(e);case 218:return e=b.getUint16(s),s+=2,K>=s?Q.slice(s-V,(s+=e)-V):$r(e);case 219:return e=b.getUint32(s),s+=4,K>=s?Q.slice(s-V,(s+=e)-V):Vr(e);case 220:return e=b.getUint16(s),s+=2,Tt(e);case 221:return e=b.getUint32(s),s+=4,Tt(e);case 222:return e=b.getUint16(s),s+=2,Bt(e);case 223:return e=b.getUint32(s),s+=4,Bt(e);default:if(t>=224)return t-256;if(t===void 0){let r=new Error("Unexpected end of MessagePack data");throw r.incomplete=!0,r}throw new Error("Unknown MessagePack token "+t)}}}const Wr=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Ye(t,e){function r(){if(r.count++>Nt){let n=t.read=new Function("r","return function(){return {"+t.map(l=>Wr.test(l)?l+":r()":"["+JSON.stringify(l)+"]:r()").join(",")+"}}")(R);return t.highByte===0&&(t.read=Ut(e,t.read)),n()}let i={};for(let n=0,l=t.length;n<l;n++){let u=t[n];i[u]=R()}return i}return r.count=0,t.highByte===0?Ut(e,r):r}const Ut=(t,e)=>function(){let r=x[s++];if(r===0)return e();let i=t<32?-(t+(r<<5)):t+(r<<5),n=S[i]||qt()[i];if(!n)throw new Error("Record id is not defined for "+i);return n.read||(n.read=Ye(n,t)),n.read()};function qt(){let t=Gt(()=>(x=null,W.getStructures()));return S=W._mergeStructures(t,S)}var Ne=_e,Fr=_e,$r=_e,Vr=_e;function _e(t){let e;if(t<16&&(e=Qe(t)))return e;if(t>64&&Ve)return Ve.decode(x.subarray(s,s+=t));const r=s+t,i=[];for(e="";s<r;){const n=x[s++];if((n&128)===0)i.push(n);else if((n&224)===192){const l=x[s++]&63;i.push((n&31)<<6|l)}else if((n&240)===224){const l=x[s++]&63,u=x[s++]&63;i.push((n&31)<<12|l<<6|u)}else if((n&248)===240){const l=x[s++]&63,u=x[s++]&63,p=x[s++]&63;let g=(n&7)<<18|l<<12|u<<6|p;g>65535&&(g-=65536,i.push(g>>>10&1023|55296),g=56320|g&1023),i.push(g)}else i.push(n);i.length>=4096&&(e+=M.apply(String,i),i.length=0)}return i.length>0&&(e+=M.apply(String,i)),e}function Tt(t){let e=new Array(t);for(let r=0;r<t;r++)e[r]=R();return e}function Bt(t){if(W.mapsAsObjects){let e={};for(let r=0;r<t;r++)e[Ht()]=R();return e}else{let e=new Map;for(let r=0;r<t;r++)e.set(R(),R());return e}}var M=String.fromCharCode;function Jt(t){let e=s,r=new Array(t);for(let i=0;i<t;i++){const n=x[s++];if((n&128)>0){s=e;return}r[i]=n}return M.apply(String,r)}function Qe(t){if(t<4)if(t<2){if(t===0)return"";{let e=x[s++];if((e&128)>1){s-=1;return}return M(e)}}else{let e=x[s++],r=x[s++];if((e&128)>0||(r&128)>0){s-=2;return}if(t<3)return M(e,r);let i=x[s++];if((i&128)>0){s-=3;return}return M(e,r,i)}else{let e=x[s++],r=x[s++],i=x[s++],n=x[s++];if((e&128)>0||(r&128)>0||(i&128)>0||(n&128)>0){s-=4;return}if(t<6){if(t===4)return M(e,r,i,n);{let l=x[s++];if((l&128)>0){s-=5;return}return M(e,r,i,n,l)}}else if(t<8){let l=x[s++],u=x[s++];if((l&128)>0||(u&128)>0){s-=6;return}if(t<7)return M(e,r,i,n,l,u);let p=x[s++];if((p&128)>0){s-=7;return}return M(e,r,i,n,l,u,p)}else{let l=x[s++],u=x[s++],p=x[s++],g=x[s++];if((l&128)>0||(u&128)>0||(p&128)>0||(g&128)>0){s-=8;return}if(t<10){if(t===8)return M(e,r,i,n,l,u,p,g);{let k=x[s++];if((k&128)>0){s-=9;return}return M(e,r,i,n,l,u,p,g,k)}}else if(t<12){let k=x[s++],U=x[s++];if((k&128)>0||(U&128)>0){s-=10;return}if(t<11)return M(e,r,i,n,l,u,p,g,k,U);let _=x[s++];if((_&128)>0){s-=11;return}return M(e,r,i,n,l,u,p,g,k,U,_)}else{let k=x[s++],U=x[s++],_=x[s++],A=x[s++];if((k&128)>0||(U&128)>0||(_&128)>0||(A&128)>0){s-=12;return}if(t<14){if(t===12)return M(e,r,i,n,l,u,p,g,k,U,_,A);{let P=x[s++];if((P&128)>0){s-=13;return}return M(e,r,i,n,l,u,p,g,k,U,_,A,P)}}else{let P=x[s++],J=x[s++];if((P&128)>0||(J&128)>0){s-=14;return}if(t<15)return M(e,r,i,n,l,u,p,g,k,U,_,A,P,J);let H=x[s++];if((H&128)>0){s-=15;return}return M(e,r,i,n,l,u,p,g,k,U,_,A,P,J,H)}}}}}function Et(){let t=x[s++],e;if(t<192)e=t-160;else switch(t){case 217:e=x[s++];break;case 218:e=b.getUint16(s),s+=2;break;case 219:e=b.getUint32(s),s+=4;break;default:throw new Error("Expected string")}return _e(e)}function Fe(t){return W.copyBuffers?Uint8Array.prototype.slice.call(x,s,s+=t):x.subarray(s,s+=t)}function ae(t){let e=x[s++];if(F[e])return F[e](x.subarray(s,s+=t));throw new Error("Unknown extension type "+e)}var At=new Array(4096);function Ht(){let t=x[s++];if(t>=160&&t<192){if(t=t-160,K>=s)return Q.slice(s-V,(s+=t)-V);if(!(K==0&&te<180))return Ne(t)}else return s--,R();let e=(t<<5^(t>1?b.getUint16(s):t>0?x[s]:0))&4095,r=At[e],i=s,n=s+t-3,l,u=0;if(r&&r.bytes==t){for(;i<n;){if(l=b.getUint32(i),l!=r[u++]){i=1879048192;break}i+=4}for(n+=3;i<n;)if(l=x[i++],l!=r[u++]){i=1879048192;break}if(i===n)return s=i,r.string;n-=3,i=s}for(r=[],At[e]=r,r.bytes=t;i<n;)l=b.getUint32(i),r.push(l),i+=4;for(n+=3;i<n;)l=x[i++],r.push(l);let p=t<16?Qe(t):Jt(t);return p!=null?r.string=p:r.string=Ne(t)}const Pt=(t,e)=>{var r=R();let i=t;e!==void 0&&(t=t<32?-((e<<5)+t):(e<<5)+t,r.highByte=e);let n=S[t];return n&&n.isShared&&((S.restoreStructures||(S.restoreStructures=[]))[t]=n),S[t]=r,r.read=Ye(r,i),r.read()};var Zt=typeof self=="object"?self:global;F[0]=()=>{};F[0].noBuffer=!0;F[101]=()=>{let t=R();return(Zt[t[0]]||Error)(t[1])};F[105]=t=>{let e=b.getUint32(s-4);X||(X=new Map);let r=x[s],i;r>=144&&r<160||r==220||r==221?i=[]:i={};let n={target:i};X.set(e,n);let l=R();return n.used?Object.assign(i,l):(n.target=l,l)};F[112]=t=>{let e=b.getUint32(s-4),r=X.get(e);return r.used=!0,r.target};F[115]=()=>new Set(R());const Kt=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(t=>t+"Array");F[116]=t=>{let e=t[0],r=Kt[e];if(!r)throw new Error("Could not find typed array for code "+e);return new Zt[r](Uint8Array.prototype.slice.call(t,1).buffer)};F[120]=()=>{let t=R();return new RegExp(t[0],t[1])};const Nr=[];F[98]=t=>{let e=(t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3],r=s;return s+=e-t.length,z=Nr,z=[Et(),Et()],z.position0=0,z.position1=0,z.postBundlePosition=s,s=r,R()};F[255]=t=>t.length==4?new Date((t[0]*16777216+(t[1]<<16)+(t[2]<<8)+t[3])*1e3):t.length==8?new Date(((t[0]<<22)+(t[1]<<14)+(t[2]<<6)+(t[3]>>2))/1e6+((t[3]&3)*4294967296+t[4]*16777216+(t[5]<<16)+(t[6]<<8)+t[7])*1e3):t.length==12?new Date(((t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3])/1e6+((t[4]&128?-281474976710656:0)+t[6]*1099511627776+t[7]*4294967296+t[8]*16777216+(t[9]<<16)+(t[10]<<8)+t[11])*1e3):new Date("invalid");function Gt(t){let e=te,r=s,i=V,n=K,l=Q,u=X,p=z,g=new Uint8Array(x.slice(0,te)),k=S,U=S.slice(0,S.length),_=W,A=xe,P=t();return te=e,s=r,V=i,K=n,Q=l,X=u,z=p,x=g,xe=A,S=k,S.splice(0,S.length,...U),W=_,b=new DataView(x.buffer,x.byteOffset,x.byteLength),P}function qe(){x=null,X=null,S=null}const et=new Array(147);for(let t=0;t<256;t++)et[t]=+("1e"+Math.floor(45.15-t*.30103));var Ie=new ye({useRecords:!1});const qr=Ie.unpack;Ie.unpackMultiple;Ie.unpack;let Jr=new Float32Array(1);new Uint8Array(Jr.buffer,0,4);let Te;try{Te=new TextEncoder}catch{}let Je,Xt;const je=typeof Buffer!="undefined",Ue=je?Buffer.allocUnsafeSlow:Uint8Array,Yt=je?Buffer:Uint8Array,It=je?4294967296:2144337920;let o,ge,I,a=0,L,C=null;const Hr=61440,Zr=/[\u0080-\uFFFF]/,fe=Symbol("record-id");class Kr extends ye{constructor(e){super(e);this.offset=0;let r,i,n,l,u=0,p=Yt.prototype.utf8Write?function(f,y,d){return o.utf8Write(f,y,d)}:Te&&Te.encodeInto?function(f,y){return Te.encodeInto(f,o.subarray(y)).written}:!1,g=this;e||(e={});let k=e&&e.sequential,U=e.structures||e.saveStructures,_=e.maxSharedStructures;if(_==null&&(_=U?32:0),_>8160)throw new Error("Maximum maxSharedStructure is 8160");e.structuredClone&&e.moreTypes==null&&(e.moreTypes=!0);let A=e.maxOwnStructures;A==null&&(A=U?32:64),!this.structures&&e.useRecords!=!1&&(this.structures=[]);let P=_>32||A+_>64,J=_+64,H=_+A+64;if(H>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let $=[],ne=0,Z=0;this.pack=this.encode=function(f,y){if(o||(o=new Ue(8192),I=new DataView(o.buffer,0,8192),a=0),L=o.length-10,L-a<2048?(o=new Ue(o.length),I=new DataView(o.buffer,0,o.length),L=o.length-10,a=0):a=a+7&2147483640,r=a,l=g.structuredClone?new Map:null,g.bundleStrings&&typeof f!="string"?(C=[],C.size=1/0):C=null,n=g.structures,n){n.uninitialized&&(n=g._mergeStructures(g.getStructures()));let d=n.sharedLength||0;if(d>_)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+n.sharedLength);if(!n.transitions){n.transitions=Object.create(null);for(let c=0;c<d;c++){let h=n[c];if(!h)continue;let O,v=n.transitions;for(let w=0,D=h.length;w<D;w++){let T=h[w];O=v[T],O||(O=v[T]=Object.create(null)),v=O}v[fe]=c+64}u=d}k||(n.nextId=d+64)}i&&(i=!1);try{if(B(f),C&&Dt(r,B),g.offset=a,l&&l.idsToInsert){a+=l.idsToInsert.length*6,a>L&&ie(a),g.offset=a;let d=Xr(o.subarray(r,a),l.idsToInsert);return l=null,d}return y&Yr?(o.start=r,o.end=a,o):o.subarray(r,a)}finally{if(n){Z<10&&Z++;let d=n.sharedLength||_;if(n.length>d&&(n.length=d),ne>1e4)n.transitions=null,Z=0,ne=0,$.length>0&&($=[]);else if($.length>0&&!k){for(let c=0,h=$.length;c<h;c++)$[c][fe]=0;$=[]}if(i&&g.saveStructures){let c=o.subarray(r,a);return g.saveStructures(n,u)===!1?(g._mergeStructures(g.getStructures()),g.pack(f)):(u=d,c)}}y&Qr&&(a=r)}};const B=f=>{a>L&&(o=ie(a));var y=typeof f,d;if(y==="string"){let c=f.length;if(C&&c>=4&&c<4096){if((C.size+=c)>Hr){let w,D=(C[0]?C[0].length*3+C[1].length:0)+10;a+D>L&&(o=ie(a+D)),C.position?(o[a]=200,a+=3,o[a++]=98,w=a-r,a+=4,Dt(r,B),I.setUint16(w+r-3,a-r-w)):(o[a++]=214,o[a++]=98,w=a-r,a+=4),C=["",""],C.size=0,C.position=w}let v=Zr.test(f);C[v?0:1]+=f,o[a++]=193,B(v?-c:c);return}let h;c<32?h=1:c<256?h=2:c<65536?h=3:h=5;let O=c*3;if(a+O>L&&(o=ie(a+O)),c<64||!p){let v,w,D,T=a+h;for(v=0;v<c;v++)w=f.charCodeAt(v),w<128?o[T++]=w:w<2048?(o[T++]=w>>6|192,o[T++]=w&63|128):(w&64512)===55296&&((D=f.charCodeAt(v+1))&64512)===56320?(w=65536+((w&1023)<<10)+(D&1023),v++,o[T++]=w>>18|240,o[T++]=w>>12&63|128,o[T++]=w>>6&63|128,o[T++]=w&63|128):(o[T++]=w>>12|224,o[T++]=w>>6&63|128,o[T++]=w&63|128);d=T-a-h}else d=p(f,a+h,O);d<32?o[a++]=160|d:d<256?(h<2&&o.copyWithin(a+2,a+1,a+1+d),o[a++]=217,o[a++]=d):d<65536?(h<3&&o.copyWithin(a+3,a+2,a+2+d),o[a++]=218,o[a++]=d>>8,o[a++]=d&255):(h<5&&o.copyWithin(a+5,a+3,a+3+d),o[a++]=219,I.setUint32(a,d),a+=4),a+=d}else if(y==="number")if(f>>>0===f)f<64?o[a++]=f:f<256?(o[a++]=204,o[a++]=f):f<65536?(o[a++]=205,o[a++]=f>>8,o[a++]=f&255):(o[a++]=206,I.setUint32(a,f),a+=4);else if(f>>0===f)f>=-32?o[a++]=256+f:f>=-128?(o[a++]=208,o[a++]=f+256):f>=-32768?(o[a++]=209,I.setInt16(a,f),a+=2):(o[a++]=210,I.setInt32(a,f),a+=4);else{let c;if((c=this.useFloat32)>0&&f<4294967296&&f>=-2147483648){o[a++]=202,I.setFloat32(a,f);let h;if(c<4||(h=f*et[(o[a]&127)<<1|o[a+1]>>7])>>0===h){a+=4;return}else a--}o[a++]=203,I.setFloat64(a,f),a+=8}else if(y==="object")if(!f)o[a++]=192;else{if(l){let h=l.get(f);if(h){if(!h.id){let O=l.idsToInsert||(l.idsToInsert=[]);h.id=O.push(h)}o[a++]=214,o[a++]=112,I.setUint32(a,h.id),a+=4;return}else l.set(f,{offset:a-r})}let c=f.constructor;if(c===Object)mt(f,!0);else if(c===Array){d=f.length,d<16?o[a++]=144|d:d<65536?(o[a++]=220,o[a++]=d>>8,o[a++]=d&255):(o[a++]=221,I.setUint32(a,d),a+=4);for(let h=0;h<d;h++)B(f[h])}else if(c===Map){d=f.size,d<16?o[a++]=128|d:d<65536?(o[a++]=222,o[a++]=d>>8,o[a++]=d&255):(o[a++]=223,I.setUint32(a,d),a+=4);for(let[h,O]of f)B(h),B(O)}else{for(let h=0,O=Je.length;h<O;h++){let v=Xt[h];if(f instanceof v){let w=Je[h];if(w.write){w.type&&(o[a++]=212,o[a++]=w.type,o[a++]=0),B(w.write.call(this,f));return}let D=o,T=I,G=a;o=null;let se;try{se=w.pack.call(this,f,pe=>(o=D,D=null,a+=pe,a>L&&ie(a),{target:o,targetView:I,position:a-pe}),B)}finally{D&&(o=D,I=T,a=G,L=o.length-10)}se&&(se.length+a>L&&ie(se.length+a),a=Gr(se,o,a,w.type));return}}mt(f,!f.hasOwnProperty)}}else if(y==="boolean")o[a++]=f?195:194;else if(y==="bigint"){if(f<BigInt(1)<<BigInt(63)&&f>=-(BigInt(1)<<BigInt(63)))o[a++]=211,I.setBigInt64(a,f);else if(f<BigInt(1)<<BigInt(64)&&f>0)o[a++]=207,I.setBigUint64(a,f);else if(this.largeBigIntToFloat)o[a++]=203,I.setFloat64(a,Number(f));else throw new RangeError(f+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");a+=8}else if(y==="undefined")this.encodeUndefinedAsNil?o[a++]=192:(o[a++]=212,o[a++]=0,o[a++]=0);else if(y==="function")B(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+y)},mt=this.useRecords===!1?this.variableMapSize?f=>{let y=Object.keys(f),d=y.length;d<16?o[a++]=128|d:d<65536?(o[a++]=222,o[a++]=d>>8,o[a++]=d&255):(o[a++]=223,I.setUint32(a,d),a+=4);let c;for(let h=0;h<d;h++)B(c=y[h]),B(f[c])}:(f,y)=>{o[a++]=222;let d=a-r;a+=2;let c=0;for(let h in f)(y||f.hasOwnProperty(h))&&(B(h),B(f[h]),c++);o[d+++r]=c>>8,o[d+r]=c&255}:e.progressiveRecords&&!P?(f,y)=>{let d,c=n.transitions||(n.transitions=Object.create(null)),h=a++-r,O;for(let v in f)if(y||f.hasOwnProperty(v)){if(d=c[v],d)c=d;else{let w=Object.keys(f),D=c;c=n.transitions;let T=0;for(let G=0,se=w.length;G<se;G++){let pe=w[G];d=c[pe],d||(d=c[pe]=Object.create(null),T++),c=d}h+r+1==a?(a--,Le(c,w,T)):vt(c,w,h,T),O=!0,c=D[v]}B(f[v])}if(!O){let v=c[fe];v?o[h+r]=v:vt(c,Object.keys(f),h,0)}}:(f,y)=>{let d,c=n.transitions||(n.transitions=Object.create(null)),h=0;for(let v in f)(y||f.hasOwnProperty(v))&&(d=c[v],d||(d=c[v]=Object.create(null),h++),c=d);let O=c[fe];O?O>=96&&P?(o[a++]=((O-=96)&31)+96,o[a++]=O>>5):o[a++]=O:Le(c,c.__keys__||Object.keys(f),h);for(let v in f)(y||f.hasOwnProperty(v))&&B(f[v])},ie=f=>{let y;if(f>16777216){if(f-r>It)throw new Error("Packed buffer would be larger than maximum buffer size");y=Math.min(It,Math.round(Math.max((f-r)*(f>67108864?1.25:2),4194304)/4096)*4096)}else y=(Math.max(f-r<<2,o.length-1)>>12)+1<<12;let d=new Ue(y);return I=new DataView(d.buffer,0,y),o.copy?o.copy(d,0,r,f):d.set(o.slice(r,f)),a-=r,r=0,L=d.length-10,o=d},Le=(f,y,d)=>{let c=n.nextId;c||(c=64),c<J&&this.shouldShareStructure&&!this.shouldShareStructure(y)?(c=n.nextOwnId,c<H||(c=J),n.nextOwnId=c+1):(c>=H&&(c=J),n.nextId=c+1);let h=y.highByte=c>=96&&P?c-96>>5:-1;f[fe]=c,f.__keys__=y,n[c-64]=y,c<J?(y.isShared=!0,n.sharedLength=c-63,i=!0,h>=0?(o[a++]=(c&31)+96,o[a++]=h):o[a++]=c):(h>=0?(o[a++]=213,o[a++]=114,o[a++]=(c&31)+96,o[a++]=h):(o[a++]=212,o[a++]=114,o[a++]=c),d&&(ne+=Z*d),$.length>=A&&($.shift()[fe]=0),$.push(f),B(y))},vt=(f,y,d,c)=>{let h=o,O=a,v=L,w=r;o=ge,a=0,r=0,o||(ge=o=new Ue(8192)),L=o.length-10,Le(f,y,c),ge=o;let D=a;if(o=h,a=O,L=v,r=w,D>1){let T=a+D-1;T>L&&ie(T);let G=d+r;o.copyWithin(G+D,G+1,a),o.set(ge.slice(0,D),G),a=T}else o[d+r]=ge[0]}}useBuffer(e){o=e,I=new DataView(o.buffer,o.byteOffset,o.byteLength),a=0}clearSharedData(){this.structures&&(this.structures=[])}}Xt=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,$t];Je=[{pack(t,e,r){let i=t.getTime()/1e3;if((this.useTimestamp32||t.getMilliseconds()===0)&&i>=0&&i<4294967296){let{target:n,targetView:l,position:u}=e(6);n[u++]=214,n[u++]=255,l.setUint32(u,i)}else if(i>0&&i<17179869184){let{target:n,targetView:l,position:u}=e(10);n[u++]=215,n[u++]=255,l.setUint32(u,t.getMilliseconds()*4e6+(i/1e3/4294967296>>0)),l.setUint32(u+4,i)}else if(isNaN(i)){if(this.onInvalidDate)return e(0),r(this.onInvalidDate());let{target:n,targetView:l,position:u}=e(3);n[u++]=212,n[u++]=255,n[u++]=255}else{let{target:n,targetView:l,position:u}=e(15);n[u++]=199,n[u++]=12,n[u++]=255,l.setUint32(u,t.getMilliseconds()*1e6),l.setBigInt64(u+4,BigInt(Math.floor(i)))}}},{pack(t,e,r){let i=Array.from(t),{target:n,position:l}=e(this.moreTypes?3:0);this.moreTypes&&(n[l++]=212,n[l++]=115,n[l++]=0),r(i)}},{pack(t,e,r){let{target:i,position:n}=e(this.moreTypes?3:0);this.moreTypes&&(i[n++]=212,i[n++]=101,i[n++]=0),r([t.name,t.message])}},{pack(t,e,r){let{target:i,position:n}=e(this.moreTypes?3:0);this.moreTypes&&(i[n++]=212,i[n++]=120,i[n++]=0),r([t.source,t.flags])}},{pack(t,e){this.moreTypes?jt(t,16,e):Rt(je?Buffer.from(t):new Uint8Array(t),e)}},{pack(t,e){let r=t.constructor;r!==Yt&&this.moreTypes?jt(t,Kt.indexOf(r.name),e):Rt(t,e)}},{pack(t,e){let{target:r,position:i}=e(1);r[i]=193}}];function jt(t,e,r,i){let n=t.byteLength;if(n+1<256){var{target:l,position:u}=r(4+n);l[u++]=199,l[u++]=n+1}else if(n+1<65536){var{target:l,position:u}=r(5+n);l[u++]=200,l[u++]=n+1>>8,l[u++]=n+1&255}else{var{target:l,position:u,targetView:p}=r(7+n);l[u++]=201,p.setUint32(u,n+1),u+=4}l[u++]=116,l[u++]=e,l.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),u)}function Rt(t,e){let r=t.byteLength;var i,n;if(r<256){var{target:i,position:n}=e(r+2);i[n++]=196,i[n++]=r}else if(r<65536){var{target:i,position:n}=e(r+3);i[n++]=197,i[n++]=r>>8,i[n++]=r&255}else{var{target:i,position:n,targetView:l}=e(r+5);i[n++]=198,l.setUint32(n,r),n+=4}i.set(t,n)}function Gr(t,e,r,i){let n=t.length;switch(n){case 1:e[r++]=212;break;case 2:e[r++]=213;break;case 4:e[r++]=214;break;case 8:e[r++]=215;break;case 16:e[r++]=216;break;default:n<256?(e[r++]=199,e[r++]=n):n<65536?(e[r++]=200,e[r++]=n>>8,e[r++]=n&255):(e[r++]=201,e[r++]=n>>24,e[r++]=n>>16&255,e[r++]=n>>8&255,e[r++]=n&255)}return e[r++]=i,e.set(t,r),r+=n,r}function Xr(t,e){let r,i=e.length*6,n=t.length-i;for(e.sort((l,u)=>l.offset>u.offset?1:-1);r=e.pop();){let l=r.offset,u=r.id;t.copyWithin(l+i,l,n),i-=6;let p=l+i;t[p++]=214,t[p++]=105,t[p++]=u>>24,t[p++]=u>>16&255,t[p++]=u>>8&255,t[p++]=u&255,n=l}return t}function Dt(t,e){I.setUint32(C.position+t,a-C.position-t);let r=C;C=null,e(r[0]),e(r[1])}let Qt=new Kr({useRecords:!1});Qt.pack;Qt.pack;const Yr=512,Qr=1024;var en="https://izhenxiang.com/",er="https://desk-ver.izhenxiang.com/",tr,tn=async t=>{var e,r;return t=await t,r=[],e=r.push.bind(r),t.on("data",e),new Promise((i,n)=>(t.on("end",()=>{i(Buffer.concat(r))}),t.on("error",n)))},rn=t=>tn(rr(t));tr=t=>{var e;return e=m.net.request(t),e.end(),new Promise((r,i)=>(e.on("error",n=>{i(n)}),e.on("response",n=>{if(n.statusCode!==200){i(n);return}r(n)})))};var rr=t=>tr(t),ke={};ke.version="1.0.0";ke.encode=function(e){return e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")};ke.decode=function(e){return e+=Array(5-e.length%4).join("="),e=e.replace(/\-/g,"+").replace(/\_/g,"/"),new Buffer(e,"base64")};ke.validate=function(e){return/^[A-Za-z0-9\-_]+$/.test(e)};var $e=ke;var ce,nr,Be,Re,tt,me,rt,ir,sr,nt,Ae,ar,it,st,Pe,He,De;sr=Mr.promisify(Mt.brotliDecompress);var nn=()=>(m.app.relaunch(),m.app.exit());ce=N.join(Ct.ROOT,"v");Y.mkdirSync(ce,{recursive:!0});nr="sha512";Pe=void 0;var lr=()=>{oe(Pe),Pe=void 0},or=()=>{lr(),Pe=he.update({width:400,height:500,resizable:!1})};Ae=t=>rn(er+t);ar=t=>{var e;return e=Dr.createHash(nr),new Promise(r=>Y.createReadStream(t).on("data",e.update.bind(e)).on("end",()=>{r(e.digest().slice(0,8))}))};He=(()=>{var t;return{v:t}=Ee.default,t&&re.decode(t)})();var fr=()=>re.PACKAGE_JSON().version;rt=zr+"/"+zt.default.arch()+"/";De=re.ver_int(fr());me=0;st=async()=>{var t,e;t=re.encode(parseInt(new Date/1e3)),e=rt+"v?"+t;try{me=await Ae(e)}catch{console.error("\u274C",e)}return me};ir=async t=>{var e,r,i,n,l,u,p,g,k,U,_,A,P,J,H,$,ne,Z;if(t||(t=me||await st()),!!t&&(Z=t.readUintBE(0,6),!(De>=Z))){if(i=re.encode(Z),e=N.join(ce,i),Y.existsSync(N.join(e,re.package_json))&&Z===He)return e;for($=$e.encode(await Ae(rt+$e.encode(t))),[r,n,p]=qr(await sr(await Ae($))),A=B=>we.mkdir(N.join(e,B),{recursive:!0}),await Promise.all(r.map(A)),J=N.dirname(__dirname),P=k=0,U=n.length;k<U;P=++k)if(g=n[P],l=N.join(e,g),u=p[P],H=async B=>Buffer.compare(u,await ar(B))===0,!(Y.existsSync(l)&&await H(l))){if(await A(N.dirname(g)),_=N.join(J,g),Y.existsSync(_)&&await H(_)){await we.copyFile(_,l);continue}if(ne=Y.createWriteStream(l),(await rr(er+$e.encode(u))).pipe(Mt.createBrotliDecompress()).pipe(ne),await new Promise(B=>{ne.on("finish",B)}),!await H(l))return}return Ee.default.v=i,He=Z,e}};var ur=async()=>{var t,e;return t=await st(),t&&(e=De<t.readUintBE(0,6),e)?t:0};nt=async()=>{var t;(t=await ur())&&await cr(t)};setInterval(nt,864e5);Be=Re=tt=void 0;it=()=>Re=new Promise(t=>tt=t);it();var sn=()=>Re,cr=(...t)=>(Be||(Be=ir(...t).then(async e=>{e&&(tt([me,JSON.parse(await we.readFile(N.join(e,re.package_json),"utf8")).description]),it())}).finally(()=>{Be=!1})),Re);setTimeout(async()=>{var t,e,r,i;if(Y.existsSync(ce)){i=await we.readdir(ce,{withFileTypes:!0});for(e of i)e.isDirectory()&&({name:r}=e,re.decode(r)<De&&await we.rm(N.join(ce,r),{recursive:!0,force:!0}))}if(t=parseInt(new Date/864e5),t!==Ee.default.update_check)return Ee.default.update_check=t,await nt()},15e3);var an=Object.freeze(Object.defineProperty({__proto__:null,relaunch:nn,x:lr,show:or,ver_now:fr,update_check:ur,update_promise:sn,update:cr},Symbol.toStringTag,{value:"Module"}));var Me,at,dr,xr,lt,ln,ot,hr,pr,ve;zt.default.platform();({Menu:at,Tray:dr,app:xr,globalShortcut:ln}=require("electron"));ve=new dr(N.join(Xe,"trayTemplate.png"));ot=[{label:"\u5A92\u4F53\u5E93",click:()=>{m.shell.openExternal(en+"video_library.html?user_token="+Ft.ID)}},{label:"\u68C0\u6D4B\u66F4\u65B0",click:or},{type:"separator"}];Me=hr=at.buildFromTemplate([{label:"\u663E\u793A\u754C\u9762",click:de},...ot,{label:"\u9000\u51FA",click:()=>xr.quit()}]);pr=at.buildFromTemplate(ot);lt=["click",()=>{de()}];ve.on("right-click",t=>{ve.popUpContextMenu(Me)});var on=()=>{ve.off(...lt),Me=pr},gr=()=>{ve.on(...lt),Me=hr};var wr;wr=t=>{var e,r,i,n,l,u,p,g;t&&(t.devToolsWebContents||({webContents:l}=t,e=new m.BrowserWindow({minimizable:!1,maximizable:!1}),[n,r]=t.getSize(),[p,g]=t.getPosition(),{width:u,height:i}=m.screen.getPrimaryDisplay().workArea,l.setDevToolsWebContents(e.webContents),l.openDevTools({mode:"detach"}),n>r?(g=0,n=0,r+=20,i-=r):(p=0,r=0,u-=n),e.setPosition(n,r),t.setPosition(p,g),e.setSize(u,i),t.focus()))};var fn=()=>{m.globalShortcut.register("CmdOrCtrl+Alt+I",()=>wr(m.BrowserWindow.getFocusedWindow()))},Ce=t=>{m.BrowserWindow.getAllWindows().forEach(e=>{var r,i;if(i=e.webContents.getURL(),i){if({hash:r}=new URL(i),r=r.slice(1),r.startsWith("main")){t?(e[t](),t==="show"&&e.once("show",()=>{e.setAlwaysOnTop(!0,"screen-saver"),setTimeout(()=>e.setAlwaysOnTop(!1,"screen-saver"),1e3)})):e.hide();return}if(r.startsWith("camera"))return}oe(e)})},un=()=>{m.BrowserWindow.getAllWindows().forEach(t=>{var e,r;if(r=t.webContents.getURL(),r&&({hash:e}=new URL(r),e=e.slice(1),e.startsWith("main"))){t.hide();return}oe(t)})},yr,ze,mr,le,E,ft;({camera:mr}=he);E=void 0;le=void 0;yr=204;var vr=()=>{E&&!E.isDestroyed()&&E.getSize()[0]!==800&&(le=E.getPosition()),oe(E)},cn=t=>{var e,r;r=E.getSize()[0],r!==t&&(le=E.getPosition(),e=Math.round((t-r)/2),E.setBounds({x:le[0]-e,y:le[1]-e,width:t,height:t}))};ze=!1;var br=()=>ft(800,500),dn=ft=(t,e)=>{E&&!E.isDestroyed()||(E=mr({width:t,height:e,center:!0,roundedCorners:!1,resizable:!1,transparent:!0}),ze&&ut())},xn=t=>{var e,r,i,n,l;E&&!E.isDestroyed()||(t=t||yr,ft(t,t),le?[e,r]=le:({width:l,height:i}=m.screen.getPrimaryDisplay().size,n=62,e=n,r=i-n-t),E.setPosition(e,r))},hn=()=>{vr(),br()},ut=()=>{E&&!E.isDestroyed()&&(E.setAlwaysOnTop(!0,"pop-up-menu"),E.setVisibleOnAllWorkspaces(!0,{visibleOnFullScreen:!0})),ze=!0},Sr=()=>{E&&!E.isDestroyed()&&(E.setAlwaysOnTop(!1),E.setVisibleOnAllWorkspaces(!1)),ze=!1},pn=Object.freeze(Object.defineProperty({__proto__:null,x:vr,size:cn,rect:br,default:dn,circle:xn,x_rect:hn,top:ut,untop:Sr},Symbol.toStringTag,{value:"Module"})),ct=new Proxy({},{get:(t,e)=>()=>{var r,i,n;return{width:i,height:r}=m.screen.getPrimaryDisplay().size,n=he[e]({width:i,height:r,roundedCorners:!1,transparent:!0,resizable:!1,hasShadow:!1}),n.setAlwaysOnTop(!0,"screen-saver"),n.setPosition(0,0),n.setVisibleOnAllWorkspaces(!0,{visibleOnFullScreen:!0}),n}}),dt,ee,Ze,xt,_r,kr,Or,Ur,j;({recbar:Ur}=he);j=void 0;ee=void 0;({draw:Or}=ct);var gn=()=>{ee||(ee=Or(),ee.on("close",()=>ee=void 0),Tr())},Tr=()=>{be(),ee.focus()},wn=()=>{oe(ee),ee=void 0};Ze=["CommandOrControl+R","CommandOrControl+W","CommandOrControl+Q","Alt+F4","F5"];dt={"browser-window-focus":()=>{var t;for(t of Ze)m.globalShortcut.register(t,()=>{})},"browser-window-blur":()=>{var t;for(t of Ze)m.globalShortcut.unregister(t,()=>{})}};var ht=t=>{var e;return t==="camera"?e=500:e=600,_r(e)};_r=t=>{var e,r,i,n,l,u,p,g;l=Object.entries(dt);for(g of l)[i,e]=g,m.app.on(i,e);return on(),r=48,n={roundedCorners:!1,transparent:!0,resizable:!1,width:t,height:r},j=Ur(n),j.on("close",()=>j=void 0),{width:p,height:u}=m.screen.getPrimaryDisplay().workArea,j.setBounds({x:Math.round((p-t)/2),y:u-28-r,width:t,height:r}),be(),ut(),new Promise(k=>j.webContents.on("did-finish-load",()=>{be(),j.focus(),k(j)}))};var be=()=>{j&&(j.setAlwaysOnTop(!0,"screen-saver"),j.moveTop())},yn=()=>{var t,e,r,i,n;i=j.getPosition(),[r,e]=j.getSize(),[n,t]=j.size,j.setBounds({x:i[0]+r-n,y:i[1],width:n,height:t})},mn=()=>{var t,e,r,i;e=j.getPosition(),j.size=r=j.getSize(),i=162,t=48,j.setBounds({x:e[0]+r[0]-i,y:e[1],width:i,height:t})};xt=()=>{var t,e,r,i;r=Object.entries(dt);for(i of r)[e,t]=i,m.app.off(e,t);gr(),Sr()};var vn=()=>{xt(),Ce("show")},bn=()=>{xt(),Ce()},Sn=()=>{j.hide()};kr=(...t)=>m.desktopCapturer.getSources({types:t,thumbnailSize:{width:0,height:0}});var _n=async()=>{var t,e;e=await kr("screen");for(t of e)return t.id},kn=t=>{m.BrowserWindow.getAllWindows().forEach(e=>{var r;if({hash:r}=new URL(e.webContents.getURL()),!t&&r.slice(1)==="camera"){oe(e);return}return e.hide()})},On=Object.freeze(Object.defineProperty({__proto__:null,draw:gn,draw_top:Tr,draw_x:wn,\u5DE5\u5177\u6761:ht,top:be,expand:yn,left:mn,cancel:vn,end:bn,hide:Sn,screen_source:_n,stop:kn},Symbol.toStringTag,{value:"Module"})),Br,q;({count_down:Br}=he);q=void 0;var Er=()=>{var t;if(q){q.focus();return}t=240,q=Br({width:t,height:t,transparent:!0,resizable:!1,hasShadow:!1}),q.on("close",()=>{q=void 0}),q.setAlwaysOnTop(!0,"screen-saver"),q.on("show",()=>{var e,r;r=m.BrowserWindow.getAllWindows();for(e of r)e.webContents.getURL().endsWith("/#main")||e.setVisibleOnAllWorkspaces(!0,{visibleOnFullScreen:!0})})},Un={hide:()=>{q!=null&&q.hide()},close:()=>{q!=null&&q.close(),be()}};var Se,pt,gt,wt,yt;Se=gt=pt=void 0;wt=()=>{pt=new Promise(t=>{gt=t})};wt();yt=t=>{Se.once("closed",()=>{gt(t),wt()}),oe(Se)};var Tn=()=>{yt(!0)},Bn=()=>{yt(!1)},En=t=>(Se=ct["confirm_"+t]({width:275,height:190,modal:!0,isAlwaysOnTop:!0,visibleOnAllWorkspaces:!0}),Se.setAlwaysOnTop(!0,"screen-saver"),pt),An=Object.freeze(Object.defineProperty({__proto__:null,y:Tn,n:Bn,show:En},Symbol.toStringTag,{value:"Module"})),Pn=t=>{Ft.ID=t},In=Object.freeze(Object.defineProperty({__proto__:null,ID:Pn},Symbol.toStringTag,{value:"Module"})),jn=function(){var t,e,r;return r=this.sender.getOwnerBrowserWindow(),e=r.getBounds(),t=i=>{var n,l;if(l=r[i],n=e[i],l&&n>l&&n-l<3){e[i]=l;return}r[i]=n},["height","width"].map(t),e},Rn=function(t,e,r,i){var n;n=this.sender.getOwnerBrowserWindow(),n.setBounds({x:Math.round(t),y:Math.round(e),width:r,height:i})},Dn=Object.freeze(Object.defineProperty({__proto__:null,getBounds:jn,setBounds:Rn},Symbol.toStringTag,{value:"Module"}));var Ar,ue;({area:Ar}=ct);ue=void 0;var Mn=()=>{ue=Ar(),ue.setAlwaysOnTop(!0,"screen-saver"),ue.on("close",()=>ue=void 0)},Cn=()=>{ht(),ue.setIgnoreMouseEvents(!0,{forward:!0}),Er()},zn=()=>{var t,e;return{x:t,y:e}=m.screen.getCursorScreenPoint(),[t,e]};function Ln(t,e,r,i){var n,l;if(n=t==="camera",n||(l=i===1),l){Mn();return}else Er();ht(t)}var Wn=(t,e,r,i)=>{Ce(),Ln(t,e,r,i)},Fn=t=>{m.shell.openExternal(t)},$n=()=>Ct.ROOT,Vn=Object.freeze(Object.defineProperty({__proto__:null,userData:$n,close:Ce,x:un,count_down:Un,confirm:An,auto_update:an,recbar:On,USER:In,camera:pn,drag:Dn,area:Cn,main:de,mouse:zn,rec:Wn,open:Fn},Symbol.toStringTag,{value:"Module"}));process.on("exit",()=>{m.app.quit()});m.app.requestSingleInstanceLock()||(m.app.quit(),process.exit(0));(async()=>{var t;t=await Promise.resolve().then(function(){return require("./c.js")}),t.init({dsn:"https://54c0fbe278e049c8a9635fc0fa612836@sentry.dalukuankuan.com/6"})})();m.app.commandLine.appendSwitch("webrtc-max-cpu-consumption-percentage","100");m.app.commandLine.appendSwitch("js-flags","--expose_gc --max-old-space-size=512");(()=>{var t,e,r,i,n,l;de(),(r=m.app.dock)!=null&&r.hide(),t=(u,p)=>{var g,k,U,_;p instanceof Function&&m.ipcMain.handle(u.join("."),(A,P)=>p.apply(A,P)),U=Object.entries(p);for(_ of U)[k,g]=_,t([...u,k],g)},i=Object.entries(Vn);for(l of i)[e,n]=l,t([e],n);gr(),fn()})();Lr(m.app,{"second-instance":()=>{var t;t=!0,m.BrowserWindow.getAllWindows().forEach(e=>{var r,i;i=e.webContents.getURL();try{({hash:r}=new URL(i))}catch{return}r.startsWith("#recbar")&&(t=!1)}),t&&de()},activate:de});
