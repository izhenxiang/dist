import{c as m}from"./i.js";import{m as _}from"./d.js";import{r as v,J as y,k as p,a as b,m as g,n as h,d as x,_ as z}from"./e.js";var A={props:{from:{type:String,required:!0,default:"main"}},setup:a=>{var t,r,o,l,i;return i=v(0),o=void 0,r=void 0,l=a.from==="recbar",t=()=>{r&&(clearInterval(o),r(),r=void 0)},y(t),p(async()=>{var n,e,c,d,s,u,f;t(),{audio:c}=m,c&&(f=await _.audio(c),n=new AudioContext,u=n.createMediaStreamSource(f),e=n.createAnalyser(),e.minDecibels=-90,e.maxDecibels=-10,e.fftSize=32,r=()=>(u.disconnect(e),n.close()),d=e.frequencyBinCount,s=new Uint8Array(d),o=setInterval(()=>{e.getByteFrequencyData(s),i.value=Math.round(Math.min(1,Math.max(...s)/200)*100)},100),u.connect(e))}),{is_recbar:l,vol:i,config:m}}};function B(a,t){return x(),b("a",{class:g(["audio",{x:!a.config.audio,recbar:a.is_recbar==!0}]),title:"麦克风",style:h("--vol:"+a.vol+"%")},null,6)}var k=z(A,[["render",B],["__scopeId","data-v-715b734a"]]);export{k as z};
