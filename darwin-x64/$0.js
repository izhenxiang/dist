import{s as w,k as A,a as h,e as r,m as n,d as m,p as R,i as V,_ as H,r as U,o as X,N as z,l as Y,F as j,Q as M,f as y,h as F,t as J,b as P}from"./f.js";import{i as S}from"./2.js";import{b as $}from"./..js";import{O as Z}from"./0.js";import{d as ee}from"./b.js";import{c as u}from"./k.js";import{D as p}from"./.js";import{z as oe}from"./j.js";import{H as re}from"./o.js";import{a as W}from"./q.js";import{p as te}from"./s.js";import"./x.js";import"./r.js";var B;B=e=>(e+"").padStart(2,"0");var se=()=>{var e,o,t,a,s;return e=w("00"),o=w("00"),t=w(0),[s,a]=(()=>{var i,l;return l=0,i=void 0,[()=>{i&&clearInterval(i),i=setInterval(()=>{++l,e.value=B(parseInt(l/60)),o.value=B(l%60),t.value=l},1e3)},()=>{clearInterval(i)}]})(),[t,e,o,s,a]},ae={props:{shape:{type:String,required:!0,default:"pen"}},components:{},setup:e=>{var o,t,a;return t=e.shape,p[t]===void 0&&(p[t]=JSON.stringify(["red","middle"])),[o,a]=JSON.parse(p[t]),a=w(a),o=w(o),A(()=>{var s,i,l;i=p[t],[s,l]=JSON.parse(i),s!==o.value&&(o.value=s),l!==a.color&&(a.value=l)}),{size:a,color:o,set_size:(s,i)=>{i.stopPropagation(),s!==a.value&&(p[t]=JSON.stringify([o.value,s]))},set_color:(s,i)=>{i.stopPropagation(),s!==o.value&&(p[t]=JSON.stringify([s,a.value]))}}}};const v=e=>(R("data-v-4834351c"),e=e(),V(),e),ie={class:"nav"},ne=v(()=>r("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("circle",{cx:"9",cy:"9",r:"2",fill:"var(--c)"})],-1)),le=[ne],de=v(()=>r("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("circle",{cx:"9",cy:"9",r:"4",fill:"var(--c)"})],-1)),pe=[de],ue=v(()=>r("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("circle",{cx:"9",cy:"9",r:"6",fill:"var(--c)"})],-1)),we=[ue],ce=v(()=>r("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("rect",{x:"3",y:"3",width:"12",height:"12",fill:"#FE6C6C"}),r("path",{d:"M7 8.66669L8.66667 10.3334L11.3333 7.66669",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),ve=[ce],fe=v(()=>r("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("rect",{x:"3",y:"3",width:"12",height:"12",fill:"#34D53B"}),r("path",{d:"M7 8.66669L8.66667 10.3334L11.3333 7.66669",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),ge=[fe],he=v(()=>r("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("rect",{x:"3",y:"3",width:"12",height:"12",fill:"#FFB803"}),r("path",{d:"M7 8.66669L8.66667 10.3334L11.3333 7.66669",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),me=[he],_e=v(()=>r("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("rect",{x:"3",y:"3",width:"12",height:"12",fill:"#939393"}),r("path",{d:"M7 8.66669L8.66667 10.3334L11.3333 7.66669",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),ke=[_e],ye=v(()=>r("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("rect",{x:"3",y:"3",width:"12",height:"12",fill:"white",stroke:"#E9EBED"}),r("path",{d:"M7 8.66669L8.66667 10.3334L11.3333 7.66669",stroke:"black","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),Ce=[ye];function Se(e,o){return m(),h("div",ie,[r("span",{class:n(["small",{now:e.size=="small"}]),onClick:o[0]||(o[0]=t=>e.set_size("small",t))},le,2),r("span",{class:n(["middle",{now:e.size=="middle"}]),onClick:o[1]||(o[1]=t=>e.set_size("middle",t))},pe,2),r("span",{class:n(["big",{now:e.size=="big"}]),onClick:o[2]||(o[2]=t=>e.set_size("big",t))},we,2),r("span",{class:n(["red",{color_now:e.color=="red"}]),onClick:o[3]||(o[3]=t=>e.set_color("red",t))},ve,2),r("span",{class:n(["green",{color_now:e.color=="green"}]),onClick:o[4]||(o[4]=t=>e.set_color("green",t))},ge,2),r("span",{class:n(["orange",{color_now:e.color=="orange"}]),onClick:o[5]||(o[5]=t=>e.set_color("orange",t))},me,2),r("span",{class:n(["gray",{color_now:e.color=="gray"}]),onClick:o[6]||(o[6]=t=>e.set_color("gray",t))},ke,2),r("span",{class:n(["white",{color_now:e.color=="white"}]),onClick:o[7]||(o[7]=t=>e.set_color("white",t))},Ce,2)])}var $e=H(ae,[["render",Se],["__scopeId","data-v-4834351c"]]),_,q,N,I,C,Q,c,f,G,K,L,D,O,g;({recbar:f}=S);[K,Q,G,O,D]=se();L=e=>{var o,t,a;t=e.split(`
`),a=[];for(o of t)a.push(o.split(" "));return a};I&&clearInterval(I);I=setInterval(async()=>{await W()},5*60*1e3);c=w(!1);_=!1;N=w();q=e=>{[O,D][e-0]()};g=()=>{var e;({value:e}=c),e=!e,$.pause(c.value=e),_&&q(e)};C={pause:async()=>{c.value&&await W(),g()},reset:()=>{_&&(c.value||g(),z(async()=>await S.confirm.show("reset")?$.reset():g()))},cancel:async()=>{if(!_){await f.cancel();return}c.value||g(),z(async()=>await S.confirm.show("cancel")?$.cancel():g())},stop:()=>{$.stop(),D()}};Z.start=()=>{O(),_=!0,N.value.className=""};u.src!=="camera"&&Y(()=>import("./l.js"),["l.js","v.js","0.js","s.js","a.js","2.js","k.js","x.js","..js","r.js","f.js","9.css","o.js","g.js","w.js"]);var be={components:{zAudio:oe,DrawStyle:$e},setup:()=>{var e,o,t,a,s,i,l,k,x,T;for(s=L("video 摄像头"),x=U(L(`pause 暂停
stop 结束录制
reset 重新录制
cancel 取消录制`)),T=d=>()=>{u[d]=u[d]?"":localStorage[d],!c.value&&!u.video&&!u.audio&&u.src==="camera"&&!(u.sys_audio&&te==="win32")&&C.pause()},k=["audio","video"],a=0,i=k.length;a<i;a++)t=k[a],C[t]=T(t);return o=w(),l=w(),X(()=>{ee(l.value)}),e=d=>{d>=u.max_duration&&_&&(c.value||g(),z(async()=>await S.confirm.show("pay")?S.open(re+"?pay=true&user_token="+localStorage.uid):C.stop()))},A(()=>{e(K.value)}),{go:async d=>{var b;if(["pen","rect","txt","arrow","track"].indexOf(d)+1){if({value:b}=o,b!==d){if(p.shape=o.value=d,b)return}else if(o.value="",p.drawing=0,d!=="track"){await f.draw_x();return}else{p.shape="",await f.draw();return}p.drawing=1,await f.draw();return}(C[d]||f[d])()},expand:()=>{window.innerWidth<200&&f.expand()},left:s,nav:l,right:x,code:N,minute:Q,second:G,pause:c,config:u,draw:o}}};const E=e=>(R("data-v-80028d8e"),e=e(),V(),e),ze=["title","onClick"],Be=E(()=>r("b",null,null,-1)),Ie=E(()=>r("span",null,":",-1)),Le=["title","onClick"],Ne={class:"draw"},De=E(()=>r("b",null,null,-1));function Oe(e,o){const t=P("z-audio"),a=P("DrawStyle");return m(),h("nav",{class:n({pause:e.pause}),ref:"nav"},[(m(!0),h(j,null,M(e.left,([s,i],l)=>(m(),h("a",{class:n([s,e.config[s]?"":"x"]),title:i,onClick:k=>e.go(s)},null,10,ze))),256)),y(t,{onClick:o[0]||(o[0]=s=>e.go("audio"))}),Be,r("code",{class:"pause",ref:"code",onClick:o[1]||(o[1]=(...s)=>e.expand&&e.expand(...s))},[F(J(e.minute),1),Ie,F(J(e.second),1)],512),(m(!0),h(j,null,M(e.right,([s,i],l)=>(m(),h("a",{class:n([s]),title:i,onClick:k=>e.go(s)},null,10,Le))),256)),r("div",Ne,[De,r("a",{class:n(["pen",{now:e.draw=="pen"}]),onClick:o[2]||(o[2]=s=>e.go("pen")),title:"画笔"},[y(a,{shape:"pen"})],2),r("a",{class:n(["rect",{now:e.draw=="rect"}]),onClick:o[3]||(o[3]=s=>e.go("rect")),title:"画框"},[y(a,{shape:"rect"})],2),r("a",{class:n(["txt",{now:e.draw=="txt"}]),onClick:o[4]||(o[4]=s=>e.go("txt")),title:"文字"},[y(a,{shape:"txt"})],2),r("a",{class:n(["arrow",{now:e.draw=="arrow"}]),onClick:o[5]||(o[5]=s=>e.go("arrow")),title:"箭头"},[y(a,{shape:"arrow"})],2),r("a",{class:n(["track",{now:e.draw=="track"}]),onClick:o[6]||(o[6]=s=>e.go("track")),title:"轨迹"},null,2)]),r("a",{class:"fold",onClick:o[7]||(o[7]=s=>e.go("fold")),title:"收起"})],2)}var qe=H(be,[["render",Oe],["__scopeId","data-v-80028d8e"]]);export{qe as default};
