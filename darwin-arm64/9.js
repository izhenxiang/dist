import{s as v,r as M,o as j,k as W,M as $,l as q,a as m,F as E,P as O,f as G,e as n,h as P,t as R,m as c,p as J,i as K,b as Q,d as w,_ as U}from"./_.js";import{i as _}from"./..js";import{b as k}from"./$.js";import{O as X}from"./-.js";import{d as Y}from"./8.js";/* empty css        */import{c as p}from"./b.js";import{D as Z}from"./n.js";import{z as x,f as V}from"./f.js";import{H as ee}from"./h.js";import"./d.js";import"./k.js";var b;b=e=>(e+"").padStart(2,"0");var ae=()=>{var e,a,t,r,l;return e=v("00"),a=v("00"),t=v(0),[l,r]=(()=>{var u,s;return s=0,u=void 0,[()=>{u=setInterval(()=>{++s,e.value=b(parseInt(s/60)),a.value=b(s%60),t.value=s},1e3)},()=>{clearInterval(u)}]})(),[t,e,a,l,r]},f,B,S,C,F,i,g,H,L,I,T,z,d;({recbar:g}=_);[L,F,H,z,T]=ae();I=e=>{var a,t,r;t=e.split(`
`),r=[];for(a of t)r.push(a.split(" "));return r};setInterval(async()=>{await V()},5*60*1e3);i=v(!1);f=!1;S=v();B=e=>{[z,T][e-0]()};d=()=>{var e;({value:e}=i),e=!e,k.pause(i.value=e),f&&B(e)};C={pause:async()=>{i.value&&await V(),d()},reset:()=>{f&&(i.value||d(),$(async()=>await _.confirm.show("reset")?k.reset():d()))},cancel:async()=>{if(!f){await g.cancel();return}i.value||d(),$(async()=>await _.confirm.show("cancel")?k.cancel():d())},stop:()=>{k.stop(),T()}};X.start=()=>{z(),f=!0,S.value.className=""};p.src!=="camera"&&q(()=>import("./$!.js"),["$!.js","u.js","-.js","$0.js","..js","b.js","d.js","$.js","k.js","_.js","7.css","h.js","1.js","$1.js","v.js"]);var re={components:{zAudio:x},setup:()=>{var e,a,t,r,l,u,s,y,A,D;for(l=I("video 摄像头"),A=M(I(`pause 暂停
stop 结束录制
reset 重新录制
cancel 取消录制`)),D=o=>()=>{p[o]=p[o]?"":localStorage[o],!i.value&&!p.video&&!p.audio&&p.src==="camera"&&C.pause()},y=["audio","video"],r=0,u=y.length;r<u;r++)t=y[r],C[t]=D(t);return a=v(),s=v(),j(()=>{Y(s.value)}),e=o=>{o>=p.max_duration&&f&&(i.value||d(),$(async()=>(await _.confirm.show("pay"),_.open(ee+"?pay=true&user_token="+localStorage.uid),d())))},W(()=>{e(L.value)}),{go:async o=>{var h;if(["pen","rect","txt","arrow"].indexOf(o)+1){if({value:h}=a,h!==o){if(Z.shape=a.value=o,h)return}else{a.value="",await g.draw_x();return}await g.draw();return}(C[o]||g[o])()},left:l,nav:s,right:A,code:S,minute:F,second:H,pause:i,config:p,draw:a}}};const N=e=>(J("data-v-08559202"),e=e(),K(),e),te=["title","onClick"],se=N(()=>n("b",null,null,-1)),oe={class:"pause",ref:"code"},ne=N(()=>n("span",null,":",-1)),le=["title","onClick"],ie={class:"draw"},ue=N(()=>n("b",null,null,-1));function pe(e,a){const t=Q("z-audio");return w(),m("nav",{class:c({pause:e.pause}),ref:"nav"},[(w(!0),m(E,null,O(e.left,([r,l],u)=>(w(),m("a",{class:c([r,e.config[r]?"":"x"]),title:l,onClick:s=>e.go(r)},null,10,te))),256)),G(t,{onClick:a[0]||(a[0]=r=>e.go("audio"))}),se,n("code",oe,[P(R(e.minute),1),ne,P(R(e.second),1)],512),(w(!0),m(E,null,O(e.right,([r,l],u)=>(w(),m("a",{class:c([r]),title:l,onClick:s=>e.go(r)},null,10,le))),256)),n("div",ie,[ue,n("a",{class:c(["pen",{now:e.draw=="pen"}]),onClick:a[1]||(a[1]=r=>e.go("pen")),title:"画笔"},null,2),n("a",{class:c(["rect",{now:e.draw=="rect"}]),onClick:a[2]||(a[2]=r=>e.go("rect")),title:"画框"},null,2),n("a",{class:c(["txt",{now:e.draw=="txt"}]),onClick:a[3]||(a[3]=r=>e.go("txt")),title:"文字"},null,2),n("a",{class:c(["arrow",{now:e.draw=="arrow"}]),onClick:a[4]||(a[4]=r=>e.go("arrow")),title:"箭头"},null,2)]),n("a",{class:"left",onClick:a[5]||(a[5]=r=>e.go("left")),title:"收起"}),n("a",{class:"expand",onClick:a[6]||(a[6]=r=>e.go("expand"))})],2)}var $e=U(re,[["render",pe],["__scopeId","data-v-08559202"]]);export{$e as default};
